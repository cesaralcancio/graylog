b/35413753206145674056668425931285084086775887033197854720	f/35414052136484687760406342852462671655999831351405510658
EVENTS	1588007618614	{"@timestamp":"2020-04-27T17:13:35.480Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 9a78b989-cb6e-49fd-ad3d-1a4c59b76fca "}	1588007615480
EVENTS	1588007618614	{"@timestamp":"2020-04-27T17:13:35.481Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 9a78b989-cb6e-49fd-ad3d-1a4c59b76fca"}	1588007615481
EVENTS	1588007618614	{"@timestamp":"2020-04-27T17:13:35.482Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 9a78b989-cb6e-49fd-ad3d-1a4c59b76fca: []"}	1588007615482
EVENTS	1588007628616	{"@timestamp":"2020-04-27T17:13:45.592Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token b63283f7-aa29-4321-8741-0bbae7b96a99 "}	1588007625593
EVENTS	1588007628616	{"@timestamp":"2020-04-27T17:13:45.593Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token b63283f7-aa29-4321-8741-0bbae7b96a99"}	1588007625593
EVENTS	1588007628616	{"@timestamp":"2020-04-27T17:13:45.594Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token b63283f7-aa29-4321-8741-0bbae7b96a99: []"}	1588007625594
EVENTS	1588007708622	{"@timestamp":"2020-04-27T17:15:07.477Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token ceecfdf4-b6e2-44c1-80a2-3cd8ef2d0224 "}	1588007707478
EVENTS	1588007708622	{"@timestamp":"2020-04-27T17:15:07.478Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token ceecfdf4-b6e2-44c1-80a2-3cd8ef2d0224"}	1588007707478
EVENTS	1588007708622	{"@timestamp":"2020-04-27T17:15:07.479Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token ceecfdf4-b6e2-44c1-80a2-3cd8ef2d0224: []"}	1588007707480
EVENTS	1588007873615	{"@timestamp":"2020-04-27T17:17:49.483Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token d5a3b648-b46a-4dcb-8cf3-f982af0fa767 "}	1588007869483
EVENTS	1588007873615	{"@timestamp":"2020-04-27T17:17:49.483Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token d5a3b648-b46a-4dcb-8cf3-f982af0fa767"}	1588007869484
EVENTS	1588007873615	{"@timestamp":"2020-04-27T17:17:49.485Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token d5a3b648-b46a-4dcb-8cf3-f982af0fa767: []"}	1588007869485
EVENTS	1588007878608	{"@timestamp":"2020-04-27T17:17:54.978Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 80cbb1e3-7ef1-45d6-8d44-cc05ac53ad77 "}	1588007874979
EVENTS	1588007878608	{"@timestamp":"2020-04-27T17:17:54.979Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 80cbb1e3-7ef1-45d6-8d44-cc05ac53ad77"}	1588007874979
EVENTS	1588007878608	{"@timestamp":"2020-04-27T17:17:54.980Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 80cbb1e3-7ef1-45d6-8d44-cc05ac53ad77: []"}	1588007874981
EVENTS	1588007928616	{"@timestamp":"2020-04-27T17:18:45.565Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 747024c6-dd6b-4f9d-b2b3-a15968fc61de "}	1588007925565
EVENTS	1588007928616	{"@timestamp":"2020-04-27T17:18:45.565Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 747024c6-dd6b-4f9d-b2b3-a15968fc61de"}	1588007925566
EVENTS	1588007928616	{"@timestamp":"2020-04-27T17:18:45.567Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 747024c6-dd6b-4f9d-b2b3-a15968fc61de: []"}	1588007925567
EVENTS	1588007928616	{"@timestamp":"2020-04-27T17:18:46.998Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 83229557-85c9-4287-a7df-4b67fc3ec0ce "}	1588007926999
EVENTS	1588007928616	{"@timestamp":"2020-04-27T17:18:46.999Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 83229557-85c9-4287-a7df-4b67fc3ec0ce"}	1588007926999
EVENTS	1588007928616	{"@timestamp":"2020-04-27T17:18:47.001Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 83229557-85c9-4287-a7df-4b67fc3ec0ce: []"}	1588007927002
EVENTS	1588008143619	{"@timestamp":"2020-04-27T17:22:21.930Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 3c787a3d-0a26-4ab0-b7cb-9c3c0bd90600 "}	1588008141930
EVENTS	1588008143619	{"@timestamp":"2020-04-27T17:22:21.930Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 3c787a3d-0a26-4ab0-b7cb-9c3c0bd90600"}	1588008141931
EVENTS	1588008143619	{"@timestamp":"2020-04-27T17:22:21.933Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 3c787a3d-0a26-4ab0-b7cb-9c3c0bd90600: []"}	1588008141933
EVENTS	1588008183648	{"@timestamp":"2020-04-27T17:23:00.159Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token d7b942e5-0b62-40c9-9771-b662e03a7b73 "}	1588008180159
EVENTS	1588008183648	{"@timestamp":"2020-04-27T17:23:00.159Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token d7b942e5-0b62-40c9-9771-b662e03a7b73"}	1588008180160
EVENTS	1588008183648	{"@timestamp":"2020-04-27T17:23:00.161Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token d7b942e5-0b62-40c9-9771-b662e03a7b73: []"}	1588008180161
EVENTS	1588008263617	{"@timestamp":"2020-04-27T17:24:21.545Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token ebd23e34-1d20-4592-afa8-cb0e2e14ef94 "}	1588008261545
EVENTS	1588008263617	{"@timestamp":"2020-04-27T17:24:21.545Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token ebd23e34-1d20-4592-afa8-cb0e2e14ef94"}	1588008261546
EVENTS	1588008263617	{"@timestamp":"2020-04-27T17:24:21.547Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token ebd23e34-1d20-4592-afa8-cb0e2e14ef94: []"}	1588008261548
EVENTS	1588008423784	{"@timestamp":"2020-04-27T17:27:01.159Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 3ca8b5d6-4739-4c26-911c-fabf860532b5 "}	1588008421159
EVENTS	1588008423784	{"@timestamp":"2020-04-27T17:27:01.159Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 3ca8b5d6-4739-4c26-911c-fabf860532b5"}	1588008421159
EVENTS	1588008423784	{"@timestamp":"2020-04-27T17:27:01.185Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 3ca8b5d6-4739-4c26-911c-fabf860532b5: []"}	1588008421185
EVENTS	1588008613621	{"@timestamp":"2020-04-27T17:30:09.771Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 0abef074-5573-4600-9181-8e2ea8cc84c7 "}	1588008609772
EVENTS	1588008613621	{"@timestamp":"2020-04-27T17:30:09.772Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 0abef074-5573-4600-9181-8e2ea8cc84c7"}	1588008609772
EVENTS	1588008613621	{"@timestamp":"2020-04-27T17:30:09.783Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 0abef074-5573-4600-9181-8e2ea8cc84c7: []"}	1588008609783
EVENTS	1588008643616	{"@timestamp":"2020-04-27T17:30:39.933Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 6a6717f8-f9ac-420d-826e-cca60025362c "}	1588008639934
EVENTS	1588008643616	{"@timestamp":"2020-04-27T17:30:39.934Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 6a6717f8-f9ac-420d-826e-cca60025362c"}	1588008639934
EVENTS	1588008643616	{"@timestamp":"2020-04-27T17:30:39.935Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 6a6717f8-f9ac-420d-826e-cca60025362c: []"}	1588008639936
EVENTS	1588008683628	{"@timestamp":"2020-04-27T17:31:18.823Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token ba85fc23-4789-40df-ab55-14bafa1116b5 "}	1588008678823
EVENTS	1588008683628	{"@timestamp":"2020-04-27T17:31:18.823Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token ba85fc23-4789-40df-ab55-14bafa1116b5"}	1588008678823
EVENTS	1588008683628	{"@timestamp":"2020-04-27T17:31:18.825Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token ba85fc23-4789-40df-ab55-14bafa1116b5: []"}	1588008678825
EVENTS	1588008693634	{"@timestamp":"2020-04-27T17:31:32.854Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 485248be-0e1f-4f4f-ad65-881b8928f0c3 "}	1588008692854
EVENTS	1588008693634	{"@timestamp":"2020-04-27T17:31:32.854Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 485248be-0e1f-4f4f-ad65-881b8928f0c3"}	1588008692854
EVENTS	1588008693634	{"@timestamp":"2020-04-27T17:31:32.856Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 485248be-0e1f-4f4f-ad65-881b8928f0c3: []"}	1588008692856
EVENTS	1588009183618	{"@timestamp":"2020-04-27T17:39:40.499Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 2e9d4348-c849-46d1-b75f-9642c6a81b72 "}	1588009180500
EVENTS	1588009183618	{"@timestamp":"2020-04-27T17:39:40.500Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 2e9d4348-c849-46d1-b75f-9642c6a81b72"}	1588009180501
EVENTS	1588009183618	{"@timestamp":"2020-04-27T17:39:40.504Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 2e9d4348-c849-46d1-b75f-9642c6a81b72: []"}	1588009180504
EVENTS	1588009223622	{"@timestamp":"2020-04-27T17:40:20.704Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 6e1a510f-67eb-43eb-8a38-ee4f572b47c7 "}	1588009220704
EVENTS	1588009223622	{"@timestamp":"2020-04-27T17:40:20.704Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 6e1a510f-67eb-43eb-8a38-ee4f572b47c7"}	1588009220704
EVENTS	1588009223622	{"@timestamp":"2020-04-27T17:40:20.706Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 6e1a510f-67eb-43eb-8a38-ee4f572b47c7: []"}	1588009220706
EVENTS	1588009258618	{"@timestamp":"2020-04-27T17:40:54.127Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token bced4998-8115-4b7b-afc3-988b803477c5 "}	1588009254127
EVENTS	1588009258618	{"@timestamp":"2020-04-27T17:40:54.127Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token bced4998-8115-4b7b-afc3-988b803477c5"}	1588009254128
EVENTS	1588009258618	{"@timestamp":"2020-04-27T17:40:54.128Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token bced4998-8115-4b7b-afc3-988b803477c5: []"}	1588009254129
EVENTS	1588009403616	{"@timestamp":"2020-04-27T17:43:18.627Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token c3820ac6-8b7e-4598-a9cb-514c9770d554 "}	1588009398628
EVENTS	1588009403616	{"@timestamp":"2020-04-27T17:43:18.628Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token c3820ac6-8b7e-4598-a9cb-514c9770d554"}	1588009398628
EVENTS	1588009403616	{"@timestamp":"2020-04-27T17:43:18.629Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token c3820ac6-8b7e-4598-a9cb-514c9770d554: []"}	1588009398629
EVENTS	1588010133620	{"@timestamp":"2020-04-27T17:55:31.619Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 47a5f8ef-1e87-4751-8f1c-d8ee8346dd5e "}	1588010131619
EVENTS	1588010133620	{"@timestamp":"2020-04-27T17:55:31.619Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 47a5f8ef-1e87-4751-8f1c-d8ee8346dd5e"}	1588010131619
EVENTS	1588010133620	{"@timestamp":"2020-04-27T17:55:31.621Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 47a5f8ef-1e87-4751-8f1c-d8ee8346dd5e"}	1588010131622
EVENTS	1588010133620	{"@timestamp":"2020-04-27T17:55:31.622Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '47a5f8ef-1e87-4751-8f1c-d8ee8346dd5e' and pre-approval: '35ad88bc-57b9-4c47-ae36-d6baa7ac99dd'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588010131623
EVENTS	1588010133620	{"@timestamp":"2020-04-27T17:55:31.759Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"status\": \"not_approved\"}"}	1588010131759
EVENTS	1588010133620	{"@timestamp":"2020-04-27T17:55:31.759Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 47a5f8ef-1e87-4751-8f1c-d8ee8346dd5e"}	1588010131760
EVENTS	1588010133620	{"@timestamp":"2020-04-27T17:55:31.761Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '47a5f8ef-1e87-4751-8f1c-d8ee8346dd5e' and pre-approval: '8e3661f3-255f-4388-8c7c-7fa4ebf5c34b'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588010131761
EVENTS	1588010133620	{"@timestamp":"2020-04-27T17:55:31.825Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"status\": \"not_approved\"}"}	1588010131826
EVENTS	1588010133620	{"@timestamp":"2020-04-27T17:55:31.826Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 47a5f8ef-1e87-4751-8f1c-d8ee8346dd5e"}	1588010131826
EVENTS	1588010133620	{"@timestamp":"2020-04-27T17:55:31.827Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '47a5f8ef-1e87-4751-8f1c-d8ee8346dd5e' and pre-approval: '995b76fd-a14d-49d0-8425-403a47e37146'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588010131828
EVENTS	1588010133620	{"@timestamp":"2020-04-27T17:55:31.889Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"status\": \"not_approved\"}"}	1588010131889
EVENTS	1588010133620	{"@timestamp":"2020-04-27T17:55:31.889Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 47a5f8ef-1e87-4751-8f1c-d8ee8346dd5e"}	1588010131890
EVENTS	1588010133620	{"@timestamp":"2020-04-27T17:55:31.891Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '47a5f8ef-1e87-4751-8f1c-d8ee8346dd5e' and pre-approval: '3cd31f72-e82a-44d6-a260-8955a59de1c6'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588010131892
EVENTS	1588010133620	{"@timestamp":"2020-04-27T17:55:31.939Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588010131939
EVENTS	1588010133620	{"@timestamp":"2020-04-27T17:55:31.940Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588010131940
EVENTS	1588010133620	{"@timestamp":"2020-04-27T17:55:31.940Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 47a5f8ef-1e87-4751-8f1c-d8ee8346dd5e"}	1588010131941
EVENTS	1588010133620	{"@timestamp":"2020-04-27T17:55:31.942Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '47a5f8ef-1e87-4751-8f1c-d8ee8346dd5e' and pre-approval: '6278383b-9998-49d2-b7d9-214fafc68708'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588010131942
EVENTS	1588010133620	{"@timestamp":"2020-04-27T17:55:32.032Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588010132034
EVENTS	1588010133620	{"@timestamp":"2020-04-27T17:55:32.034Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588010132035
EVENTS	1588010133620	{"@timestamp":"2020-04-27T17:55:32.036Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 47a5f8ef-1e87-4751-8f1c-d8ee8346dd5e"}	1588010132036
EVENTS	1588010133620	{"@timestamp":"2020-04-27T17:55:32.039Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '47a5f8ef-1e87-4751-8f1c-d8ee8346dd5e' and pre-approval: 'c5f9c0ad-9846-441c-bd61-f07581297253'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588010132040
EVENTS	1588010133620	{"@timestamp":"2020-04-27T17:55:32.081Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588010132081
EVENTS	1588010133620	{"@timestamp":"2020-04-27T17:55:32.081Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588010132081
EVENTS	1588010133620	{"@timestamp":"2020-04-27T17:55:32.082Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 47a5f8ef-1e87-4751-8f1c-d8ee8346dd5e: [{\"id\":\"35ad88bc-57b9-4c47-ae36-d6baa7ac99dd\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"47a5f8ef-1e87-4751-8f1c-d8ee8346dd5e\",\"proxy_merchant_token\":\"c478038f-ad4f-4006-867b-421876c4dbda\",\"status\":\"DECLINED\",\"sub_status\":\"not_approved\",\"amount\":\"20700.00\",\"interest\":\"1610.00\",\"tax\":\"257.60\",\"payback\":\"22567.60\",\"retention_rate\":\"14.0000\",\"expiration_date\":\"2020-01-21\",\"term_maximum\":4,\"created_at\":\"2019-12-13T19:32:48Z\"},{\"id\":\"8e3661f3-255f-4388-8c7c-7fa4ebf5c34b\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"47a5f8ef-1e87-4751-8f1c-d8ee8346dd5e\",\"proxy_merchant_token\":\"c478038f-ad4f-4006-867b-421876c4dbda\",\"status\":\"REJECTED\",\"sub_status\":\"not_approved\",\"amount\":\"26600.00\",\"interest\":\"2090.00\",\"tax\":\"334.40\",\"payback\":\"29024.40\",\"retention_rate\":\"18.0000\",\"expiration_date\":\"2020-01-21\",\"term_maximum\":4,\"created_at\":\"2019-12-13T19:32:48Z\"},{\"id\":\"995b76fd-a14d-49d0-8425-403a47e37146\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"47a5f8ef-1e87-4751-8f1c-d8ee8346dd5e\",\"proxy_merchant_token\":\"c478038f-ad4f-4006-867b-421876c4dbda\",\"status\":\"DECLINED\",\"sub_status\":\"not_approved\",\"amount\":\"14600.00\",\"interest\":\"1340.00\",\"tax\":\"214.40\",\"payback\":\"16154.40\",\"retention_rate\":\"10.0000\",\"expiration_date\":\"2020-01-21\",\"term_maximum\":4,\"created_at\":\"2019-12-13T19:32:48Z\"},{\"id\":\"3cd31f72-e82a-44d6-a260-8955a59de1c6\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"47a5f8ef-1e87-4751-8f1c-d8ee8346dd5e\",\"proxy_merchant_token\":\"c478038f-ad4f-4006-867b-421876c4dbda\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"17300.00\",\"interest\":\"2250.00\",\"tax\":\"360.00\",\"payback\":\"19910.00\",\"retention_rate\":\"10.0000\",\"expiration_date\":\"2019-12-13\",\"term_maximum\":5,\"created_at\":\"2019-11-29T00:02:27Z\"},{\"id\":\"6278383b-9998-49d2-b7d9-214fafc68708\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"47a5f8ef-1e87-4751-8f1c-d8ee8346dd5e\",\"proxy_merchant_token\":\"c478038f-ad4f-4006-867b-421876c4dbda\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"24300.00\",\"interest\":\"3070.00\",\"tax\":\"491.20\",\"payback\":\"27861.20\",\"retention_rate\":\"14.0000\",\"expiration_date\":\"2019-12-13\",\"term_maximum\":5,\"created_at\":\"2019-11-29T00:02:27Z\"},{\"id\":\"c5f9c0ad-9846-441c-bd61-f07581297253\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"47a5f8ef-1e87-4751-8f1c-d8ee8346dd5e\",\"proxy_merchant_token\":\"c478038f-ad4f-4006-867b-421876c4dbda\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"31300.00\",\"interest\":\"3900.00\",\"tax\":\"624.00\",\"payback\":\"35824.00\",\"retention_rate\":\"18.0000\",\"expiration_date\":\"2019-12-13\",\"term_maximum\":5,\"created_at\":\"2019-11-29T00:02:27Z\"}]"}	1588010132083
EVENTS	1588010238617	{"@timestamp":"2020-04-27T17:57:18.335Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 4e7f475c-d2d1-4098-ac92-6ae3835adb6f "}	1588010238336
EVENTS	1588010238617	{"@timestamp":"2020-04-27T17:57:18.335Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 4e7f475c-d2d1-4098-ac92-6ae3835adb6f"}	1588010238336
EVENTS	1588010238617	{"@timestamp":"2020-04-27T17:57:18.336Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 4e7f475c-d2d1-4098-ac92-6ae3835adb6f: []"}	1588010238337
EVENTS	1588010423622	{"@timestamp":"2020-04-27T18:00:19.846Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 064a1b33-fbb7-4fb4-9e0d-3f6338a7bbd6 "}	1588010419846
EVENTS	1588010423622	{"@timestamp":"2020-04-27T18:00:19.847Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 064a1b33-fbb7-4fb4-9e0d-3f6338a7bbd6"}	1588010419847
EVENTS	1588010423622	{"@timestamp":"2020-04-27T18:00:19.848Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 064a1b33-fbb7-4fb4-9e0d-3f6338a7bbd6: []"}	1588010419848
EVENTS	1588010498622	{"@timestamp":"2020-04-27T18:01:34.336Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 08b2572d-0a00-4860-af07-275619a874a6 "}	1588010494337
EVENTS	1588010498622	{"@timestamp":"2020-04-27T18:01:34.337Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 08b2572d-0a00-4860-af07-275619a874a6"}	1588010494337
EVENTS	1588010498622	{"@timestamp":"2020-04-27T18:01:34.338Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 08b2572d-0a00-4860-af07-275619a874a6: []"}	1588010494338
EVENTS	1588010818617	{"@timestamp":"2020-04-27T18:06:54.769Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token d7b942e5-0b62-40c9-9771-b662e03a7b73 "}	1588010814769
EVENTS	1588010818617	{"@timestamp":"2020-04-27T18:06:54.769Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token d7b942e5-0b62-40c9-9771-b662e03a7b73"}	1588010814769
EVENTS	1588010818617	{"@timestamp":"2020-04-27T18:06:54.770Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token d7b942e5-0b62-40c9-9771-b662e03a7b73: []"}	1588010814770
EVENTS	1588010838620	{"@timestamp":"2020-04-27T18:07:14.841Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 7d97de92-67b9-490d-aba9-d4bba2ea15ce "}	1588010834842
EVENTS	1588010838620	{"@timestamp":"2020-04-27T18:07:14.842Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 7d97de92-67b9-490d-aba9-d4bba2ea15ce"}	1588010834842
EVENTS	1588010838620	{"@timestamp":"2020-04-27T18:07:14.843Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 7d97de92-67b9-490d-aba9-d4bba2ea15ce: []"}	1588010834843
EVENTS	1588010848619	{"@timestamp":"2020-04-27T18:07:28.482Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token c2d78bb1-a58c-433b-82ad-721eb62642d9 "}	1588010848482
EVENTS	1588010848619	{"@timestamp":"2020-04-27T18:07:28.483Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token c2d78bb1-a58c-433b-82ad-721eb62642d9"}	1588010848483
EVENTS	1588010848619	{"@timestamp":"2020-04-27T18:07:28.484Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token c2d78bb1-a58c-433b-82ad-721eb62642d9: []"}	1588010848485
EVENTS	1588010853605	{"@timestamp":"2020-04-27T18:07:29.479Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token e41178b7-e842-4301-ae63-5eb7644c46e4 "}	1588010849480
EVENTS	1588010853605	{"@timestamp":"2020-04-27T18:07:29.480Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token e41178b7-e842-4301-ae63-5eb7644c46e4"}	1588010849480
EVENTS	1588010853605	{"@timestamp":"2020-04-27T18:07:29.481Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token e41178b7-e842-4301-ae63-5eb7644c46e4: []"}	1588010849481
EVENTS	1588011058617	{"@timestamp":"2020-04-27T18:10:54.260Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token b9ab8351-605c-4073-8959-1ea17a1576a1 "}	1588011054261
EVENTS	1588011058617	{"@timestamp":"2020-04-27T18:10:54.261Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token b9ab8351-605c-4073-8959-1ea17a1576a1"}	1588011054261
EVENTS	1588011058617	{"@timestamp":"2020-04-27T18:10:54.262Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token b9ab8351-605c-4073-8959-1ea17a1576a1: []"}	1588011054263
EVENTS	1588011213622	{"@timestamp":"2020-04-27T18:13:32.298Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 45d49269-e065-45d9-805a-12b8181d2b19 "}	1588011212299
EVENTS	1588011213622	{"@timestamp":"2020-04-27T18:13:32.299Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 45d49269-e065-45d9-805a-12b8181d2b19"}	1588011212299
EVENTS	1588011213622	{"@timestamp":"2020-04-27T18:13:32.300Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 45d49269-e065-45d9-805a-12b8181d2b19: []"}	1588011212301
EVENTS	1588011263648	{"@timestamp":"2020-04-27T18:14:19.443Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token c78226d3-9bc8-4200-b3a9-ffc43aee37aa "}	1588011259444
EVENTS	1588011263648	{"@timestamp":"2020-04-27T18:14:19.444Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token c78226d3-9bc8-4200-b3a9-ffc43aee37aa"}	1588011259444
EVENTS	1588011263648	{"@timestamp":"2020-04-27T18:14:19.445Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token c78226d3-9bc8-4200-b3a9-ffc43aee37aa: []"}	1588011259445
EVENTS	1588011283622	{"@timestamp":"2020-04-27T18:14:41.449Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 0abef074-5573-4600-9181-8e2ea8cc84c7 "}	1588011281449
EVENTS	1588011283622	{"@timestamp":"2020-04-27T18:14:41.449Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 0abef074-5573-4600-9181-8e2ea8cc84c7"}	1588011281450
EVENTS	1588011283622	{"@timestamp":"2020-04-27T18:14:41.450Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 0abef074-5573-4600-9181-8e2ea8cc84c7: []"}	1588011281450
EVENTS	1588011658624	{"@timestamp":"2020-04-27T18:20:57.851Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token d8ff0ae1-3673-49e3-835c-a303453d9542 "}	1588011657852
EVENTS	1588011658624	{"@timestamp":"2020-04-27T18:20:57.852Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token d8ff0ae1-3673-49e3-835c-a303453d9542"}	1588011657852
EVENTS	1588011658624	{"@timestamp":"2020-04-27T18:20:57.853Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token d8ff0ae1-3673-49e3-835c-a303453d9542"}	1588011657854
EVENTS	1588011658624	{"@timestamp":"2020-04-27T18:20:57.855Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'd8ff0ae1-3673-49e3-835c-a303453d9542' and pre-approval: '16588ca5-7bb0-4660-8630-9fb2b990be20'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588011657855
EVENTS	1588011658624	{"@timestamp":"2020-04-27T18:20:57.855Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token d8ff0ae1-3673-49e3-835c-a303453d9542: [{\"id\":\"16588ca5-7bb0-4660-8630-9fb2b990be20\",\"loan\":null,\"provider_code\":\"CLIP\",\"provider_id\":null,\"merchant_token\":\"d8ff0ae1-3673-49e3-835c-a303453d9542\",\"proxy_merchant_token\":\"49698d89-11a9-4adf-af15-6f5fd71d1954\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"10000.00\",\"interest\":\"1500.00\",\"tax\":\"240.00\",\"payback\":\"11740.00\",\"retention_rate\":\"15.0000\",\"expiration_date\":\"2019-06-28\",\"term_maximum\":6,\"created_at\":\"2019-06-06T16:13:09Z\"}]"}	1588011657856
EVENTS	1588011738617	{"@timestamp":"2020-04-27T18:22:14.405Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 1658e437-4ac9-4f9f-a872-7a882ba77694 "}	1588011734405
EVENTS	1588011738617	{"@timestamp":"2020-04-27T18:22:14.406Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 1658e437-4ac9-4f9f-a872-7a882ba77694"}	1588011734406
EVENTS	1588011738617	{"@timestamp":"2020-04-27T18:22:14.407Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 1658e437-4ac9-4f9f-a872-7a882ba77694: []"}	1588011734407
EVENTS	1588011853616	{"@timestamp":"2020-04-27T18:24:09.269Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 1658e437-4ac9-4f9f-a872-7a882ba77694 "}	1588011849269
EVENTS	1588011853616	{"@timestamp":"2020-04-27T18:24:09.269Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 1658e437-4ac9-4f9f-a872-7a882ba77694"}	1588011849270
EVENTS	1588011853616	{"@timestamp":"2020-04-27T18:24:09.271Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 1658e437-4ac9-4f9f-a872-7a882ba77694: []"}	1588011849271
EVENTS	1588011953622	{"@timestamp":"2020-04-27T18:25:51.150Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 75ead366-1b8e-4e7c-b322-50eac75b3b3e "}	1588011951150
EVENTS	1588011953622	{"@timestamp":"2020-04-27T18:25:51.150Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 75ead366-1b8e-4e7c-b322-50eac75b3b3e"}	1588011951151
EVENTS	1588011953622	{"@timestamp":"2020-04-27T18:25:51.152Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 75ead366-1b8e-4e7c-b322-50eac75b3b3e: []"}	1588011951152
EVENTS	1588012078617	{"@timestamp":"2020-04-27T18:27:56.217Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 6eaac34b-6227-4377-bc66-138aad6532b4 "}	1588012076218
EVENTS	1588012078617	{"@timestamp":"2020-04-27T18:27:56.218Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 6eaac34b-6227-4377-bc66-138aad6532b4"}	1588012076218
EVENTS	1588012078617	{"@timestamp":"2020-04-27T18:27:56.223Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 6eaac34b-6227-4377-bc66-138aad6532b4: []"}	1588012076223
EVENTS	1588012083605	{"@timestamp":"2020-04-27T18:27:58.725Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 9fd2165a-31b3-4935-aad7-3f924f041204 "}	1588012078725
EVENTS	1588012083605	{"@timestamp":"2020-04-27T18:27:58.726Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 9fd2165a-31b3-4935-aad7-3f924f041204"}	1588012078726
EVENTS	1588012083605	{"@timestamp":"2020-04-27T18:27:58.727Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 9fd2165a-31b3-4935-aad7-3f924f041204: []"}	1588012078727
EVENTS	1588012113616	{"@timestamp":"2020-04-27T18:28:30.273Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token dcb6596c-53d6-43b1-87e9-5a0c7493d7d9 "}	1588012110273
EVENTS	1588012113616	{"@timestamp":"2020-04-27T18:28:30.273Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token dcb6596c-53d6-43b1-87e9-5a0c7493d7d9"}	1588012110273
EVENTS	1588012113616	{"@timestamp":"2020-04-27T18:28:30.275Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token dcb6596c-53d6-43b1-87e9-5a0c7493d7d9: []"}	1588012110275
EVENTS	1588012348618	{"@timestamp":"2020-04-27T18:32:26.286Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 3ca7de6a-32c6-4d63-92b3-ea9182124e24 "}	1588012346287
EVENTS	1588012348618	{"@timestamp":"2020-04-27T18:32:26.287Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 3ca7de6a-32c6-4d63-92b3-ea9182124e24"}	1588012346287
EVENTS	1588012348618	{"@timestamp":"2020-04-27T18:32:26.288Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 3ca7de6a-32c6-4d63-92b3-ea9182124e24: []"}	1588012346288
EVENTS	1588012358616	{"@timestamp":"2020-04-27T18:32:37.630Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 3ca7de6a-32c6-4d63-92b3-ea9182124e24 "}	1588012357630
EVENTS	1588012358616	{"@timestamp":"2020-04-27T18:32:37.630Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 3ca7de6a-32c6-4d63-92b3-ea9182124e24"}	1588012357630
EVENTS	1588012358616	{"@timestamp":"2020-04-27T18:32:37.631Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 3ca7de6a-32c6-4d63-92b3-ea9182124e24: []"}	1588012357632
EVENTS	1588012363613	{"@timestamp":"2020-04-27T18:32:41.024Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 3ca7de6a-32c6-4d63-92b3-ea9182124e24 "}	1588012361025
EVENTS	1588012363613	{"@timestamp":"2020-04-27T18:32:41.025Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 3ca7de6a-32c6-4d63-92b3-ea9182124e24"}	1588012361025
EVENTS	1588012363613	{"@timestamp":"2020-04-27T18:32:41.040Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 3ca7de6a-32c6-4d63-92b3-ea9182124e24: []"}	1588012361041
EVENTS	1588012368610	{"@timestamp":"2020-04-27T18:32:45.054Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 3ca7de6a-32c6-4d63-92b3-ea9182124e24 "}	1588012365054
EVENTS	1588012368610	{"@timestamp":"2020-04-27T18:32:45.054Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 3ca7de6a-32c6-4d63-92b3-ea9182124e24"}	1588012365054
EVENTS	1588012368610	{"@timestamp":"2020-04-27T18:32:45.056Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 3ca7de6a-32c6-4d63-92b3-ea9182124e24: []"}	1588012365056
EVENTS	1588012368610	{"@timestamp":"2020-04-27T18:32:48.412Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 3ca7de6a-32c6-4d63-92b3-ea9182124e24 "}	1588012368413
EVENTS	1588012368610	{"@timestamp":"2020-04-27T18:32:48.413Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 3ca7de6a-32c6-4d63-92b3-ea9182124e24"}	1588012368413
EVENTS	1588012368610	{"@timestamp":"2020-04-27T18:32:48.417Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 3ca7de6a-32c6-4d63-92b3-ea9182124e24: []"}	1588012368417
EVENTS	1588012443680	{"@timestamp":"2020-04-27T18:33:59.998Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 3ca7de6a-32c6-4d63-92b3-ea9182124e24 "}	1588012439998
EVENTS	1588012443680	{"@timestamp":"2020-04-27T18:33:59.998Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 3ca7de6a-32c6-4d63-92b3-ea9182124e24"}	1588012439998
EVENTS	1588012443680	{"@timestamp":"2020-04-27T18:33:59.999Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 3ca7de6a-32c6-4d63-92b3-ea9182124e24: []"}	1588012440000
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:24.851Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 0d4f2f64-8e0a-41ab-9b5d-d307cb304e34 "}	1588012464851
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:24.851Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 0d4f2f64-8e0a-41ab-9b5d-d307cb304e34"}	1588012464852
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:24.854Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 0d4f2f64-8e0a-41ab-9b5d-d307cb304e34"}	1588012464854
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:24.855Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '0d4f2f64-8e0a-41ab-9b5d-d307cb304e34' and pre-approval: '0a164a39-4423-472a-82fc-b1e13a10cecf'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588012464855
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:24.906Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"status\": \"available\"}"}	1588012464906
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:24.906Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 0d4f2f64-8e0a-41ab-9b5d-d307cb304e34"}	1588012464907
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:24.908Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '0d4f2f64-8e0a-41ab-9b5d-d307cb304e34' and pre-approval: '6c8ff748-f8a6-4a46-b0c3-935f2fd542a2'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588012464909
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:24.950Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"status\": \"available\"}"}	1588012464951
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:24.951Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 0d4f2f64-8e0a-41ab-9b5d-d307cb304e34"}	1588012464951
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:24.952Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '0d4f2f64-8e0a-41ab-9b5d-d307cb304e34' and pre-approval: '7d22def1-5329-41bd-af35-dfb66a45006d'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588012464953
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:24.995Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"status\": \"available\"}"}	1588012464995
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:24.995Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 0d4f2f64-8e0a-41ab-9b5d-d307cb304e34"}	1588012464996
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:24.999Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '0d4f2f64-8e0a-41ab-9b5d-d307cb304e34' and pre-approval: '0aae87b1-b504-470f-99e7-06a378f17c10'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588012465000
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:25.070Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588012465071
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:25.071Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588012465071
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:25.071Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 0d4f2f64-8e0a-41ab-9b5d-d307cb304e34"}	1588012465072
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:25.073Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '0d4f2f64-8e0a-41ab-9b5d-d307cb304e34' and pre-approval: '9548252e-a654-4524-a156-1bf44fb48881'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588012465073
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:25.239Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588012465239
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:25.239Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588012465240
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:25.240Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 0d4f2f64-8e0a-41ab-9b5d-d307cb304e34"}	1588012465240
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:25.241Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '0d4f2f64-8e0a-41ab-9b5d-d307cb304e34' and pre-approval: 'b8e3d842-7617-4f9d-a954-4337c01a3abc'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588012465242
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:25.283Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588012465284
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:25.284Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588012465284
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:25.284Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 0d4f2f64-8e0a-41ab-9b5d-d307cb304e34"}	1588012465285
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:25.286Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '0d4f2f64-8e0a-41ab-9b5d-d307cb304e34' and pre-approval: '6de0114d-df5f-4b51-aa66-914c40fe88f3'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588012465286
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:25.328Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588012465328
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:25.328Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588012465329
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:25.329Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 0d4f2f64-8e0a-41ab-9b5d-d307cb304e34"}	1588012465329
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:25.330Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '0d4f2f64-8e0a-41ab-9b5d-d307cb304e34' and pre-approval: '8ef18de9-adcc-4b12-a19c-b8883b86f9fe'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588012465331
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:25.371Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588012465371
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:25.371Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588012465372
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:25.372Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 0d4f2f64-8e0a-41ab-9b5d-d307cb304e34"}	1588012465372
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:25.373Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '0d4f2f64-8e0a-41ab-9b5d-d307cb304e34' and pre-approval: 'ebcdba4f-d029-421a-910f-0c3116e0cd0d'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588012465374
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:25.421Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588012465421
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:25.421Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588012465421
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:25.422Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 0d4f2f64-8e0a-41ab-9b5d-d307cb304e34"}	1588012465422
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:25.423Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '0d4f2f64-8e0a-41ab-9b5d-d307cb304e34' and pre-approval: '096f948f-5955-402e-97c7-6df926dd6375'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588012465423
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:25.464Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588012465464
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:25.464Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588012465464
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:25.465Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 0d4f2f64-8e0a-41ab-9b5d-d307cb304e34"}	1588012465465
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:25.470Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '0d4f2f64-8e0a-41ab-9b5d-d307cb304e34' and pre-approval: '49f0c563-d3e4-4bb7-a53d-05a68fa4b396'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588012465470
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:25.509Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588012465510
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:25.510Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588012465510
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:25.510Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 0d4f2f64-8e0a-41ab-9b5d-d307cb304e34"}	1588012465511
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:25.517Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '0d4f2f64-8e0a-41ab-9b5d-d307cb304e34' and pre-approval: '6ebf8fc1-1bda-49d3-bdc0-0d0dd8ccf4e5'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588012465518
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:25.560Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588012465561
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:25.561Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588012465562
EVENTS	1588012468622	{"@timestamp":"2020-04-27T18:34:25.562Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 0d4f2f64-8e0a-41ab-9b5d-d307cb304e34: [{\"id\":\"0a164a39-4423-472a-82fc-b1e13a10cecf\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"0d4f2f64-8e0a-41ab-9b5d-d307cb304e34\",\"proxy_merchant_token\":\"0fc21052-5703-458d-9dd7-ad9346a422fe\",\"status\":\"AVAILABLE\",\"sub_status\":\"available\",\"amount\":\"8400.00\",\"interest\":\"1620.00\",\"tax\":\"259.20\",\"payback\":\"10279.20\",\"retention_rate\":\"22.0000\",\"expiration_date\":\"2020-03-16\",\"term_maximum\":4,\"created_at\":\"2020-02-27T01:22:10Z\"},{\"id\":\"6c8ff748-f8a6-4a46-b0c3-935f2fd542a2\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"0d4f2f64-8e0a-41ab-9b5d-d307cb304e34\",\"proxy_merchant_token\":\"0fc21052-5703-458d-9dd7-ad9346a422fe\",\"status\":\"AVAILABLE\",\"sub_status\":\"available\",\"amount\":\"6100.00\",\"interest\":\"1190.00\",\"tax\":\"190.40\",\"payback\":\"7480.40\",\"retention_rate\":\"16.0000\",\"expiration_date\":\"2020-03-16\",\"term_maximum\":4,\"created_at\":\"2020-02-27T01:22:10Z\"},{\"id\":\"7d22def1-5329-41bd-af35-dfb66a45006d\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"0d4f2f64-8e0a-41ab-9b5d-d307cb304e34\",\"proxy_merchant_token\":\"0fc21052-5703-458d-9dd7-ad9346a422fe\",\"status\":\"AVAILABLE\",\"sub_status\":\"available\",\"amount\":\"3800.00\",\"interest\":\"750.00\",\"tax\":\"120.00\",\"payback\":\"4670.00\",\"retention_rate\":\"10.0000\",\"expiration_date\":\"2020-03-16\",\"term_maximum\":4,\"created_at\":\"2020-02-27T01:22:10Z\"},{\"id\":\"0aae87b1-b504-470f-99e7-06a378f17c10\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"0d4f2f64-8e0a-41ab-9b5d-d307cb304e34\",\"proxy_merchant_token\":\"0fc21052-5703-458d-9dd7-ad9346a422fe\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"5600.00\",\"interest\":\"970.00\",\"tax\":\"155.20\",\"payback\":\"6725.20\",\"retention_rate\":\"14.0000\",\"expiration_date\":\"2020-02-22\",\"term_maximum\":4,\"created_at\":\"2020-02-06T22:28:54Z\"},{\"id\":\"9548252e-a654-4524-a156-1bf44fb48881\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"0d4f2f64-8e0a-41ab-9b5d-d307cb304e34\",\"proxy_merchant_token\":\"0fc21052-5703-458d-9dd7-ad9346a422fe\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"7200.00\",\"interest\":\"1250.00\",\"tax\":\"200.00\",\"payback\":\"8650.00\",\"retention_rate\":\"18.0000\",\"expiration_date\":\"2020-02-22\",\"term_maximum\":4,\"created_at\":\"2020-02-06T22:28:54Z\"},{\"id\":\"b8e3d842-7617-4f9d-a954-4337c01a3abc\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"0d4f2f64-8e0a-41ab-9b5d-d307cb304e34\",\"proxy_merchant_token\":\"0fc21052-5703-458d-9dd7-ad9346a422fe\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"4000.00\",\"interest\":\"690.00\",\"tax\":\"110.40\",\"payback\":\"4800.40\",\"retention_rate\":\"10.0000\",\"expiration_date\":\"2020-02-22\",\"term_maximum\":4,\"created_at\":\"2020-02-06T22:28:54Z\"},{\"id\":\"6de0114d-df5f-4b51-aa66-914c40fe88f3\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"0d4f2f64-8e0a-41ab-9b5d-d307cb304e34\",\"proxy_merchant_token\":\"0fc21052-5703-458d-9dd7-ad9346a422fe\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"7500.00\",\"interest\":\"870.00\",\"tax\":\"139.20\",\"payback\":\"8509.20\",\"retention_rate\":\"18.0000\",\"expiration_date\":\"2020-01-21\",\"term_maximum\":7,\"created_at\":\"2019-12-13T19:24:10Z\"},{\"id\":\"8ef18de9-adcc-4b12-a19c-b8883b86f9fe\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"0d4f2f64-8e0a-41ab-9b5d-d307cb304e34\",\"proxy_merchant_token\":\"0fc21052-5703-458d-9dd7-ad9346a422fe\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"5400.00\",\"interest\":\"640.00\",\"tax\":\"102.40\",\"payback\":\"6142.40\",\"retention_rate\":\"14.0000\",\"expiration_date\":\"2020-01-21\",\"term_maximum\":6,\"created_at\":\"2019-12-13T19:24:10Z\"},{\"id\":\"ebcdba4f-d029-421a-910f-0c3116e0cd0d\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"0d4f2f64-8e0a-41ab-9b5d-d307cb304e34\",\"proxy_merchant_token\":\"0fc21052-5703-458d-9dd7-ad9346a422fe\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"3600.00\",\"interest\":\"380.00\",\"tax\":\"60.80\",\"payback\":\"4040.80\",\"retention_rate\":\"10.0000\",\"expiration_date\":\"2020-01-21\",\"term_maximum\":5,\"created_at\":\"2019-12-13T19:24:10Z\"},{\"id\":\"096f948f-5955-402e-97c7-6df926dd6375\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"0d4f2f64-8e0a-41ab-9b5d-d307cb304e34\",\"proxy_merchant_token\":\"0fc21052-5703-458d-9dd7-ad9346a422fe\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"5300.00\",\"interest\":\"700.00\",\"tax\":\"112.00\",\"payback\":\"6112.00\",\"retention_rate\":\"14.0000\",\"expiration_date\":\"2019-12-13\",\"term_maximum\":5,\"created_at\":\"2019-11-28T23:59:22Z\"},{\"id\":\"49f0c563-d3e4-4bb7-a53d-05a68fa4b396\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"0d4f2f64-8e0a-41ab-9b5d-d307cb304e34\",\"proxy_merchant_token\":\"0fc21052-5703-458d-9dd7-ad9346a422fe\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"3800.00\",\"interest\":\"490.00\",\"tax\":\"78.40\",\"payback\":\"4368.40\",\"retention_rate\":\"10.0000\",\"expiration_date\":\"2019-12-13\",\"term_maximum\":5,\"created_at\":\"2019-11-28T23:59:22Z\"},{\"id\":\"6ebf8fc1-1bda-49d3-bdc0-0d0dd8ccf4e5\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"0d4f2f64-8e0a-41ab-9b5d-d307cb304e34\",\"proxy_merchant_token\":\"0fc21052-5703-458d-9dd7-ad9346a422fe\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"6800.00\",\"interest\":\"910.00\",\"tax\":\"145.60\",\"payback\":\"7855.60\",\"retention_rate\":\"18.0000\",\"expiration_date\":\"2019-12-13\",\"term_maximum\":5,\"created_at\":\"2019-11-28T23:59:22Z\"}]"}	1588012465565
EVENTS	1588012473610	{"@timestamp":"2020-04-27T18:34:32.621Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 3ca7de6a-32c6-4d63-92b3-ea9182124e24 "}	1588012472621
EVENTS	1588012473610	{"@timestamp":"2020-04-27T18:34:32.622Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 3ca7de6a-32c6-4d63-92b3-ea9182124e24"}	1588012472622
EVENTS	1588012473610	{"@timestamp":"2020-04-27T18:34:32.623Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 3ca7de6a-32c6-4d63-92b3-ea9182124e24: []"}	1588012472623
EVENTS	1588012493620	{"@timestamp":"2020-04-27T18:34:48.820Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 5d7232c3-8d68-44e9-8939-4d37ad27689a "}	1588012488821
EVENTS	1588012493620	{"@timestamp":"2020-04-27T18:34:48.821Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 5d7232c3-8d68-44e9-8939-4d37ad27689a"}	1588012488821
EVENTS	1588012493620	{"@timestamp":"2020-04-27T18:34:48.824Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 5d7232c3-8d68-44e9-8939-4d37ad27689a: []"}	1588012488825
EVENTS	1588012708623	{"@timestamp":"2020-04-27T18:38:26.635Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 6bb4b211-db58-4f64-9c7f-e3cf8e5a30e6 "}	1588012706635
EVENTS	1588012708623	{"@timestamp":"2020-04-27T18:38:26.635Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 6bb4b211-db58-4f64-9c7f-e3cf8e5a30e6"}	1588012706635
EVENTS	1588012708623	{"@timestamp":"2020-04-27T18:38:26.637Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 6bb4b211-db58-4f64-9c7f-e3cf8e5a30e6"}	1588012706637
EVENTS	1588012708623	{"@timestamp":"2020-04-27T18:38:26.638Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '6bb4b211-db58-4f64-9c7f-e3cf8e5a30e6' and pre-approval: '207a7f46-e867-47d1-ab7f-0eb39eb18142'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588012706638
EVENTS	1588012708623	{"@timestamp":"2020-04-27T18:38:26.781Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588012706781
EVENTS	1588012708623	{"@timestamp":"2020-04-27T18:38:26.781Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588012706782
EVENTS	1588012708623	{"@timestamp":"2020-04-27T18:38:26.782Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 6bb4b211-db58-4f64-9c7f-e3cf8e5a30e6"}	1588012706782
EVENTS	1588012708623	{"@timestamp":"2020-04-27T18:38:26.783Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '6bb4b211-db58-4f64-9c7f-e3cf8e5a30e6' and pre-approval: '7e56b11a-090e-4399-8343-f23f42ef5108'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588012706784
EVENTS	1588012708623	{"@timestamp":"2020-04-27T18:38:26.826Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588012706827
EVENTS	1588012708623	{"@timestamp":"2020-04-27T18:38:26.827Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588012706827
EVENTS	1588012708623	{"@timestamp":"2020-04-27T18:38:26.827Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 6bb4b211-db58-4f64-9c7f-e3cf8e5a30e6"}	1588012706827
EVENTS	1588012708623	{"@timestamp":"2020-04-27T18:38:26.830Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '6bb4b211-db58-4f64-9c7f-e3cf8e5a30e6' and pre-approval: 'f694f4c2-aee1-4d6b-a7d2-873dc85bcf85'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588012706830
EVENTS	1588012708623	{"@timestamp":"2020-04-27T18:38:26.871Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588012706871
EVENTS	1588012708623	{"@timestamp":"2020-04-27T18:38:26.872Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588012706872
EVENTS	1588012708623	{"@timestamp":"2020-04-27T18:38:26.872Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 6bb4b211-db58-4f64-9c7f-e3cf8e5a30e6: [{\"id\":\"207a7f46-e867-47d1-ab7f-0eb39eb18142\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"6bb4b211-db58-4f64-9c7f-e3cf8e5a30e6\",\"proxy_merchant_token\":\"e9807d44-2c30-46f3-ba0e-098a47b17ccf\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"28000.00\",\"interest\":\"2790.00\",\"tax\":\"446.40\",\"payback\":\"31236.40\",\"retention_rate\":\"12.0000\",\"expiration_date\":\"2019-08-21\",\"term_maximum\":6,\"created_at\":\"2019-08-02T00:34:30Z\"},{\"id\":\"7e56b11a-090e-4399-8343-f23f42ef5108\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"6bb4b211-db58-4f64-9c7f-e3cf8e5a30e6\",\"proxy_merchant_token\":\"e9807d44-2c30-46f3-ba0e-098a47b17ccf\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"18700.00\",\"interest\":\"1830.00\",\"tax\":\"292.80\",\"payback\":\"20822.80\",\"retention_rate\":\"8.0000\",\"expiration_date\":\"2019-08-21\",\"term_maximum\":6,\"created_at\":\"2019-08-02T00:34:30Z\"},{\"id\":\"f694f4c2-aee1-4d6b-a7d2-873dc85bcf85\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"6bb4b211-db58-4f64-9c7f-e3cf8e5a30e6\",\"proxy_merchant_token\":\"e9807d44-2c30-46f3-ba0e-098a47b17ccf\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"23400.00\",\"interest\":\"2260.00\",\"tax\":\"361.60\",\"payback\":\"26021.60\",\"retention_rate\":\"10.0000\",\"expiration_date\":\"2019-08-21\",\"term_maximum\":6,\"created_at\":\"2019-08-02T00:34:30Z\"}]"}	1588012706873
EVENTS	1588012718616	{"@timestamp":"2020-04-27T18:38:37.415Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 2a9b9332-bf44-478f-a784-7472fe05e8a4 "}	1588012717415
EVENTS	1588012718616	{"@timestamp":"2020-04-27T18:38:37.415Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 2a9b9332-bf44-478f-a784-7472fe05e8a4"}	1588012717416
EVENTS	1588012718616	{"@timestamp":"2020-04-27T18:38:37.416Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 2a9b9332-bf44-478f-a784-7472fe05e8a4: []"}	1588012717416
EVENTS	1588012733619	{"@timestamp":"2020-04-27T18:38:49.252Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token cc0a6d40-f23c-4543-addc-a8bb05e146a8 "}	1588012729252
EVENTS	1588012733619	{"@timestamp":"2020-04-27T18:38:49.252Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token cc0a6d40-f23c-4543-addc-a8bb05e146a8"}	1588012729252
EVENTS	1588012733619	{"@timestamp":"2020-04-27T18:38:49.254Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token cc0a6d40-f23c-4543-addc-a8bb05e146a8: []"}	1588012729254
EVENTS	1588012738610	{"@timestamp":"2020-04-27T18:38:54.978Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 13ae94f4-2771-4d9a-95ac-2e8b5a761c98 "}	1588012734978
EVENTS	1588012738610	{"@timestamp":"2020-04-27T18:38:54.979Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 13ae94f4-2771-4d9a-95ac-2e8b5a761c98"}	1588012734979
EVENTS	1588012738610	{"@timestamp":"2020-04-27T18:38:54.980Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 13ae94f4-2771-4d9a-95ac-2e8b5a761c98: []"}	1588012734980
EVENTS	1588013013623	{"@timestamp":"2020-04-27T18:43:30.340Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 9ff8827a-03ad-4b24-9762-d4e1f3c2eab0 "}	1588013010341
EVENTS	1588013013623	{"@timestamp":"2020-04-27T18:43:30.341Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 9ff8827a-03ad-4b24-9762-d4e1f3c2eab0"}	1588013010341
EVENTS	1588013013623	{"@timestamp":"2020-04-27T18:43:30.342Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 9ff8827a-03ad-4b24-9762-d4e1f3c2eab0: []"}	1588013010342
EVENTS	1588013023621	{"@timestamp":"2020-04-27T18:43:40.934Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 92850ae8-a1ac-428b-b006-8e41ad7064ba "}	1588013020935
EVENTS	1588013023621	{"@timestamp":"2020-04-27T18:43:40.935Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 92850ae8-a1ac-428b-b006-8e41ad7064ba"}	1588013020935
EVENTS	1588013023621	{"@timestamp":"2020-04-27T18:43:40.937Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 92850ae8-a1ac-428b-b006-8e41ad7064ba"}	1588013020937
EVENTS	1588013023621	{"@timestamp":"2020-04-27T18:43:40.938Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '92850ae8-a1ac-428b-b006-8e41ad7064ba' and pre-approval: '74035d04-7a41-4805-be42-559ae7fe6560'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588013020938
EVENTS	1588013023621	{"@timestamp":"2020-04-27T18:43:41.016Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"status\": \"available\"}"}	1588013021016
EVENTS	1588013023621	{"@timestamp":"2020-04-27T18:43:41.016Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 92850ae8-a1ac-428b-b006-8e41ad7064ba"}	1588013021017
EVENTS	1588013023621	{"@timestamp":"2020-04-27T18:43:41.018Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '92850ae8-a1ac-428b-b006-8e41ad7064ba' and pre-approval: 'b461f74a-86b1-48d8-9b76-bb2977ed9915'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588013021018
EVENTS	1588013023621	{"@timestamp":"2020-04-27T18:43:41.067Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"status\": \"available\"}"}	1588013021067
EVENTS	1588013023621	{"@timestamp":"2020-04-27T18:43:41.067Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 92850ae8-a1ac-428b-b006-8e41ad7064ba"}	1588013021067
EVENTS	1588013023621	{"@timestamp":"2020-04-27T18:43:41.068Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '92850ae8-a1ac-428b-b006-8e41ad7064ba' and pre-approval: 'bd143012-afca-4350-802e-72403230b6f4'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588013021069
EVENTS	1588013023621	{"@timestamp":"2020-04-27T18:43:41.109Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"status\": \"available\"}"}	1588013021109
EVENTS	1588013023621	{"@timestamp":"2020-04-27T18:43:41.109Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 92850ae8-a1ac-428b-b006-8e41ad7064ba: [{\"id\":\"74035d04-7a41-4805-be42-559ae7fe6560\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"92850ae8-a1ac-428b-b006-8e41ad7064ba\",\"proxy_merchant_token\":\"29737c3a-46ff-49a3-9f2f-7457b1018a56\",\"status\":\"EXPIRED\",\"sub_status\":\"available\",\"amount\":\"48500.00\",\"interest\":\"7360.00\",\"tax\":\"1177.60\",\"payback\":\"57037.60\",\"retention_rate\":\"14.0000\",\"expiration_date\":\"2020-02-22\",\"term_maximum\":4,\"created_at\":\"2020-02-07T04:08:58Z\"},{\"id\":\"b461f74a-86b1-48d8-9b76-bb2977ed9915\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"92850ae8-a1ac-428b-b006-8e41ad7064ba\",\"proxy_merchant_token\":\"29737c3a-46ff-49a3-9f2f-7457b1018a56\",\"status\":\"EXPIRED\",\"sub_status\":\"available\",\"amount\":\"62400.00\",\"interest\":\"9420.00\",\"tax\":\"1507.20\",\"payback\":\"73327.20\",\"retention_rate\":\"18.0000\",\"expiration_date\":\"2020-02-22\",\"term_maximum\":4,\"created_at\":\"2020-02-07T04:08:58Z\"},{\"id\":\"bd143012-afca-4350-802e-72403230b6f4\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"92850ae8-a1ac-428b-b006-8e41ad7064ba\",\"proxy_merchant_token\":\"29737c3a-46ff-49a3-9f2f-7457b1018a56\",\"status\":\"EXPIRED\",\"sub_status\":\"available\",\"amount\":\"34700.00\",\"interest\":\"5200.00\",\"tax\":\"832.00\",\"payback\":\"40732.00\",\"retention_rate\":\"10.0000\",\"expiration_date\":\"2020-02-22\",\"term_maximum\":4,\"created_at\":\"2020-02-07T04:08:58Z\"}]"}	1588013021110
EVENTS	1588013148618	{"@timestamp":"2020-04-27T18:45:45.884Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token ddfb5ef3-83b1-41e1-92f1-34165ce6f9e5 "}	1588013145885
EVENTS	1588013148618	{"@timestamp":"2020-04-27T18:45:45.885Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token ddfb5ef3-83b1-41e1-92f1-34165ce6f9e5"}	1588013145885
EVENTS	1588013148618	{"@timestamp":"2020-04-27T18:45:45.886Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token ddfb5ef3-83b1-41e1-92f1-34165ce6f9e5: []"}	1588013145887
EVENTS	1588013158616	{"@timestamp":"2020-04-27T18:45:56.756Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token b516c8bb-f2c2-4a87-9272-b051e9cd412e "}	1588013156756
EVENTS	1588013158616	{"@timestamp":"2020-04-27T18:45:56.758Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token b516c8bb-f2c2-4a87-9272-b051e9cd412e"}	1588013156759
EVENTS	1588013158616	{"@timestamp":"2020-04-27T18:45:56.762Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token b516c8bb-f2c2-4a87-9272-b051e9cd412e: []"}	1588013156763
EVENTS	1588013348620	{"@timestamp":"2020-04-27T18:49:06.823Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token d677b3f7-5759-4ede-a568-4b379d24c6ec "}	1588013346824
EVENTS	1588013348620	{"@timestamp":"2020-04-27T18:49:06.824Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token d677b3f7-5759-4ede-a568-4b379d24c6ec"}	1588013346824
EVENTS	1588013348620	{"@timestamp":"2020-04-27T18:49:06.826Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token d677b3f7-5759-4ede-a568-4b379d24c6ec"}	1588013346827
EVENTS	1588013348620	{"@timestamp":"2020-04-27T18:49:06.828Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'd677b3f7-5759-4ede-a568-4b379d24c6ec' and pre-approval: '20ffe645-e6c7-4da2-9d6e-4de985c15843'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588013346828
EVENTS	1588013348620	{"@timestamp":"2020-04-27T18:49:06.916Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"status\": \"available\"}"}	1588013346917
EVENTS	1588013348620	{"@timestamp":"2020-04-27T18:49:06.917Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token d677b3f7-5759-4ede-a568-4b379d24c6ec"}	1588013346918
EVENTS	1588013348620	{"@timestamp":"2020-04-27T18:49:06.920Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'd677b3f7-5759-4ede-a568-4b379d24c6ec' and pre-approval: '54078a12-31bc-4df6-883b-a4581bcf189a'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588013346920
EVENTS	1588013348620	{"@timestamp":"2020-04-27T18:49:06.964Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"status\": \"available\"}"}	1588013346966
EVENTS	1588013348620	{"@timestamp":"2020-04-27T18:49:06.967Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token d677b3f7-5759-4ede-a568-4b379d24c6ec"}	1588013346967
EVENTS	1588013348620	{"@timestamp":"2020-04-27T18:49:06.968Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'd677b3f7-5759-4ede-a568-4b379d24c6ec' and pre-approval: 'aa3e2709-5ad3-4c5d-8ec4-5ff77ca45497'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588013346969
EVENTS	1588013348620	{"@timestamp":"2020-04-27T18:49:07.036Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"status\": \"available\"}"}	1588013347037
EVENTS	1588013348620	{"@timestamp":"2020-04-27T18:49:07.037Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token d677b3f7-5759-4ede-a568-4b379d24c6ec"}	1588013347037
EVENTS	1588013348620	{"@timestamp":"2020-04-27T18:49:07.038Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'd677b3f7-5759-4ede-a568-4b379d24c6ec' and pre-approval: '67647fd9-ca01-4658-8b66-665fdedb1354'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588013347039
EVENTS	1588013348620	{"@timestamp":"2020-04-27T18:49:07.084Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588013347085
EVENTS	1588013348620	{"@timestamp":"2020-04-27T18:49:07.085Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588013347085
EVENTS	1588013348620	{"@timestamp":"2020-04-27T18:49:07.085Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token d677b3f7-5759-4ede-a568-4b379d24c6ec"}	1588013347086
EVENTS	1588013348620	{"@timestamp":"2020-04-27T18:49:07.087Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'd677b3f7-5759-4ede-a568-4b379d24c6ec' and pre-approval: 'd94a12a7-06ab-4a5e-9503-253330e20629'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588013347087
EVENTS	1588013348620	{"@timestamp":"2020-04-27T18:49:07.188Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588013347189
EVENTS	1588013348620	{"@timestamp":"2020-04-27T18:49:07.189Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588013347189
EVENTS	1588013348620	{"@timestamp":"2020-04-27T18:49:07.189Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token d677b3f7-5759-4ede-a568-4b379d24c6ec"}	1588013347189
EVENTS	1588013348620	{"@timestamp":"2020-04-27T18:49:07.191Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'd677b3f7-5759-4ede-a568-4b379d24c6ec' and pre-approval: 'db1df3b1-52f1-4d6c-a90d-f0ba7370b9a0'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588013347191
EVENTS	1588013348620	{"@timestamp":"2020-04-27T18:49:07.232Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588013347233
EVENTS	1588013348620	{"@timestamp":"2020-04-27T18:49:07.233Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588013347234
EVENTS	1588013348620	{"@timestamp":"2020-04-27T18:49:07.234Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token d677b3f7-5759-4ede-a568-4b379d24c6ec"}	1588013347234
EVENTS	1588013348620	{"@timestamp":"2020-04-27T18:49:07.236Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'd677b3f7-5759-4ede-a568-4b379d24c6ec' and pre-approval: '57230296-98fb-4b11-8120-d91359fd2ee8'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588013347236
EVENTS	1588013348620	{"@timestamp":"2020-04-27T18:49:07.278Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588013347279
EVENTS	1588013348620	{"@timestamp":"2020-04-27T18:49:07.279Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588013347279
EVENTS	1588013348620	{"@timestamp":"2020-04-27T18:49:07.279Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token d677b3f7-5759-4ede-a568-4b379d24c6ec"}	1588013347280
EVENTS	1588013348620	{"@timestamp":"2020-04-27T18:49:07.281Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'd677b3f7-5759-4ede-a568-4b379d24c6ec' and pre-approval: 'c4903e9b-8408-4cdf-b79c-3790fb39325e'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588013347281
EVENTS	1588013348620	{"@timestamp":"2020-04-27T18:49:07.338Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588013347339
EVENTS	1588013348620	{"@timestamp":"2020-04-27T18:49:07.339Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588013347340
EVENTS	1588013348620	{"@timestamp":"2020-04-27T18:49:07.340Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token d677b3f7-5759-4ede-a568-4b379d24c6ec"}	1588013347340
EVENTS	1588013348620	{"@timestamp":"2020-04-27T18:49:07.341Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'd677b3f7-5759-4ede-a568-4b379d24c6ec' and pre-approval: 'e4cb82e1-1695-4f0a-bf91-ad569db053d5'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588013347342
EVENTS	1588013348620	{"@timestamp":"2020-04-27T18:49:07.382Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588013347382
EVENTS	1588013348620	{"@timestamp":"2020-04-27T18:49:07.382Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588013347383
EVENTS	1588013348620	{"@timestamp":"2020-04-27T18:49:07.383Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token d677b3f7-5759-4ede-a568-4b379d24c6ec: [{\"id\":\"20ffe645-e6c7-4da2-9d6e-4de985c15843\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"d677b3f7-5759-4ede-a568-4b379d24c6ec\",\"proxy_merchant_token\":\"a5308873-61fd-4c57-b22d-2beb640d49b3\",\"status\":\"AVAILABLE\",\"sub_status\":\"available\",\"amount\":\"3900.00\",\"interest\":\"780.00\",\"tax\":\"124.80\",\"payback\":\"4804.80\",\"retention_rate\":\"22.0000\",\"expiration_date\":\"2020-03-16\",\"term_maximum\":4,\"created_at\":\"2020-02-27T11:24:31Z\"},{\"id\":\"54078a12-31bc-4df6-883b-a4581bcf189a\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"d677b3f7-5759-4ede-a568-4b379d24c6ec\",\"proxy_merchant_token\":\"a5308873-61fd-4c57-b22d-2beb640d49b3\",\"status\":\"AVAILABLE\",\"sub_status\":\"available\",\"amount\":\"2800.00\",\"interest\":\"600.00\",\"tax\":\"96.00\",\"payback\":\"3496.00\",\"retention_rate\":\"16.0000\",\"expiration_date\":\"2020-03-16\",\"term_maximum\":4,\"created_at\":\"2020-02-27T11:24:31Z\"},{\"id\":\"aa3e2709-5ad3-4c5d-8ec4-5ff77ca45497\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"d677b3f7-5759-4ede-a568-4b379d24c6ec\",\"proxy_merchant_token\":\"a5308873-61fd-4c57-b22d-2beb640d49b3\",\"status\":\"AVAILABLE\",\"sub_status\":\"available\",\"amount\":\"1700.00\",\"interest\":\"430.00\",\"tax\":\"68.80\",\"payback\":\"2198.80\",\"retention_rate\":\"10.0000\",\"expiration_date\":\"2020-03-16\",\"term_maximum\":4,\"created_at\":\"2020-02-27T11:24:31Z\"},{\"id\":\"67647fd9-ca01-4658-8b66-665fdedb1354\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"d677b3f7-5759-4ede-a568-4b379d24c6ec\",\"proxy_merchant_token\":\"a5308873-61fd-4c57-b22d-2beb640d49b3\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"3500.00\",\"interest\":\"660.00\",\"tax\":\"105.60\",\"payback\":\"4265.60\",\"retention_rate\":\"18.0000\",\"expiration_date\":\"2020-02-22\",\"term_maximum\":4,\"created_at\":\"2020-02-07T06:57:33Z\"},{\"id\":\"d94a12a7-06ab-4a5e-9503-253330e20629\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"d677b3f7-5759-4ede-a568-4b379d24c6ec\",\"proxy_merchant_token\":\"a5308873-61fd-4c57-b22d-2beb640d49b3\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"1900.00\",\"interest\":\"410.00\",\"tax\":\"65.60\",\"payback\":\"2375.60\",\"retention_rate\":\"10.0000\",\"expiration_date\":\"2020-02-22\",\"term_maximum\":4,\"created_at\":\"2020-02-07T06:57:33Z\"},{\"id\":\"db1df3b1-52f1-4d6c-a90d-f0ba7370b9a0\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"d677b3f7-5759-4ede-a568-4b379d24c6ec\",\"proxy_merchant_token\":\"a5308873-61fd-4c57-b22d-2beb640d49b3\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"2700.00\",\"interest\":\"530.00\",\"tax\":\"84.80\",\"payback\":\"3314.80\",\"retention_rate\":\"14.0000\",\"expiration_date\":\"2020-02-22\",\"term_maximum\":4,\"created_at\":\"2020-02-07T06:57:33Z\"},{\"id\":\"57230296-98fb-4b11-8120-d91359fd2ee8\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"d677b3f7-5759-4ede-a568-4b379d24c6ec\",\"proxy_merchant_token\":\"a5308873-61fd-4c57-b22d-2beb640d49b3\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"1700.00\",\"interest\":\"200.00\",\"tax\":\"32.00\",\"payback\":\"1932.00\",\"retention_rate\":\"10.0000\",\"expiration_date\":\"2020-01-21\",\"term_maximum\":5,\"created_at\":\"2019-12-13T21:50:49Z\"},{\"id\":\"c4903e9b-8408-4cdf-b79c-3790fb39325e\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"d677b3f7-5759-4ede-a568-4b379d24c6ec\",\"proxy_merchant_token\":\"a5308873-61fd-4c57-b22d-2beb640d49b3\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"2500.00\",\"interest\":\"380.00\",\"tax\":\"60.80\",\"payback\":\"2940.80\",\"retention_rate\":\"14.0000\",\"expiration_date\":\"2020-01-21\",\"term_maximum\":6,\"created_at\":\"2019-12-13T21:50:49Z\"},{\"id\":\"e4cb82e1-1695-4f0a-bf91-ad569db053d5\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"d677b3f7-5759-4ede-a568-4b379d24c6ec\",\"proxy_merchant_token\":\"a5308873-61fd-4c57-b22d-2beb640d49b3\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"3400.00\",\"interest\":\"590.00\",\"tax\":\"94.40\",\"payback\":\"4084.40\",\"retention_rate\":\"18.0000\",\"expiration_date\":\"2020-01-21\",\"term_maximum\":7,\"created_at\":\"2019-12-13T21:50:49Z\"}]"}	1588013347385
EVENTS	1588013513622	{"@timestamp":"2020-04-27T18:51:50.355Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 999a32fc-964c-4ba5-bbe0-30af05d619bd "}	1588013510355
EVENTS	1588013513622	{"@timestamp":"2020-04-27T18:51:50.356Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 999a32fc-964c-4ba5-bbe0-30af05d619bd"}	1588013510356
EVENTS	1588013513622	{"@timestamp":"2020-04-27T18:51:50.361Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 999a32fc-964c-4ba5-bbe0-30af05d619bd: []"}	1588013510361
EVENTS	1588013543619	{"@timestamp":"2020-04-27T18:52:21.860Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token c3a0a335-9f8b-4ddb-9b3b-4389d2eefe61 "}	1588013541861
EVENTS	1588013543619	{"@timestamp":"2020-04-27T18:52:21.861Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token c3a0a335-9f8b-4ddb-9b3b-4389d2eefe61"}	1588013541861
EVENTS	1588013543619	{"@timestamp":"2020-04-27T18:52:21.865Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token c3a0a335-9f8b-4ddb-9b3b-4389d2eefe61"}	1588013541865
EVENTS	1588013543619	{"@timestamp":"2020-04-27T18:52:21.866Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'c3a0a335-9f8b-4ddb-9b3b-4389d2eefe61' and pre-approval: '0951941f-729d-4b0d-b441-f09b90ca43f0'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588013541867
EVENTS	1588013543619	{"@timestamp":"2020-04-27T18:52:21.939Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"status\": \"available\"}"}	1588013541940
EVENTS	1588013543619	{"@timestamp":"2020-04-27T18:52:21.940Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token c3a0a335-9f8b-4ddb-9b3b-4389d2eefe61"}	1588013541940
EVENTS	1588013543619	{"@timestamp":"2020-04-27T18:52:21.941Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'c3a0a335-9f8b-4ddb-9b3b-4389d2eefe61' and pre-approval: '60e2398c-f357-4d4f-93e1-7dffb976e7d4'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588013541942
EVENTS	1588013543619	{"@timestamp":"2020-04-27T18:52:21.985Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"status\": \"available\"}"}	1588013541985
EVENTS	1588013543619	{"@timestamp":"2020-04-27T18:52:21.985Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token c3a0a335-9f8b-4ddb-9b3b-4389d2eefe61"}	1588013541986
EVENTS	1588013543619	{"@timestamp":"2020-04-27T18:52:21.988Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'c3a0a335-9f8b-4ddb-9b3b-4389d2eefe61' and pre-approval: '8fddc692-5b65-4118-91f5-3345c6d86f8d'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588013541988
EVENTS	1588013543619	{"@timestamp":"2020-04-27T18:52:22.036Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"status\": \"available\"}"}	1588013542036
EVENTS	1588013543619	{"@timestamp":"2020-04-27T18:52:22.036Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token c3a0a335-9f8b-4ddb-9b3b-4389d2eefe61"}	1588013542036
EVENTS	1588013543619	{"@timestamp":"2020-04-27T18:52:22.038Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'c3a0a335-9f8b-4ddb-9b3b-4389d2eefe61' and pre-approval: '77e62b90-2d77-4921-a6e8-7357fa6f2316'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588013542038
EVENTS	1588013543619	{"@timestamp":"2020-04-27T18:52:22.102Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588013542103
EVENTS	1588013543619	{"@timestamp":"2020-04-27T18:52:22.103Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588013542103
EVENTS	1588013543619	{"@timestamp":"2020-04-27T18:52:22.103Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token c3a0a335-9f8b-4ddb-9b3b-4389d2eefe61"}	1588013542103
EVENTS	1588013543619	{"@timestamp":"2020-04-27T18:52:22.105Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'c3a0a335-9f8b-4ddb-9b3b-4389d2eefe61' and pre-approval: 'c0288be9-8833-4bb1-9f38-7c04605bdfcc'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588013542105
EVENTS	1588013543619	{"@timestamp":"2020-04-27T18:52:22.148Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588013542148
EVENTS	1588013543619	{"@timestamp":"2020-04-27T18:52:22.149Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588013542149
EVENTS	1588013543619	{"@timestamp":"2020-04-27T18:52:22.149Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token c3a0a335-9f8b-4ddb-9b3b-4389d2eefe61"}	1588013542149
EVENTS	1588013543619	{"@timestamp":"2020-04-27T18:52:22.150Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'c3a0a335-9f8b-4ddb-9b3b-4389d2eefe61' and pre-approval: 'cbd142c0-8483-4f7f-a8ce-39793dffec44'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588013542151
EVENTS	1588013543619	{"@timestamp":"2020-04-27T18:52:22.209Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588013542209
EVENTS	1588013543619	{"@timestamp":"2020-04-27T18:52:22.209Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588013542209
EVENTS	1588013543619	{"@timestamp":"2020-04-27T18:52:22.210Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token c3a0a335-9f8b-4ddb-9b3b-4389d2eefe61: [{\"id\":\"0951941f-729d-4b0d-b441-f09b90ca43f0\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"c3a0a335-9f8b-4ddb-9b3b-4389d2eefe61\",\"proxy_merchant_token\":\"e49387ad-680f-4bab-980b-2d591e1fe216\",\"status\":\"AVAILABLE\",\"sub_status\":\"available\",\"amount\":\"2500.00\",\"interest\":\"450.00\",\"tax\":\"72.00\",\"payback\":\"3022.00\",\"retention_rate\":\"10.0000\",\"expiration_date\":\"2020-03-16\",\"term_maximum\":4,\"created_at\":\"2020-02-27T10:29:41Z\"},{\"id\":\"60e2398c-f357-4d4f-93e1-7dffb976e7d4\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"c3a0a335-9f8b-4ddb-9b3b-4389d2eefe61\",\"proxy_merchant_token\":\"e49387ad-680f-4bab-980b-2d591e1fe216\",\"status\":\"AVAILABLE\",\"sub_status\":\"available\",\"amount\":\"5500.00\",\"interest\":\"1000.00\",\"tax\":\"160.00\",\"payback\":\"6660.00\",\"retention_rate\":\"22.0000\",\"expiration_date\":\"2020-03-16\",\"term_maximum\":4,\"created_at\":\"2020-02-27T10:29:41Z\"},{\"id\":\"8fddc692-5b65-4118-91f5-3345c6d86f8d\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"c3a0a335-9f8b-4ddb-9b3b-4389d2eefe61\",\"proxy_merchant_token\":\"e49387ad-680f-4bab-980b-2d591e1fe216\",\"status\":\"AVAILABLE\",\"sub_status\":\"available\",\"amount\":\"4000.00\",\"interest\":\"730.00\",\"tax\":\"116.80\",\"payback\":\"4846.80\",\"retention_rate\":\"16.0000\",\"expiration_date\":\"2020-03-16\",\"term_maximum\":4,\"created_at\":\"2020-02-27T10:29:41Z\"},{\"id\":\"77e62b90-2d77-4921-a6e8-7357fa6f2316\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"c3a0a335-9f8b-4ddb-9b3b-4389d2eefe61\",\"proxy_merchant_token\":\"e49387ad-680f-4bab-980b-2d591e1fe216\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"5100.00\",\"interest\":\"930.00\",\"tax\":\"148.80\",\"payback\":\"6178.80\",\"retention_rate\":\"18.0000\",\"expiration_date\":\"2020-02-22\",\"term_maximum\":4,\"created_at\":\"2020-02-07T06:13:47Z\"},{\"id\":\"c0288be9-8833-4bb1-9f38-7c04605bdfcc\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"c3a0a335-9f8b-4ddb-9b3b-4389d2eefe61\",\"proxy_merchant_token\":\"e49387ad-680f-4bab-980b-2d591e1fe216\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"4000.00\",\"interest\":\"690.00\",\"tax\":\"110.40\",\"payback\":\"4800.40\",\"retention_rate\":\"14.0000\",\"expiration_date\":\"2020-02-22\",\"term_maximum\":4,\"created_at\":\"2020-02-07T06:13:47Z\"},{\"id\":\"cbd142c0-8483-4f7f-a8ce-39793dffec44\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"c3a0a335-9f8b-4ddb-9b3b-4389d2eefe61\",\"proxy_merchant_token\":\"e49387ad-680f-4bab-980b-2d591e1fe216\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"2800.00\",\"interest\":\"550.00\",\"tax\":\"88.00\",\"payback\":\"3438.00\",\"retention_rate\":\"10.0000\",\"expiration_date\":\"2020-02-22\",\"term_maximum\":4,\"created_at\":\"2020-02-07T06:13:47Z\"}]"}	1588013542211
EVENTS	1588013548609	{"@timestamp":"2020-04-27T18:52:27.662Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token b681c58d-e428-47a8-80f1-1dc6e9152fe8 "}	1588013547663
EVENTS	1588013548609	{"@timestamp":"2020-04-27T18:52:27.663Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token b681c58d-e428-47a8-80f1-1dc6e9152fe8"}	1588013547663
EVENTS	1588013548609	{"@timestamp":"2020-04-27T18:52:27.667Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token b681c58d-e428-47a8-80f1-1dc6e9152fe8: []"}	1588013547667
EVENTS	1588013783618	{"@timestamp":"2020-04-27T18:56:23.542Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 920a905a-e6ec-4f28-9e8b-94b07eac2703 "}	1588013783543
EVENTS	1588013783618	{"@timestamp":"2020-04-27T18:56:23.543Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 920a905a-e6ec-4f28-9e8b-94b07eac2703"}	1588013783543
EVENTS	1588013783618	{"@timestamp":"2020-04-27T18:56:23.545Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 920a905a-e6ec-4f28-9e8b-94b07eac2703: []"}	1588013783545
EVENTS	1588013828620	{"@timestamp":"2020-04-27T18:57:06.860Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 1a57d493-9112-432f-a125-36f64d3f3fa2 "}	1588013826860
EVENTS	1588013828620	{"@timestamp":"2020-04-27T18:57:06.861Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 1a57d493-9112-432f-a125-36f64d3f3fa2"}	1588013826861
EVENTS	1588013828620	{"@timestamp":"2020-04-27T18:57:06.863Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 1a57d493-9112-432f-a125-36f64d3f3fa2: []"}	1588013826863
EVENTS	1588013898615	{"@timestamp":"2020-04-27T18:58:18.000Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token cbcb775d-4fa4-4fc6-9bb8-ce986eeafa1a "}	1588013898001
EVENTS	1588013898615	{"@timestamp":"2020-04-27T18:58:18.001Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token cbcb775d-4fa4-4fc6-9bb8-ce986eeafa1a"}	1588013898001
EVENTS	1588013898615	{"@timestamp":"2020-04-27T18:58:18.004Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token cbcb775d-4fa4-4fc6-9bb8-ce986eeafa1a: []"}	1588013898004
EVENTS	1588013913616	{"@timestamp":"2020-04-27T18:58:30.690Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token c55cac90-b8e2-4334-822d-a3b33d1561c2 "}	1588013910690
EVENTS	1588013913616	{"@timestamp":"2020-04-27T18:58:30.690Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token c55cac90-b8e2-4334-822d-a3b33d1561c2"}	1588013910691
EVENTS	1588013913616	{"@timestamp":"2020-04-27T18:58:30.692Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token c55cac90-b8e2-4334-822d-a3b33d1561c2"}	1588013910692
EVENTS	1588013913616	{"@timestamp":"2020-04-27T18:58:30.693Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'c55cac90-b8e2-4334-822d-a3b33d1561c2' and pre-approval: '137d7af6-c4a7-4c3a-9571-6aba1ba9a7bd'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588013910694
EVENTS	1588013913616	{"@timestamp":"2020-04-27T18:58:30.786Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"invalid_user\",\"error_description\":\"404 Parameter Not Found: Merchant_ID\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588013910787
EVENTS	1588013913616	{"@timestamp":"2020-04-27T18:58:30.787Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"invalid_user\",\"error_description\":\"404 Parameter Not Found: Merchant_ID\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588013910787
EVENTS	1588013913616	{"@timestamp":"2020-04-27T18:58:30.787Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token c55cac90-b8e2-4334-822d-a3b33d1561c2"}	1588013910788
EVENTS	1588013913616	{"@timestamp":"2020-04-27T18:58:30.789Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'c55cac90-b8e2-4334-822d-a3b33d1561c2' and pre-approval: 'cec6ddba-cabc-41b0-a484-8b3c23198484'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588013910790
EVENTS	1588013913616	{"@timestamp":"2020-04-27T18:58:30.861Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"invalid_user\",\"error_description\":\"404 Parameter Not Found: Merchant_ID\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588013910861
EVENTS	1588013913616	{"@timestamp":"2020-04-27T18:58:30.861Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"invalid_user\",\"error_description\":\"404 Parameter Not Found: Merchant_ID\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588013910862
EVENTS	1588013913616	{"@timestamp":"2020-04-27T18:58:30.862Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token c55cac90-b8e2-4334-822d-a3b33d1561c2"}	1588013910862
EVENTS	1588013913616	{"@timestamp":"2020-04-27T18:58:30.863Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'c55cac90-b8e2-4334-822d-a3b33d1561c2' and pre-approval: 'd3cbc672-0f7c-41bc-aede-04cc52a23dd9'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588013910863
EVENTS	1588013913616	{"@timestamp":"2020-04-27T18:58:30.911Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"invalid_user\",\"error_description\":\"404 Parameter Not Found: Merchant_ID\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588013910911
EVENTS	1588013913616	{"@timestamp":"2020-04-27T18:58:30.911Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"invalid_user\",\"error_description\":\"404 Parameter Not Found: Merchant_ID\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588013910912
EVENTS	1588013913616	{"@timestamp":"2020-04-27T18:58:30.912Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token c55cac90-b8e2-4334-822d-a3b33d1561c2: [{\"id\":\"137d7af6-c4a7-4c3a-9571-6aba1ba9a7bd\",\"loan\":null,\"provider_code\":\"MOT\",\"provider_id\":null,\"merchant_token\":\"c55cac90-b8e2-4334-822d-a3b33d1561c2\",\"proxy_merchant_token\":\"bed8c25e-c95c-4fe1-80a8-bdd0cb4ec109\",\"status\":\"AVAILABLE\",\"sub_status\":\"\",\"amount\":\"5000.00\",\"interest\":\"500.00\",\"tax\":\"80.00\",\"payback\":\"5580.00\",\"retention_rate\":\"3.6526\",\"expiration_date\":\"2020-05-01\",\"term_maximum\":1,\"created_at\":\"2020-04-16T15:03:41Z\"},{\"id\":\"cec6ddba-cabc-41b0-a484-8b3c23198484\",\"loan\":null,\"provider_code\":\"MOT\",\"provider_id\":null,\"merchant_token\":\"c55cac90-b8e2-4334-822d-a3b33d1561c2\",\"proxy_merchant_token\":\"bed8c25e-c95c-4fe1-80a8-bdd0cb4ec109\",\"status\":\"AVAILABLE\",\"sub_status\":\"\",\"amount\":\"7000.00\",\"interest\":\"700.00\",\"tax\":\"112.00\",\"payback\":\"7812.00\",\"retention_rate\":\"5.1136\",\"expiration_date\":\"2020-05-01\",\"term_maximum\":1,\"created_at\":\"2020-04-16T15:03:41Z\"},{\"id\":\"d3cbc672-0f7c-41bc-aede-04cc52a23dd9\",\"loan\":null,\"provider_code\":\"MOT\",\"provider_id\":null,\"merchant_token\":\"c55cac90-b8e2-4334-822d-a3b33d1561c2\",\"proxy_merchant_token\":\"bed8c25e-c95c-4fe1-80a8-bdd0cb4ec109\",\"status\":\"AVAILABLE\",\"sub_status\":\"\",\"amount\":\"10000.00\",\"interest\":\"1000.00\",\"tax\":\"160.00\",\"payback\":\"11160.00\",\"retention_rate\":\"7.3052\",\"expiration_date\":\"2020-05-01\",\"term_maximum\":1,\"created_at\":\"2020-04-16T15:03:41Z\"}]"}	1588013910913
EVENTS	1588014148622	{"@timestamp":"2020-04-27T19:02:24.046Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 3ebbe1a5-066d-4884-9126-2d717aef7d68 "}	1588014144047
EVENTS	1588014148622	{"@timestamp":"2020-04-27T19:02:24.047Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 3ebbe1a5-066d-4884-9126-2d717aef7d68"}	1588014144047
EVENTS	1588014148622	{"@timestamp":"2020-04-27T19:02:24.050Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 3ebbe1a5-066d-4884-9126-2d717aef7d68: []"}	1588014144051
EVENTS	1588014148622	{"@timestamp":"2020-04-27T19:02:27.728Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token ed212985-8296-4d8e-8cde-a8562bc214ea "}	1588014147728
EVENTS	1588014148622	{"@timestamp":"2020-04-27T19:02:27.728Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token ed212985-8296-4d8e-8cde-a8562bc214ea"}	1588014147728
EVENTS	1588014148622	{"@timestamp":"2020-04-27T19:02:27.729Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token ed212985-8296-4d8e-8cde-a8562bc214ea"}	1588014147729
EVENTS	1588014148622	{"@timestamp":"2020-04-27T19:02:27.730Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'ed212985-8296-4d8e-8cde-a8562bc214ea' and pre-approval: '175601e4-aa43-4c9c-a554-b5041265901d'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588014147731
EVENTS	1588014148622	{"@timestamp":"2020-04-27T19:02:27.856Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"status\": \"available\"}"}	1588014147856
EVENTS	1588014148622	{"@timestamp":"2020-04-27T19:02:27.856Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token ed212985-8296-4d8e-8cde-a8562bc214ea"}	1588014147856
EVENTS	1588014148622	{"@timestamp":"2020-04-27T19:02:27.857Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'ed212985-8296-4d8e-8cde-a8562bc214ea' and pre-approval: '1d19f511-4895-4085-80af-0941355aa169'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588014147858
EVENTS	1588014148622	{"@timestamp":"2020-04-27T19:02:27.936Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"status\": \"available\"}"}	1588014147937
EVENTS	1588014148622	{"@timestamp":"2020-04-27T19:02:27.937Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token ed212985-8296-4d8e-8cde-a8562bc214ea"}	1588014147937
EVENTS	1588014148622	{"@timestamp":"2020-04-27T19:02:27.938Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'ed212985-8296-4d8e-8cde-a8562bc214ea' and pre-approval: '5ab2dee8-e810-4be3-ada4-b2562f896830'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588014147939
EVENTS	1588014148622	{"@timestamp":"2020-04-27T19:02:27.982Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"status\": \"available\"}"}	1588014147982
EVENTS	1588014148622	{"@timestamp":"2020-04-27T19:02:27.982Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token ed212985-8296-4d8e-8cde-a8562bc214ea: [{\"id\":\"175601e4-aa43-4c9c-a554-b5041265901d\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"ed212985-8296-4d8e-8cde-a8562bc214ea\",\"proxy_merchant_token\":\"514ecf24-d7ef-4581-94e8-d0ba9e25a176\",\"status\":\"EXPIRED\",\"sub_status\":\"available\",\"amount\":\"8800.00\",\"interest\":\"730.00\",\"tax\":\"116.80\",\"payback\":\"9646.80\",\"retention_rate\":\"18.0000\",\"expiration_date\":\"2020-01-21\",\"term_maximum\":4,\"created_at\":\"2019-12-13T21:54:07Z\"},{\"id\":\"1d19f511-4895-4085-80af-0941355aa169\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"ed212985-8296-4d8e-8cde-a8562bc214ea\",\"proxy_merchant_token\":\"514ecf24-d7ef-4581-94e8-d0ba9e25a176\",\"status\":\"EXPIRED\",\"sub_status\":\"available\",\"amount\":\"6800.00\",\"interest\":\"610.00\",\"tax\":\"97.60\",\"payback\":\"7507.60\",\"retention_rate\":\"14.0000\",\"expiration_date\":\"2020-01-21\",\"term_maximum\":4,\"created_at\":\"2019-12-13T21:54:07Z\"},{\"id\":\"5ab2dee8-e810-4be3-ada4-b2562f896830\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"ed212985-8296-4d8e-8cde-a8562bc214ea\",\"proxy_merchant_token\":\"514ecf24-d7ef-4581-94e8-d0ba9e25a176\",\"status\":\"EXPIRED\",\"sub_status\":\"available\",\"amount\":\"4900.00\",\"interest\":\"390.00\",\"tax\":\"62.40\",\"payback\":\"5352.40\",\"retention_rate\":\"10.0000\",\"expiration_date\":\"2020-01-21\",\"term_maximum\":4,\"created_at\":\"2019-12-13T21:54:07Z\"}]"}	1588014147983
EVENTS	1588014203614	{"@timestamp":"2020-04-27T19:03:22.081Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 46795d96-04f6-4342-aca8-d5c367415847 "}	1588014202082
EVENTS	1588014203614	{"@timestamp":"2020-04-27T19:03:22.082Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 46795d96-04f6-4342-aca8-d5c367415847"}	1588014202082
EVENTS	1588014203614	{"@timestamp":"2020-04-27T19:03:22.089Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 46795d96-04f6-4342-aca8-d5c367415847: []"}	1588014202090
EVENTS	1588014233616	{"@timestamp":"2020-04-27T19:03:50.523Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token fd7481c9-9bba-4da3-a91e-91ffb41e5319 "}	1588014230524
EVENTS	1588014233616	{"@timestamp":"2020-04-27T19:03:50.524Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token fd7481c9-9bba-4da3-a91e-91ffb41e5319"}	1588014230524
EVENTS	1588014233616	{"@timestamp":"2020-04-27T19:03:50.526Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token fd7481c9-9bba-4da3-a91e-91ffb41e5319: []"}	1588014230526
EVENTS	1588014343615	{"@timestamp":"2020-04-27T19:05:40.607Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 498869f0-be5a-4ff7-9844-50a6b34dd57f "}	1588014340608
EVENTS	1588014343615	{"@timestamp":"2020-04-27T19:05:40.608Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 498869f0-be5a-4ff7-9844-50a6b34dd57f"}	1588014340608
EVENTS	1588014343615	{"@timestamp":"2020-04-27T19:05:40.609Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 498869f0-be5a-4ff7-9844-50a6b34dd57f: []"}	1588014340610
EVENTS	1588014453615	{"@timestamp":"2020-04-27T19:07:31.097Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 2218b143-81af-4c1d-bc63-246c85066c27 "}	1588014451097
EVENTS	1588014453615	{"@timestamp":"2020-04-27T19:07:31.097Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 2218b143-81af-4c1d-bc63-246c85066c27"}	1588014451097
EVENTS	1588014453615	{"@timestamp":"2020-04-27T19:07:31.099Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 2218b143-81af-4c1d-bc63-246c85066c27: []"}	1588014451099
EVENTS	1588014458608	{"@timestamp":"2020-04-27T19:07:35.643Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token e4a8d1c3-93b7-4639-8d89-011572f45642 "}	1588014455643
EVENTS	1588014458608	{"@timestamp":"2020-04-27T19:07:35.643Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token e4a8d1c3-93b7-4639-8d89-011572f45642"}	1588014455644
EVENTS	1588014458608	{"@timestamp":"2020-04-27T19:07:35.648Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token e4a8d1c3-93b7-4639-8d89-011572f45642: []"}	1588014455648
EVENTS	1588014523616	{"@timestamp":"2020-04-27T19:08:42.198Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 45b1dacc-d4f9-4a37-a273-fb5ebb31c36b "}	1588014522199
EVENTS	1588014523616	{"@timestamp":"2020-04-27T19:08:42.199Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 45b1dacc-d4f9-4a37-a273-fb5ebb31c36b"}	1588014522199
EVENTS	1588014523616	{"@timestamp":"2020-04-27T19:08:42.207Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 45b1dacc-d4f9-4a37-a273-fb5ebb31c36b: []"}	1588014522207
EVENTS	1588014773616	{"@timestamp":"2020-04-27T19:12:53.383Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 7785e546-2f60-489e-aa80-64c847fa283c "}	1588014773385
EVENTS	1588014773616	{"@timestamp":"2020-04-27T19:12:53.385Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 7785e546-2f60-489e-aa80-64c847fa283c"}	1588014773385
EVENTS	1588014773616	{"@timestamp":"2020-04-27T19:12:53.386Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 7785e546-2f60-489e-aa80-64c847fa283c: []"}	1588014773387
EVENTS	1588014808621	{"@timestamp":"2020-04-27T19:13:26.900Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 147bb256-f960-4fbc-84b5-ae3dc1299003 "}	1588014806900
EVENTS	1588014808621	{"@timestamp":"2020-04-27T19:13:26.908Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 147bb256-f960-4fbc-84b5-ae3dc1299003"}	1588014806908
EVENTS	1588014808621	{"@timestamp":"2020-04-27T19:13:26.910Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 147bb256-f960-4fbc-84b5-ae3dc1299003: []"}	1588014806910
EVENTS	1588014853616	{"@timestamp":"2020-04-27T19:14:11.407Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 7ee4f242-1d35-441e-a2df-a541f46122ef "}	1588014851407
EVENTS	1588014853616	{"@timestamp":"2020-04-27T19:14:11.408Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 7ee4f242-1d35-441e-a2df-a541f46122ef"}	1588014851408
EVENTS	1588014853616	{"@timestamp":"2020-04-27T19:14:11.423Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 7ee4f242-1d35-441e-a2df-a541f46122ef: []"}	1588014851423
EVENTS	1588014908618	{"@timestamp":"2020-04-27T19:15:04.730Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token d6990cd2-1976-402e-a867-37170f82b0a0 "}	1588014904730
EVENTS	1588014908618	{"@timestamp":"2020-04-27T19:15:04.730Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token d6990cd2-1976-402e-a867-37170f82b0a0"}	1588014904730
EVENTS	1588014908618	{"@timestamp":"2020-04-27T19:15:04.731Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token d6990cd2-1976-402e-a867-37170f82b0a0: []"}	1588014904731
EVENTS	1588015218625	{"@timestamp":"2020-04-27T19:20:18.168Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 7c656e89-3992-439e-90bf-d71e03289558 "}	1588015218168
EVENTS	1588015218625	{"@timestamp":"2020-04-27T19:20:18.168Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 7c656e89-3992-439e-90bf-d71e03289558"}	1588015218169
EVENTS	1588015218625	{"@timestamp":"2020-04-27T19:20:18.170Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 7c656e89-3992-439e-90bf-d71e03289558: []"}	1588015218170
EVENTS	1588015368650	{"@timestamp":"2020-04-27T19:22:44.833Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 44253f03-ae92-40c5-891a-3b03e12b0804 "}	1588015364834
EVENTS	1588015368650	{"@timestamp":"2020-04-27T19:22:44.834Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 44253f03-ae92-40c5-891a-3b03e12b0804"}	1588015364834
EVENTS	1588015368650	{"@timestamp":"2020-04-27T19:22:44.836Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 44253f03-ae92-40c5-891a-3b03e12b0804"}	1588015364836
EVENTS	1588015368650	{"@timestamp":"2020-04-27T19:22:44.838Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '44253f03-ae92-40c5-891a-3b03e12b0804' and pre-approval: '2b016dfa-f32c-4631-a777-8e2eb6eec602'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588015364839
EVENTS	1588015368650	{"@timestamp":"2020-04-27T19:22:44.919Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"status\": \"available\"}"}	1588015364919
EVENTS	1588015368650	{"@timestamp":"2020-04-27T19:22:44.919Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 44253f03-ae92-40c5-891a-3b03e12b0804"}	1588015364919
EVENTS	1588015368650	{"@timestamp":"2020-04-27T19:22:44.926Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '44253f03-ae92-40c5-891a-3b03e12b0804' and pre-approval: '4d54f861-5cb6-4bf4-972b-93b687f09c60'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588015364927
EVENTS	1588015368650	{"@timestamp":"2020-04-27T19:22:44.977Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"status\": \"available\"}"}	1588015364978
EVENTS	1588015368650	{"@timestamp":"2020-04-27T19:22:44.978Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 44253f03-ae92-40c5-891a-3b03e12b0804"}	1588015364978
EVENTS	1588015368650	{"@timestamp":"2020-04-27T19:22:44.979Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '44253f03-ae92-40c5-891a-3b03e12b0804' and pre-approval: '8d9cc49e-6145-4f9e-b8c8-01de1e1e297d'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588015364980
EVENTS	1588015368650	{"@timestamp":"2020-04-27T19:22:45.064Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"status\": \"available\"}"}	1588015365064
EVENTS	1588015368650	{"@timestamp":"2020-04-27T19:22:45.064Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 44253f03-ae92-40c5-891a-3b03e12b0804: [{\"id\":\"2b016dfa-f32c-4631-a777-8e2eb6eec602\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"44253f03-ae92-40c5-891a-3b03e12b0804\",\"proxy_merchant_token\":\"ee5afa4a-67de-440c-be18-4386ec26a36a\",\"status\":\"AVAILABLE\",\"sub_status\":\"available\",\"amount\":\"10300.00\",\"interest\":\"1890.00\",\"tax\":\"302.40\",\"payback\":\"12492.40\",\"retention_rate\":\"22.0000\",\"expiration_date\":\"2020-03-16\",\"term_maximum\":4,\"created_at\":\"2020-02-27T04:08:12Z\"},{\"id\":\"4d54f861-5cb6-4bf4-972b-93b687f09c60\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"44253f03-ae92-40c5-891a-3b03e12b0804\",\"proxy_merchant_token\":\"ee5afa4a-67de-440c-be18-4386ec26a36a\",\"status\":\"AVAILABLE\",\"sub_status\":\"available\",\"amount\":\"7500.00\",\"interest\":\"1360.00\",\"tax\":\"217.60\",\"payback\":\"9077.60\",\"retention_rate\":\"16.0000\",\"expiration_date\":\"2020-03-16\",\"term_maximum\":4,\"created_at\":\"2020-02-27T04:08:12Z\"},{\"id\":\"8d9cc49e-6145-4f9e-b8c8-01de1e1e297d\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"44253f03-ae92-40c5-891a-3b03e12b0804\",\"proxy_merchant_token\":\"ee5afa4a-67de-440c-be18-4386ec26a36a\",\"status\":\"AVAILABLE\",\"sub_status\":\"available\",\"amount\":\"4700.00\",\"interest\":\"840.00\",\"tax\":\"134.40\",\"payback\":\"5674.40\",\"retention_rate\":\"10.0000\",\"expiration_date\":\"2020-03-16\",\"term_maximum\":4,\"created_at\":\"2020-02-27T04:08:12Z\"}]"}	1588015365065
EVENTS	1588015428616	{"@timestamp":"2020-04-27T19:23:44.083Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token c3c0ec6f-2635-4c5f-bdcb-d03f247d5fa2 "}	1588015424084
EVENTS	1588015428616	{"@timestamp":"2020-04-27T19:23:44.084Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token c3c0ec6f-2635-4c5f-bdcb-d03f247d5fa2"}	1588015424084
EVENTS	1588015428616	{"@timestamp":"2020-04-27T19:23:44.085Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token c3c0ec6f-2635-4c5f-bdcb-d03f247d5fa2: []"}	1588015424086
EVENTS	1588015603622	{"@timestamp":"2020-04-27T19:26:38.775Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 71010400-4fde-4487-8a35-d7711082b1d2 "}	1588015598775
EVENTS	1588015603622	{"@timestamp":"2020-04-27T19:26:38.775Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 71010400-4fde-4487-8a35-d7711082b1d2"}	1588015598776
EVENTS	1588015603622	{"@timestamp":"2020-04-27T19:26:38.777Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 71010400-4fde-4487-8a35-d7711082b1d2"}	1588015598777
EVENTS	1588015603622	{"@timestamp":"2020-04-27T19:26:39.055Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"status\": \"active\"}"}	1588015599056
EVENTS	1588015603622	{"@timestamp":"2020-04-27T19:26:39.056Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 71010400-4fde-4487-8a35-d7711082b1d2"}	1588015599056
EVENTS	1588015603622	{"@timestamp":"2020-04-27T19:26:39.058Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '71010400-4fde-4487-8a35-d7711082b1d2' and pre-approval: 'e16bd271-f387-4095-959e-2dcc0b5cea2d'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588015599058
EVENTS	1588015603622	{"@timestamp":"2020-04-27T19:26:39.100Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"status\": \"active\"}"}	1588015599100
EVENTS	1588015603622	{"@timestamp":"2020-04-27T19:26:39.100Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 71010400-4fde-4487-8a35-d7711082b1d2"}	1588015599100
EVENTS	1588015603622	{"@timestamp":"2020-04-27T19:26:39.101Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '71010400-4fde-4487-8a35-d7711082b1d2' and pre-approval: 'e564ed1d-afdf-4dc4-93d3-a77c0bb9a757'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588015599102
EVENTS	1588015603622	{"@timestamp":"2020-04-27T19:26:39.220Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"status\": \"active\"}"}	1588015599220
EVENTS	1588015603622	{"@timestamp":"2020-04-27T19:26:39.220Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 71010400-4fde-4487-8a35-d7711082b1d2"}	1588015599220
EVENTS	1588015603622	{"@timestamp":"2020-04-27T19:26:39.221Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '71010400-4fde-4487-8a35-d7711082b1d2' and pre-approval: 'XXXXXXXXXXXXX-84a2-64de2a513223'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588015599222
EVENTS	1588015603622	{"@timestamp":"2020-04-27T19:26:39.270Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"status\": \"repaid\"}"}	1588015599271
EVENTS	1588015603622	{"@timestamp":"2020-04-27T19:26:39.271Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 71010400-4fde-4487-8a35-d7711082b1d2"}	1588015599271
EVENTS	1588015603622	{"@timestamp":"2020-04-27T19:26:39.272Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '71010400-4fde-4487-8a35-d7711082b1d2' and pre-approval: '77817611-2ba8-40f4-a37a-df9383863fbc'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588015599272
EVENTS	1588015603622	{"@timestamp":"2020-04-27T19:26:39.315Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"status\": \"repaid\"}"}	1588015599316
EVENTS	1588015603622	{"@timestamp":"2020-04-27T19:26:39.316Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 71010400-4fde-4487-8a35-d7711082b1d2"}	1588015599316
EVENTS	1588015603622	{"@timestamp":"2020-04-27T19:26:39.538Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"status\": \"repaid\"}"}	1588015599538
EVENTS	1588015603622	{"@timestamp":"2020-04-27T19:26:39.538Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 71010400-4fde-4487-8a35-d7711082b1d2: [{\"id\":\"a2d5cf87-c6f4-4982-a7b4-4768d8419966\",\"loan\":{\"loan_id\":\"0e9a7de4-eace-4f22-a99d-1aaf7aaa9088\",\"provider_code\":null,\"provider_loan_id\":\"8421-2-2\",\"merchant_token\":null,\"proxy_merchant_token\":null,\"status\":\"PAID\",\"merchant_id\":\"db44e8aa-d427-4e02-a5ef-8ba91e7812c5\",\"sales_retention_percentage\":null,\"loan_amount\":\"65000.00\",\"total_payback\":\"72219.98\",\"total_pending\":\"1.04\",\"total_paid\":\"41221.24\",\"overdue_interest\":\"2.30\",\"rate_interest_regular\":null,\"interest\":\"7219.98\",\"tax\":\"0.00\",\"interest_and_tax\":\"7219.98\",\"current_balance\":\"1.04\",\"start_date_local\":\"2019-11-14\",\"end_date_local\":\"2020-04-14\",\"balance\":{\"total\":\"31001.04\",\"capital\":\"27901.80\",\"interest\":\"3099.24\",\"tax\":\"0.00\",\"overdue_interest\":\"0.00\"}},\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"71010400-4fde-4487-8a35-d7711082b1d2\",\"proxy_merchant_token\":\"91fc7c92-4e6e-4c74-b53d-0cafc91ec54b\",\"status\":\"ACTIVE\",\"sub_status\":\"active\",\"amount\":\"65000.00\",\"interest\":\"7220.00\",\"tax\":\"1155.20\",\"payback\":\"73375.20\",\"retention_rate\":\"18.0000\",\"expiration_date\":\"2019-11-13\",\"term_maximum\":5,\"created_at\":\"2019-10-30T00:38:16Z\"},{\"id\":\"e16bd271-f387-4095-959e-2dcc0b5cea2d\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"71010400-4fde-4487-8a35-d7711082b1d2\",\"proxy_merchant_token\":\"91fc7c92-4e6e-4c74-b53d-0cafc91ec54b\",\"status\":\"DECLINED\",\"sub_status\":\"active\",\"amount\":\"50600.00\",\"interest\":\"5570.00\",\"tax\":\"891.20\",\"payback\":\"57061.20\",\"retention_rate\":\"14.0000\",\"expiration_date\":\"2019-11-13\",\"term_maximum\":5,\"created_at\":\"2019-10-30T00:38:16Z\"},{\"id\":\"e564ed1d-afdf-4dc4-93d3-a77c0bb9a757\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"71010400-4fde-4487-8a35-d7711082b1d2\",\"proxy_merchant_token\":\"91fc7c92-4e6e-4c74-b53d-0cafc91ec54b\",\"status\":\"DECLINED\",\"sub_status\":\"active\",\"amount\":\"36100.00\",\"interest\":\"4020.00\",\"tax\":\"643.20\",\"payback\":\"40763.20\",\"retention_rate\":\"10.0000\",\"expiration_date\":\"2019-11-13\",\"term_maximum\":5,\"created_at\":\"2019-10-30T00:38:16Z\"},{\"id\":\"XXXXXXXXXXXXX-84a2-64de2a513223\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"71010400-4fde-4487-8a35-d7711082b1d2\",\"proxy_merchant_token\":\"91fc7c92-4e6e-4c74-b53d-0cafc91ec54b\",\"status\":\"DECLINED\",\"sub_status\":\"repaid\",\"amount\":\"13000.00\",\"interest\":\"1400.00\",\"tax\":\"224.00\",\"payback\":\"14624.00\",\"retention_rate\":\"10.0000\",\"expiration_date\":\"2019-09-13\",\"term_maximum\":5,\"created_at\":\"2019-08-29T22:08:46Z\"},{\"id\":\"77817611-2ba8-40f4-a37a-df9383863fbc\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"71010400-4fde-4487-8a35-d7711082b1d2\",\"proxy_merchant_token\":\"91fc7c92-4e6e-4c74-b53d-0cafc91ec54b\",\"status\":\"DECLINED\",\"sub_status\":\"repaid\",\"amount\":\"18100.00\",\"interest\":\"2060.00\",\"tax\":\"329.60\",\"payback\":\"20489.60\",\"retention_rate\":\"14.0000\",\"expiration_date\":\"2019-09-13\",\"term_maximum\":5,\"created_at\":\"2019-08-29T22:08:46Z\"},{\"id\":\"a9164353-da49-4133-9cb2-56910329f7ec\",\"loan\":{\"loan_id\":\"8f295c1f-1d99-4a1e-9bdb-c0fd970567bf\",\"provider_code\":null,\"provider_loan_id\":\"8421-1-1\",\"merchant_token\":null,\"proxy_merchant_token\":null,\"status\":\"PAID\",\"merchant_id\":\"db44e8aa-d427-4e02-a5ef-8ba91e7812c5\",\"sales_retention_percentage\":null,\"loan_amount\":\"23300.00\",\"total_payback\":\"25919.99\",\"total_pending\":\"0.00\",\"total_paid\":\"18052.12\",\"overdue_interest\":\"0.00\",\"rate_interest_regular\":null,\"interest\":\"2619.99\",\"tax\":\"0.00\",\"interest_and_tax\":\"2619.99\",\"current_balance\":\"0.00\",\"start_date_local\":\"2019-09-04\",\"end_date_local\":\"2020-02-04\",\"balance\":{\"total\":\"7867.87\",\"capital\":\"7072.59\",\"interest\":\"795.28\",\"tax\":\"0.00\",\"overdue_interest\":\"0.00\"}},\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"71010400-4fde-4487-8a35-d7711082b1d2\",\"proxy_merchant_token\":\"91fc7c92-4e6e-4c74-b53d-0cafc91ec54b\",\"status\":\"PAID\",\"sub_status\":\"repaid\",\"amount\":\"23300.00\",\"interest\":\"2620.00\",\"tax\":\"419.20\",\"payback\":\"26339.20\",\"retention_rate\":\"18.0000\",\"expiration_date\":\"2019-09-13\",\"term_maximum\":5,\"created_at\":\"2019-08-29T22:08:46Z\"}]"}	1588015599541
EVENTS	1588015748622	{"@timestamp":"2020-04-27T19:29:07.435Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 29301ad6-4807-4a4b-87ad-11f5606d6ef0 "}	1588015747435
EVENTS	1588015748622	{"@timestamp":"2020-04-27T19:29:07.435Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 29301ad6-4807-4a4b-87ad-11f5606d6ef0"}	1588015747435
EVENTS	1588015748622	{"@timestamp":"2020-04-27T19:29:07.437Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 29301ad6-4807-4a4b-87ad-11f5606d6ef0: []"}	1588015747437
EVENTS	1588015768623	{"@timestamp":"2020-04-27T19:29:24.066Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 2994591b-1c1f-4505-895b-2e52e21f7201 "}	1588015764067
EVENTS	1588015768623	{"@timestamp":"2020-04-27T19:29:24.067Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 2994591b-1c1f-4505-895b-2e52e21f7201"}	1588015764067
EVENTS	1588015768623	{"@timestamp":"2020-04-27T19:29:24.068Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 2994591b-1c1f-4505-895b-2e52e21f7201: []"}	1588015764068
EVENTS	1588015908632	{"@timestamp":"2020-04-27T19:31:46.506Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token d65d634b-0445-4926-ab53-877b84ed8766 "}	1588015906506
EVENTS	1588015908632	{"@timestamp":"2020-04-27T19:31:46.506Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token d65d634b-0445-4926-ab53-877b84ed8766"}	1588015906507
EVENTS	1588015908632	{"@timestamp":"2020-04-27T19:31:46.510Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token d65d634b-0445-4926-ab53-877b84ed8766: []"}	1588015906510
EVENTS	1588015913606	{"@timestamp":"2020-04-27T19:31:51.683Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token dba0f949-5ebc-497d-9098-eac97e6ddcf2 "}	1588015911683
EVENTS	1588015913606	{"@timestamp":"2020-04-27T19:31:51.683Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token dba0f949-5ebc-497d-9098-eac97e6ddcf2"}	1588015911684
EVENTS	1588015913606	{"@timestamp":"2020-04-27T19:31:51.685Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token dba0f949-5ebc-497d-9098-eac97e6ddcf2: []"}	1588015911685
EVENTS	1588016018618	{"@timestamp":"2020-04-27T19:33:34.743Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.CollectionsHandler","method":"onCollectionsMessage","file":"CollectionsHandler.java","line":36,"message":"Request for merchant token d029190c-1ce3-4936-abb7-ce5a9773edbf: {\"merchant_token\": \"d029190c-1ce3-4936-abb7-ce5a9773edbf\", \"loan_id\": \"b043ec35-5018-46ce-b316-52e4bb79df50\", limit: 7}"}	1588016014743
EVENTS	1588016018618	{"@timestamp":"2020-04-27T19:33:34.744Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.dao.CollectionsDaoImpl","method":"findCollectionsByMerchantToken","file":"CollectionsDaoImpl.java","line":98,"message":"loanId: b043ec35-5018-46ce-b316-52e4bb79df50, merchantToken: d029190c-1ce3-4936-abb7-ce5a9773edbf, numberRows: 7"}	1588016014744
EVENTS	1588016018618	{"@timestamp":"2020-04-27T19:33:34.747Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.CollectionsHandler","method":"onCollectionsMessage","file":"CollectionsHandler.java","line":44,"message":"Response for merchant token d029190c-1ce3-4936-abb7-ce5a9773edbf: [{\"loan_id\":\"b043ec35-5018-46ce-b316-52e4bb79df50\",\"collection_date_local\":\"2020-04-27\",\"provider_code\":\"MRP\",\"merchant_token\":\"d029190c-1ce3-4936-abb7-ce5a9773edbf\",\"proxy_merchant_token\":\"caa43a67-6daa-49e4-8d56-dbebc00de84c\",\"amount\":\"226.32\",\"capital\":\"201.73121586\",\"interest\":\"24.58878414\",\"tax\":\"0E-8\",\"overdue_interest\":\"0.00\",\"submited_date_local\":null,\"notes\":null,\"created_at\":\"2020-04-27T13:46:11Z\",\"updated_at\":\"2020-04-27T13:46:11Z\"},{\"loan_id\":\"b043ec35-5018-46ce-b316-52e4bb79df50\",\"collection_date_local\":\"2020-04-23\",\"provider_code\":\"MRP\",\"merchant_token\":\"d029190c-1ce3-4936-abb7-ce5a9773edbf\",\"proxy_merchant_token\":\"caa43a67-6daa-49e4-8d56-dbebc00de84c\",\"amount\":\"49.10\",\"capital\":\"43.76547675\",\"interest\":\"5.33452325\",\"tax\":\"0E-8\",\"overdue_interest\":\"0.00\",\"submited_date_local\":null,\"notes\":null,\"created_at\":\"2020-04-23T11:45:41Z\",\"updated_at\":\"2020-04-23T11:45:41Z\"},{\"loan_id\":\"b043ec35-5018-46ce-b316-52e4bb79df50\",\"collection_date_local\":\"2020-04-22\",\"provider_code\":\"MRP\",\"merchant_token\":\"d029190c-1ce3-4936-abb7-ce5a9773edbf\",\"proxy_merchant_token\":\"caa43a67-6daa-49e4-8d56-dbebc00de84c\",\"amount\":\"30.86\",\"capital\":\"27.50718152\",\"interest\":\"3.35281848\",\"tax\":\"0E-8\",\"overdue_interest\":\"0.00\",\"submited_date_local\":null,\"notes\":null,\"created_at\":\"2020-04-22T11:45:37Z\",\"updated_at\":\"2020-04-22T11:45:37Z\"},{\"loan_id\":\"b043ec35-5018-46ce-b316-52e4bb79df50\",\"collection_date_local\":\"2020-04-20\",\"provider_code\":\"MRP\",\"merchant_token\":\"d029190c-1ce3-4936-abb7-ce5a9773edbf\",\"proxy_merchant_token\":\"caa43a67-6daa-49e4-8d56-dbebc00de84c\",\"amount\":\"222.97\",\"capital\":\"198.74518028\",\"interest\":\"24.22481972\",\"tax\":\"0E-8\",\"overdue_interest\":\"0.00\",\"submited_date_local\":null,\"notes\":null,\"created_at\":\"2020-04-20T13:46:59Z\",\"updated_at\":\"2020-04-20T13:46:59Z\"},{\"loan_id\":\"b043ec35-5018-46ce-b316-52e4bb79df50\",\"collection_date_local\":\"2020-04-16\",\"provider_code\":\"MRP\",\"merchant_token\":\"d029190c-1ce3-4936-abb7-ce5a9773edbf\",\"proxy_merchant_token\":\"caa43a67-6daa-49e4-8d56-dbebc00de84c\",\"amount\":\"42.39\",\"capital\":\"37.78449205\",\"interest\":\"4.60550795\",\"tax\":\"0E-8\",\"overdue_interest\":\"0.00\",\"submited_date_local\":null,\"notes\":null,\"created_at\":\"2020-04-16T11:45:41Z\",\"updated_at\":\"2020-04-16T11:45:41Z\"},{\"loan_id\":\"b043ec35-5018-46ce-b316-52e4bb79df50\",\"collection_date_local\":\"2020-04-15\",\"provider_code\":\"MRP\",\"merchant_token\":\"d029190c-1ce3-4936-abb7-ce5a9773edbf\",\"proxy_merchant_token\":\"caa43a67-6daa-49e4-8d56-dbebc00de84c\",\"amount\":\"39.84\",\"capital\":\"35.51153959\",\"interest\":\"4.32846041\",\"tax\":\"0E-8\",\"overdue_interest\":\"0.00\",\"submited_date_local\":null,\"notes\":null,\"created_at\":\"2020-04-15T11:45:42Z\",\"updated_at\":\"2020-04-15T11:45:42Z\"},{\"loan_id\":\"b043ec35-5018-46ce-b316-52e4bb79df50\",\"collection_date_local\":\"2020-04-14\",\"provider_code\":\"MRP\",\"merchant_token\":\"d029190c-1ce3-4936-abb7-ce5a9773edbf\",\"proxy_merchant_token\":\"caa43a67-6daa-49e4-8d56-dbebc00de84c\",\"amount\":\"37.03\",\"capital\":\"33.00683512\",\"interest\":\"4.02316488\",\"tax\":\"0E-8\",\"overdue_interest\":\"0.00\",\"submited_date_local\":null,\"notes\":null,\"created_at\":\"2020-04-14T11:45:43Z\",\"updated_at\":\"2020-04-14T11:45:43Z\"}]"}	1588016014748
EVENTS	1588016453617	{"@timestamp":"2020-04-27T19:40:49.840Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 0bd07f71-0df4-4b89-bfa3-e2ff5c53808f "}	1588016449840
EVENTS	1588016453617	{"@timestamp":"2020-04-27T19:40:49.840Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 0bd07f71-0df4-4b89-bfa3-e2ff5c53808f"}	1588016449840
EVENTS	1588016453617	{"@timestamp":"2020-04-27T19:40:49.842Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 0bd07f71-0df4-4b89-bfa3-e2ff5c53808f: []"}	1588016449842
EVENTS	1588016513620	{"@timestamp":"2020-04-27T19:41:51.660Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token e30da166-566f-46c6-a7b9-29c69851d163 "}	1588016511660
EVENTS	1588016513620	{"@timestamp":"2020-04-27T19:41:51.660Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token e30da166-566f-46c6-a7b9-29c69851d163"}	1588016511660
EVENTS	1588016513620	{"@timestamp":"2020-04-27T19:41:51.670Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token e30da166-566f-46c6-a7b9-29c69851d163: []"}	1588016511670
EVENTS	1588016528616	{"@timestamp":"2020-04-27T19:42:05.465Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 01352786-790c-4b75-a53f-a5e59b4a17a1 "}	1588016525465
EVENTS	1588016528616	{"@timestamp":"2020-04-27T19:42:05.465Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 01352786-790c-4b75-a53f-a5e59b4a17a1"}	1588016525466
EVENTS	1588016528616	{"@timestamp":"2020-04-27T19:42:05.468Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 01352786-790c-4b75-a53f-a5e59b4a17a1: []"}	1588016525469
EVENTS	1588016533607	{"@timestamp":"2020-04-27T19:42:10.138Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token b895f8ad-8c23-4a6f-8ea1-70a8c986fa92 "}	1588016530138
EVENTS	1588016533607	{"@timestamp":"2020-04-27T19:42:10.138Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token b895f8ad-8c23-4a6f-8ea1-70a8c986fa92"}	1588016530139
EVENTS	1588016533607	{"@timestamp":"2020-04-27T19:42:10.140Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token b895f8ad-8c23-4a6f-8ea1-70a8c986fa92: []"}	1588016530140
EVENTS	1588016568615	{"@timestamp":"2020-04-27T19:42:45.039Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 8cd438ce-9b3b-4170-ae7f-ea4d95f8333f "}	1588016565039
EVENTS	1588016568615	{"@timestamp":"2020-04-27T19:42:45.039Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 8cd438ce-9b3b-4170-ae7f-ea4d95f8333f"}	1588016565040
EVENTS	1588016568615	{"@timestamp":"2020-04-27T19:42:45.040Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 8cd438ce-9b3b-4170-ae7f-ea4d95f8333f: []"}	1588016565041
EVENTS	1588016588632	{"@timestamp":"2020-04-27T19:43:03.711Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 8cd438ce-9b3b-4170-ae7f-ea4d95f8333f "}	1588016583711
EVENTS	1588016588632	{"@timestamp":"2020-04-27T19:43:03.711Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 8cd438ce-9b3b-4170-ae7f-ea4d95f8333f"}	1588016583712
EVENTS	1588016588632	{"@timestamp":"2020-04-27T19:43:03.713Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 8cd438ce-9b3b-4170-ae7f-ea4d95f8333f: []"}	1588016583713
EVENTS	1588016608619	{"@timestamp":"2020-04-27T19:43:25.148Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 8cd438ce-9b3b-4170-ae7f-ea4d95f8333f "}	1588016605148
EVENTS	1588016608619	{"@timestamp":"2020-04-27T19:43:25.148Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 8cd438ce-9b3b-4170-ae7f-ea4d95f8333f"}	1588016605148
EVENTS	1588016608619	{"@timestamp":"2020-04-27T19:43:25.149Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 8cd438ce-9b3b-4170-ae7f-ea4d95f8333f: []"}	1588016605150
EVENTS	1588016608619	{"@timestamp":"2020-04-27T19:43:28.593Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 1edd3e0e-f739-4e01-bd14-86cf62733da8 "}	1588016608593
EVENTS	1588016608619	{"@timestamp":"2020-04-27T19:43:28.593Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 1edd3e0e-f739-4e01-bd14-86cf62733da8"}	1588016608593
EVENTS	1588016613605	{"@timestamp":"2020-04-27T19:43:28.612Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 1edd3e0e-f739-4e01-bd14-86cf62733da8: []"}	1588016608613
EVENTS	1588016788617	{"@timestamp":"2020-04-27T19:46:24.589Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token c8fcfeca-1029-46e1-9ed9-1457aa21de4b "}	1588016784589
EVENTS	1588016788617	{"@timestamp":"2020-04-27T19:46:24.589Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token c8fcfeca-1029-46e1-9ed9-1457aa21de4b"}	1588016784590
EVENTS	1588016788617	{"@timestamp":"2020-04-27T19:46:24.592Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token c8fcfeca-1029-46e1-9ed9-1457aa21de4b"}	1588016784592
EVENTS	1588016788617	{"@timestamp":"2020-04-27T19:46:24.593Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'c8fcfeca-1029-46e1-9ed9-1457aa21de4b' and pre-approval: '3eeae6b5-1e79-4f50-b1d6-e71a9d455efd'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588016784594
EVENTS	1588016788617	{"@timestamp":"2020-04-27T19:46:24.680Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"status\": \"available\"}"}	1588016784680
EVENTS	1588016788617	{"@timestamp":"2020-04-27T19:46:24.687Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token c8fcfeca-1029-46e1-9ed9-1457aa21de4b"}	1588016784688
EVENTS	1588016788617	{"@timestamp":"2020-04-27T19:46:24.689Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'c8fcfeca-1029-46e1-9ed9-1457aa21de4b' and pre-approval: '86275d95-759c-413f-a4d0-28e6aed9d01f'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588016784689
EVENTS	1588016788617	{"@timestamp":"2020-04-27T19:46:24.743Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"status\": \"available\"}"}	1588016784743
EVENTS	1588016788617	{"@timestamp":"2020-04-27T19:46:24.743Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token c8fcfeca-1029-46e1-9ed9-1457aa21de4b"}	1588016784743
EVENTS	1588016788617	{"@timestamp":"2020-04-27T19:46:24.745Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'c8fcfeca-1029-46e1-9ed9-1457aa21de4b' and pre-approval: 'af64b989-8d52-4833-a21a-707c879ad7b9'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588016784745
EVENTS	1588016788617	{"@timestamp":"2020-04-27T19:46:24.793Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"status\": \"available\"}"}	1588016784793
EVENTS	1588016788617	{"@timestamp":"2020-04-27T19:46:24.793Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token c8fcfeca-1029-46e1-9ed9-1457aa21de4b: [{\"id\":\"3eeae6b5-1e79-4f50-b1d6-e71a9d455efd\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"c8fcfeca-1029-46e1-9ed9-1457aa21de4b\",\"proxy_merchant_token\":\"1429222f-2763-4f47-8bc9-ae3958b7b1d2\",\"status\":\"AVAILABLE\",\"sub_status\":\"available\",\"amount\":\"1700.00\",\"interest\":\"340.00\",\"tax\":\"54.40\",\"payback\":\"2094.40\",\"retention_rate\":\"10.0000\",\"expiration_date\":\"2020-03-16\",\"term_maximum\":4,\"created_at\":\"2020-02-27T10:45:29Z\"},{\"id\":\"86275d95-759c-413f-a4d0-28e6aed9d01f\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"c8fcfeca-1029-46e1-9ed9-1457aa21de4b\",\"proxy_merchant_token\":\"1429222f-2763-4f47-8bc9-ae3958b7b1d2\",\"status\":\"AVAILABLE\",\"sub_status\":\"available\",\"amount\":\"3900.00\",\"interest\":\"590.00\",\"tax\":\"94.40\",\"payback\":\"4584.40\",\"retention_rate\":\"22.0000\",\"expiration_date\":\"2020-03-16\",\"term_maximum\":4,\"created_at\":\"2020-02-27T10:45:29Z\"},{\"id\":\"af64b989-8d52-4833-a21a-707c879ad7b9\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"c8fcfeca-1029-46e1-9ed9-1457aa21de4b\",\"proxy_merchant_token\":\"1429222f-2763-4f47-8bc9-ae3958b7b1d2\",\"status\":\"AVAILABLE\",\"sub_status\":\"available\",\"amount\":\"2800.00\",\"interest\":\"470.00\",\"tax\":\"75.20\",\"payback\":\"3345.20\",\"retention_rate\":\"16.0000\",\"expiration_date\":\"2020-03-16\",\"term_maximum\":4,\"created_at\":\"2020-02-27T10:45:29Z\"}]"}	1588016784794
EVENTS	1588016843616	{"@timestamp":"2020-04-27T19:47:22.975Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 58393ec9-5c48-40ac-9fb2-df3db0eed82d "}	1588016842976
EVENTS	1588016843616	{"@timestamp":"2020-04-27T19:47:22.976Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 58393ec9-5c48-40ac-9fb2-df3db0eed82d"}	1588016842976
EVENTS	1588016843616	{"@timestamp":"2020-04-27T19:47:22.977Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 58393ec9-5c48-40ac-9fb2-df3db0eed82d: []"}	1588016842977
EVENTS	1588016858619	{"@timestamp":"2020-04-27T19:47:35.903Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 261486e3-6da2-4d20-9c31-19f16a30ac55 "}	1588016855904
EVENTS	1588016858619	{"@timestamp":"2020-04-27T19:47:35.904Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 261486e3-6da2-4d20-9c31-19f16a30ac55"}	1588016855904
EVENTS	1588016858619	{"@timestamp":"2020-04-27T19:47:35.906Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 261486e3-6da2-4d20-9c31-19f16a30ac55"}	1588016855906
EVENTS	1588016858619	{"@timestamp":"2020-04-27T19:47:35.907Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '261486e3-6da2-4d20-9c31-19f16a30ac55' and pre-approval: '5147b7bb-da1d-4f21-89e1-8325e2314b09'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588016855908
EVENTS	1588016858619	{"@timestamp":"2020-04-27T19:47:35.997Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588016855997
EVENTS	1588016858619	{"@timestamp":"2020-04-27T19:47:35.997Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588016855998
EVENTS	1588016858619	{"@timestamp":"2020-04-27T19:47:35.998Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 261486e3-6da2-4d20-9c31-19f16a30ac55"}	1588016855998
EVENTS	1588016858619	{"@timestamp":"2020-04-27T19:47:35.999Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '261486e3-6da2-4d20-9c31-19f16a30ac55' and pre-approval: '854239dd-317a-4d58-939d-fd0d5e28c173'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588016856000
EVENTS	1588016858619	{"@timestamp":"2020-04-27T19:47:36.041Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588016856042
EVENTS	1588016858619	{"@timestamp":"2020-04-27T19:47:36.042Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588016856042
EVENTS	1588016858619	{"@timestamp":"2020-04-27T19:47:36.042Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 261486e3-6da2-4d20-9c31-19f16a30ac55"}	1588016856043
EVENTS	1588016858619	{"@timestamp":"2020-04-27T19:47:36.044Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '261486e3-6da2-4d20-9c31-19f16a30ac55' and pre-approval: '8d96eca3-5fe5-4805-a1c4-012fab1e77da'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588016856044
EVENTS	1588016858619	{"@timestamp":"2020-04-27T19:47:36.085Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588016856086
EVENTS	1588016858619	{"@timestamp":"2020-04-27T19:47:36.086Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588016856086
EVENTS	1588016858619	{"@timestamp":"2020-04-27T19:47:36.086Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 261486e3-6da2-4d20-9c31-19f16a30ac55"}	1588016856086
EVENTS	1588016858619	{"@timestamp":"2020-04-27T19:47:36.088Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '261486e3-6da2-4d20-9c31-19f16a30ac55' and pre-approval: '24a9ddf8-f9ff-427d-af04-2c074cb91448'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588016856088
EVENTS	1588016858619	{"@timestamp":"2020-04-27T19:47:36.132Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588016856133
EVENTS	1588016858619	{"@timestamp":"2020-04-27T19:47:36.133Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588016856133
EVENTS	1588016858619	{"@timestamp":"2020-04-27T19:47:36.134Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 261486e3-6da2-4d20-9c31-19f16a30ac55"}	1588016856134
EVENTS	1588016858619	{"@timestamp":"2020-04-27T19:47:36.135Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '261486e3-6da2-4d20-9c31-19f16a30ac55' and pre-approval: 'a0e48d79-3698-4189-a1d4-e1ca12db00ae'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588016856135
EVENTS	1588016858619	{"@timestamp":"2020-04-27T19:47:36.187Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588016856187
EVENTS	1588016858619	{"@timestamp":"2020-04-27T19:47:36.187Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588016856188
EVENTS	1588016858619	{"@timestamp":"2020-04-27T19:47:36.188Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 261486e3-6da2-4d20-9c31-19f16a30ac55"}	1588016856188
EVENTS	1588016858619	{"@timestamp":"2020-04-27T19:47:36.189Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '261486e3-6da2-4d20-9c31-19f16a30ac55' and pre-approval: 'dcc110a2-070c-4c5b-a7e9-83ece1cee031'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588016856190
EVENTS	1588016858619	{"@timestamp":"2020-04-27T19:47:36.251Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588016856251
EVENTS	1588016858619	{"@timestamp":"2020-04-27T19:47:36.251Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588016856252
EVENTS	1588016858619	{"@timestamp":"2020-04-27T19:47:36.252Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 261486e3-6da2-4d20-9c31-19f16a30ac55"}	1588016856252
EVENTS	1588016858619	{"@timestamp":"2020-04-27T19:47:36.253Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '261486e3-6da2-4d20-9c31-19f16a30ac55' and pre-approval: '4437ac48-bd38-4bc5-ac22-d4ab502729e3'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588016856254
EVENTS	1588016858619	{"@timestamp":"2020-04-27T19:47:36.304Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588016856306
EVENTS	1588016858619	{"@timestamp":"2020-04-27T19:47:36.305Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588016856306
EVENTS	1588016858619	{"@timestamp":"2020-04-27T19:47:36.305Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 261486e3-6da2-4d20-9c31-19f16a30ac55"}	1588016856306
EVENTS	1588016858619	{"@timestamp":"2020-04-27T19:47:36.310Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '261486e3-6da2-4d20-9c31-19f16a30ac55' and pre-approval: 'dd86c850-700f-4e62-bf87-810387efde98'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588016856311
EVENTS	1588016858619	{"@timestamp":"2020-04-27T19:47:36.354Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588016856356
EVENTS	1588016858619	{"@timestamp":"2020-04-27T19:47:36.355Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588016856356
EVENTS	1588016858619	{"@timestamp":"2020-04-27T19:47:36.355Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 261486e3-6da2-4d20-9c31-19f16a30ac55"}	1588016856356
EVENTS	1588016858619	{"@timestamp":"2020-04-27T19:47:36.356Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '261486e3-6da2-4d20-9c31-19f16a30ac55' and pre-approval: 'ee9bee4c-0296-4598-8b45-8439aeb8f0db'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588016856357
EVENTS	1588016858619	{"@timestamp":"2020-04-27T19:47:36.396Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588016856397
EVENTS	1588016858619	{"@timestamp":"2020-04-27T19:47:36.397Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588016856397
EVENTS	1588016858619	{"@timestamp":"2020-04-27T19:47:36.397Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 261486e3-6da2-4d20-9c31-19f16a30ac55: [{\"id\":\"5147b7bb-da1d-4f21-89e1-8325e2314b09\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"261486e3-6da2-4d20-9c31-19f16a30ac55\",\"proxy_merchant_token\":\"dca3295d-5e3e-4534-bfe9-9aa0398d7ce5\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"50200.00\",\"interest\":\"5550.00\",\"tax\":\"888.00\",\"payback\":\"56638.00\",\"retention_rate\":\"15.0000\",\"expiration_date\":\"2019-11-13\",\"term_maximum\":4,\"created_at\":\"2019-10-30T00:09:23Z\"},{\"id\":\"854239dd-317a-4d58-939d-fd0d5e28c173\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"261486e3-6da2-4d20-9c31-19f16a30ac55\",\"proxy_merchant_token\":\"dca3295d-5e3e-4534-bfe9-9aa0398d7ce5\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"33500.00\",\"interest\":\"3670.00\",\"tax\":\"587.20\",\"payback\":\"37757.20\",\"retention_rate\":\"10.0000\",\"expiration_date\":\"2019-11-13\",\"term_maximum\":4,\"created_at\":\"2019-10-30T00:09:23Z\"},{\"id\":\"8d96eca3-5fe5-4805-a1c4-012fab1e77da\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"261486e3-6da2-4d20-9c31-19f16a30ac55\",\"proxy_merchant_token\":\"dca3295d-5e3e-4534-bfe9-9aa0398d7ce5\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"65000.00\",\"interest\":\"7218.98\",\"tax\":\"1155.04\",\"payback\":\"73374.02\",\"retention_rate\":\"19.0000\",\"expiration_date\":\"2019-11-13\",\"term_maximum\":4,\"created_at\":\"2019-10-30T00:09:23Z\"},{\"id\":\"24a9ddf8-f9ff-427d-af04-2c074cb91448\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"261486e3-6da2-4d20-9c31-19f16a30ac55\",\"proxy_merchant_token\":\"dca3295d-5e3e-4534-bfe9-9aa0398d7ce5\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"23300.00\",\"interest\":\"2400.00\",\"tax\":\"384.00\",\"payback\":\"26084.00\",\"retention_rate\":\"14.0000\",\"expiration_date\":\"2019-10-03\",\"term_maximum\":5,\"created_at\":\"2019-09-18T17:41:37Z\"},{\"id\":\"a0e48d79-3698-4189-a1d4-e1ca12db00ae\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"261486e3-6da2-4d20-9c31-19f16a30ac55\",\"proxy_merchant_token\":\"dca3295d-5e3e-4534-bfe9-9aa0398d7ce5\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"16600.00\",\"interest\":\"1760.00\",\"tax\":\"281.60\",\"payback\":\"18641.60\",\"retention_rate\":\"10.0000\",\"expiration_date\":\"2019-10-03\",\"term_maximum\":5,\"created_at\":\"2019-09-18T17:41:37Z\"},{\"id\":\"dcc110a2-070c-4c5b-a7e9-83ece1cee031\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"261486e3-6da2-4d20-9c31-19f16a30ac55\",\"proxy_merchant_token\":\"dca3295d-5e3e-4534-bfe9-9aa0398d7ce5\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"29900.00\",\"interest\":\"3140.00\",\"tax\":\"502.40\",\"payback\":\"33542.40\",\"retention_rate\":\"18.0000\",\"expiration_date\":\"2019-10-03\",\"term_maximum\":5,\"created_at\":\"2019-09-18T17:41:37Z\"},{\"id\":\"4437ac48-bd38-4bc5-ac22-d4ab502729e3\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"261486e3-6da2-4d20-9c31-19f16a30ac55\",\"proxy_merchant_token\":\"dca3295d-5e3e-4534-bfe9-9aa0398d7ce5\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"16600.00\",\"interest\":\"1760.00\",\"tax\":\"281.60\",\"payback\":\"18641.60\",\"retention_rate\":\"10.0000\",\"expiration_date\":\"2019-09-13\",\"term_maximum\":5,\"created_at\":\"2019-08-29T22:08:01Z\"},{\"id\":\"dd86c850-700f-4e62-bf87-810387efde98\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"261486e3-6da2-4d20-9c31-19f16a30ac55\",\"proxy_merchant_token\":\"dca3295d-5e3e-4534-bfe9-9aa0398d7ce5\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"23300.00\",\"interest\":\"2400.00\",\"tax\":\"384.00\",\"payback\":\"26084.00\",\"retention_rate\":\"14.0000\",\"expiration_date\":\"2019-09-13\",\"term_maximum\":5,\"created_at\":\"2019-08-29T22:08:01Z\"},{\"id\":\"ee9bee4c-0296-4598-8b45-8439aeb8f0db\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"261486e3-6da2-4d20-9c31-19f16a30ac55\",\"proxy_merchant_token\":\"dca3295d-5e3e-4534-bfe9-9aa0398d7ce5\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"29900.00\",\"interest\":\"3140.00\",\"tax\":\"502.40\",\"payback\":\"33542.40\",\"retention_rate\":\"18.0000\",\"expiration_date\":\"2019-09-13\",\"term_maximum\":5,\"created_at\":\"2019-08-29T22:08:01Z\"}]"}	1588016856400
EVENTS	1588016918618	{"@timestamp":"2020-04-27T19:48:35.988Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 6c8f350d-203d-4dc6-ad2c-1f20ea363fb7 "}	1588016915988
EVENTS	1588016918618	{"@timestamp":"2020-04-27T19:48:35.989Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 6c8f350d-203d-4dc6-ad2c-1f20ea363fb7"}	1588016915989
EVENTS	1588016918618	{"@timestamp":"2020-04-27T19:48:35.990Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 6c8f350d-203d-4dc6-ad2c-1f20ea363fb7: []"}	1588016915990
EVENTS	1588017063619	{"@timestamp":"2020-04-27T19:51:03.022Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 584d7172-1aa7-4d4d-93d4-66015ed9f9b8 "}	1588017063022
EVENTS	1588017063619	{"@timestamp":"2020-04-27T19:51:03.022Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 584d7172-1aa7-4d4d-93d4-66015ed9f9b8"}	1588017063023
EVENTS	1588017063619	{"@timestamp":"2020-04-27T19:51:03.025Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 584d7172-1aa7-4d4d-93d4-66015ed9f9b8: []"}	1588017063025
EVENTS	1588017078615	{"@timestamp":"2020-04-27T19:51:16.993Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token bd9e9b6c-cd3e-4eec-8a79-dd8ece5177e3 "}	1588017076994
EVENTS	1588017078615	{"@timestamp":"2020-04-27T19:51:16.994Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token bd9e9b6c-cd3e-4eec-8a79-dd8ece5177e3"}	1588017076994
EVENTS	1588017078615	{"@timestamp":"2020-04-27T19:51:16.995Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token bd9e9b6c-cd3e-4eec-8a79-dd8ece5177e3: []"}	1588017076995
EVENTS	1588017153616	{"@timestamp":"2020-04-27T19:52:31.764Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 2ae03c5d-fa54-4883-83e8-c6b0bf8e106b "}	1588017151764
EVENTS	1588017153616	{"@timestamp":"2020-04-27T19:52:31.764Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 2ae03c5d-fa54-4883-83e8-c6b0bf8e106b"}	1588017151765
EVENTS	1588017153616	{"@timestamp":"2020-04-27T19:52:31.765Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 2ae03c5d-fa54-4883-83e8-c6b0bf8e106b: []"}	1588017151766
EVENTS	1588017243615	{"@timestamp":"2020-04-27T19:54:02.095Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 50078e7e-293f-4441-9507-233d1ffa5444 "}	1588017242096
EVENTS	1588017243615	{"@timestamp":"2020-04-27T19:54:02.096Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 50078e7e-293f-4441-9507-233d1ffa5444"}	1588017242096
EVENTS	1588017243615	{"@timestamp":"2020-04-27T19:54:02.099Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 50078e7e-293f-4441-9507-233d1ffa5444: []"}	1588017242100
EVENTS	1588017623619	{"@timestamp":"2020-04-27T20:00:19.459Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token dee81584-ad68-4bdf-b7fb-586d30a2f022 "}	1588017619460
EVENTS	1588017623619	{"@timestamp":"2020-04-27T20:00:19.460Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token dee81584-ad68-4bdf-b7fb-586d30a2f022"}	1588017619460
EVENTS	1588017623619	{"@timestamp":"2020-04-27T20:00:19.461Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token dee81584-ad68-4bdf-b7fb-586d30a2f022: []"}	1588017619462
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:31.651Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token dbce92f4-6586-40c7-b6f9-faa0ca22d756 "}	1588017631652
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:31.652Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token dbce92f4-6586-40c7-b6f9-faa0ca22d756"}	1588017631652
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:31.654Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token dbce92f4-6586-40c7-b6f9-faa0ca22d756"}	1588017631655
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:31.656Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'dbce92f4-6586-40c7-b6f9-faa0ca22d756' and pre-approval: '0e0bb7d0-ab50-43f9-8548-6ebc5d028bcc'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588017631662
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:31.880Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"status\": \"available\"}"}	1588017631882
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:31.880Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token dbce92f4-6586-40c7-b6f9-faa0ca22d756"}	1588017631882
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:31.882Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'dbce92f4-6586-40c7-b6f9-faa0ca22d756' and pre-approval: '3b0a01ab-ace1-449f-89c2-99de3c4a9d8f'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588017631883
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:31.929Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"status\": \"available\"}"}	1588017631939
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:31.930Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token dbce92f4-6586-40c7-b6f9-faa0ca22d756"}	1588017631939
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:31.933Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'dbce92f4-6586-40c7-b6f9-faa0ca22d756' and pre-approval: '8986d8d3-fbba-4236-8ce1-5ab680fea9b8'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588017631939
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.021Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"status\": \"available\"}"}	1588017632021
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.021Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token dbce92f4-6586-40c7-b6f9-faa0ca22d756"}	1588017632021
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.023Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'dbce92f4-6586-40c7-b6f9-faa0ca22d756' and pre-approval: '4b90e7c1-885d-42f9-a293-26bf0bfbba15'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588017632023
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.186Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588017632187
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.187Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588017632187
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.187Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token dbce92f4-6586-40c7-b6f9-faa0ca22d756"}	1588017632188
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.189Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'dbce92f4-6586-40c7-b6f9-faa0ca22d756' and pre-approval: '6c1311ac-0341-4403-b0c6-e3b848cc857f'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588017632189
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.235Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588017632235
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.235Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588017632236
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.236Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token dbce92f4-6586-40c7-b6f9-faa0ca22d756"}	1588017632236
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.237Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'dbce92f4-6586-40c7-b6f9-faa0ca22d756' and pre-approval: 'c2a36b2a-55b8-456f-997f-f91a5661f574'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588017632238
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.281Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588017632282
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.282Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588017632282
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.282Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token dbce92f4-6586-40c7-b6f9-faa0ca22d756"}	1588017632282
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.284Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'dbce92f4-6586-40c7-b6f9-faa0ca22d756' and pre-approval: '45a1413c-c82f-49c6-97d5-2d668ea3ae88'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588017632284
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.336Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588017632337
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.337Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588017632337
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.337Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token dbce92f4-6586-40c7-b6f9-faa0ca22d756"}	1588017632337
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.339Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'dbce92f4-6586-40c7-b6f9-faa0ca22d756' and pre-approval: '5b6bacd0-14d3-41d3-bf77-9cbbcdc7dcfc'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588017632339
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.382Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588017632382
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.382Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588017632383
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.383Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token dbce92f4-6586-40c7-b6f9-faa0ca22d756"}	1588017632383
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.385Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'dbce92f4-6586-40c7-b6f9-faa0ca22d756' and pre-approval: 'a0f50b8e-b0c9-4f4a-b1e8-e4a05da548df'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588017632386
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.428Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588017632429
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.429Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588017632429
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.429Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token dbce92f4-6586-40c7-b6f9-faa0ca22d756"}	1588017632429
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.431Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'dbce92f4-6586-40c7-b6f9-faa0ca22d756' and pre-approval: '232ee8bc-1880-4a0d-9ba4-8b254996c157'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588017632431
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.472Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588017632472
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.472Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588017632472
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.473Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token dbce92f4-6586-40c7-b6f9-faa0ca22d756"}	1588017632473
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.474Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'dbce92f4-6586-40c7-b6f9-faa0ca22d756' and pre-approval: '6c541cfc-c210-49d1-bdc3-ae95aec1f05c'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588017632474
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.521Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588017632522
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.522Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588017632522
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.522Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token dbce92f4-6586-40c7-b6f9-faa0ca22d756"}	1588017632523
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.524Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'dbce92f4-6586-40c7-b6f9-faa0ca22d756' and pre-approval: 'e6dfbfb0-e965-4bd5-9046-634315226cae'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588017632525
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.564Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588017632564
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.565Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588017632565
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.565Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token dbce92f4-6586-40c7-b6f9-faa0ca22d756"}	1588017632565
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.567Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'dbce92f4-6586-40c7-b6f9-faa0ca22d756' and pre-approval: '4122b087-aaa8-421b-9397-6b3367ba68aa'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588017632567
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.612Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588017632612
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.612Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588017632613
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.613Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token dbce92f4-6586-40c7-b6f9-faa0ca22d756"}	1588017632613
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.614Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'dbce92f4-6586-40c7-b6f9-faa0ca22d756' and pre-approval: 'd9637f6b-aeda-4a7f-aab0-f87fe9fc5510'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588017632615
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.665Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588017632665
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.665Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588017632665
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.666Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token dbce92f4-6586-40c7-b6f9-faa0ca22d756"}	1588017632666
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.667Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'dbce92f4-6586-40c7-b6f9-faa0ca22d756' and pre-approval: 'f6a978f1-34ed-42a9-bf38-789b4ee2d4df'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588017632667
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.710Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588017632710
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.710Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588017632711
EVENTS	1588017633629	{"@timestamp":"2020-04-27T20:00:32.711Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token dbce92f4-6586-40c7-b6f9-faa0ca22d756: [{\"id\":\"0e0bb7d0-ab50-43f9-8548-6ebc5d028bcc\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"dbce92f4-6586-40c7-b6f9-faa0ca22d756\",\"proxy_merchant_token\":\"9101eb18-011e-463e-9957-de4f8c7f52e8\",\"status\":\"AVAILABLE\",\"sub_status\":\"available\",\"amount\":\"36300.00\",\"interest\":\"6440.00\",\"tax\":\"1030.40\",\"payback\":\"43770.40\",\"retention_rate\":\"14.0000\",\"expiration_date\":\"2020-03-16\",\"term_maximum\":5,\"created_at\":\"2020-02-27T11:40:13Z\"},{\"id\":\"3b0a01ab-ace1-449f-89c2-99de3c4a9d8f\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"dbce92f4-6586-40c7-b6f9-faa0ca22d756\",\"proxy_merchant_token\":\"9101eb18-011e-463e-9957-de4f8c7f52e8\",\"status\":\"AVAILABLE\",\"sub_status\":\"available\",\"amount\":\"25900.00\",\"interest\":\"4630.00\",\"tax\":\"740.80\",\"payback\":\"31270.80\",\"retention_rate\":\"10.0000\",\"expiration_date\":\"2020-03-16\",\"term_maximum\":5,\"created_at\":\"2020-02-27T11:40:13Z\"},{\"id\":\"8986d8d3-fbba-4236-8ce1-5ab680fea9b8\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"dbce92f4-6586-40c7-b6f9-faa0ca22d756\",\"proxy_merchant_token\":\"9101eb18-011e-463e-9957-de4f8c7f52e8\",\"status\":\"AVAILABLE\",\"sub_status\":\"available\",\"amount\":\"46700.00\",\"interest\":\"8260.00\",\"tax\":\"1321.60\",\"payback\":\"56281.60\",\"retention_rate\":\"18.0000\",\"expiration_date\":\"2020-03-16\",\"term_maximum\":5,\"created_at\":\"2020-02-27T11:40:13Z\"},{\"id\":\"4b90e7c1-885d-42f9-a293-26bf0bfbba15\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"dbce92f4-6586-40c7-b6f9-faa0ca22d756\",\"proxy_merchant_token\":\"9101eb18-011e-463e-9957-de4f8c7f52e8\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"31300.00\",\"interest\":\"4360.00\",\"tax\":\"697.60\",\"payback\":\"36357.60\",\"retention_rate\":\"14.0000\",\"expiration_date\":\"2020-02-22\",\"term_maximum\":4,\"created_at\":\"2020-02-07T07:11:11Z\"},{\"id\":\"6c1311ac-0341-4403-b0c6-e3b848cc857f\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"dbce92f4-6586-40c7-b6f9-faa0ca22d756\",\"proxy_merchant_token\":\"9101eb18-011e-463e-9957-de4f8c7f52e8\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"40300.00\",\"interest\":\"5550.00\",\"tax\":\"888.00\",\"payback\":\"46738.00\",\"retention_rate\":\"18.0000\",\"expiration_date\":\"2020-02-22\",\"term_maximum\":4,\"created_at\":\"2020-02-07T07:11:11Z\"},{\"id\":\"c2a36b2a-55b8-456f-997f-f91a5661f574\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"dbce92f4-6586-40c7-b6f9-faa0ca22d756\",\"proxy_merchant_token\":\"9101eb18-011e-463e-9957-de4f8c7f52e8\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"22400.00\",\"interest\":\"3070.00\",\"tax\":\"491.20\",\"payback\":\"25961.20\",\"retention_rate\":\"10.0000\",\"expiration_date\":\"2020-02-22\",\"term_maximum\":4,\"created_at\":\"2020-02-07T07:11:11Z\"},{\"id\":\"45a1413c-c82f-49c6-97d5-2d668ea3ae88\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"dbce92f4-6586-40c7-b6f9-faa0ca22d756\",\"proxy_merchant_token\":\"9101eb18-011e-463e-9957-de4f8c7f52e8\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"65000.00\",\"interest\":\"7212.15\",\"tax\":\"1153.94\",\"payback\":\"73366.10\",\"retention_rate\":\"8.0000\",\"expiration_date\":\"2019-11-13\",\"term_maximum\":5,\"created_at\":\"2019-10-30T00:43:34Z\"},{\"id\":\"5b6bacd0-14d3-41d3-bf77-9cbbcdc7dcfc\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"dbce92f4-6586-40c7-b6f9-faa0ca22d756\",\"proxy_merchant_token\":\"9101eb18-011e-463e-9957-de4f8c7f52e8\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"55000.00\",\"interest\":\"6119.98\",\"tax\":\"979.20\",\"payback\":\"62099.18\",\"retention_rate\":\"7.0000\",\"expiration_date\":\"2019-11-13\",\"term_maximum\":5,\"created_at\":\"2019-10-30T00:43:34Z\"},{\"id\":\"a0f50b8e-b0c9-4f4a-b1e8-e4a05da548df\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"dbce92f4-6586-40c7-b6f9-faa0ca22d756\",\"proxy_merchant_token\":\"9101eb18-011e-463e-9957-de4f8c7f52e8\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"45000.00\",\"interest\":\"4973.12\",\"tax\":\"795.70\",\"payback\":\"50768.82\",\"retention_rate\":\"5.0000\",\"expiration_date\":\"2019-11-13\",\"term_maximum\":5,\"created_at\":\"2019-10-30T00:43:34Z\"},{\"id\":\"232ee8bc-1880-4a0d-9ba4-8b254996c157\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"dbce92f4-6586-40c7-b6f9-faa0ca22d756\",\"proxy_merchant_token\":\"9101eb18-011e-463e-9957-de4f8c7f52e8\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"52400.00\",\"interest\":\"5490.00\",\"tax\":\"878.40\",\"payback\":\"58768.40\",\"retention_rate\":\"18.0000\",\"expiration_date\":\"2019-10-03\",\"term_maximum\":5,\"created_at\":\"2019-09-18T17:43:36Z\"},{\"id\":\"6c541cfc-c210-49d1-bdc3-ae95aec1f05c\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"dbce92f4-6586-40c7-b6f9-faa0ca22d756\",\"proxy_merchant_token\":\"9101eb18-011e-463e-9957-de4f8c7f52e8\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"40800.00\",\"interest\":\"4230.00\",\"tax\":\"676.80\",\"payback\":\"45706.80\",\"retention_rate\":\"14.0000\",\"expiration_date\":\"2019-10-03\",\"term_maximum\":5,\"created_at\":\"2019-09-18T17:43:36Z\"},{\"id\":\"e6dfbfb0-e965-4bd5-9046-634315226cae\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"dbce92f4-6586-40c7-b6f9-faa0ca22d756\",\"proxy_merchant_token\":\"9101eb18-011e-463e-9957-de4f8c7f52e8\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"29100.00\",\"interest\":\"3060.00\",\"tax\":\"489.60\",\"payback\":\"32649.60\",\"retention_rate\":\"10.0000\",\"expiration_date\":\"2019-10-03\",\"term_maximum\":5,\"created_at\":\"2019-09-18T17:43:36Z\"},{\"id\":\"4122b087-aaa8-421b-9397-6b3367ba68aa\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"dbce92f4-6586-40c7-b6f9-faa0ca22d756\",\"proxy_merchant_token\":\"9101eb18-011e-463e-9957-de4f8c7f52e8\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"29100.00\",\"interest\":\"3060.00\",\"tax\":\"489.60\",\"payback\":\"32649.60\",\"retention_rate\":\"10.0000\",\"expiration_date\":\"2019-09-13\",\"term_maximum\":5,\"created_at\":\"2019-08-29T22:09:56Z\"},{\"id\":\"d9637f6b-aeda-4a7f-aab0-f87fe9fc5510\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"dbce92f4-6586-40c7-b6f9-faa0ca22d756\",\"proxy_merchant_token\":\"9101eb18-011e-463e-9957-de4f8c7f52e8\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"40800.00\",\"interest\":\"4230.00\",\"tax\":\"676.80\",\"payback\":\"45706.80\",\"retention_rate\":\"14.0000\",\"expiration_date\":\"2019-09-13\",\"term_maximum\":5,\"created_at\":\"2019-08-29T22:09:56Z\"},{\"id\":\"f6a978f1-34ed-42a9-bf38-789b4ee2d4df\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"dbce92f4-6586-40c7-b6f9-faa0ca22d756\",\"proxy_merchant_token\":\"9101eb18-011e-463e-9957-de4f8c7f52e8\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"52400.00\",\"interest\":\"5490.00\",\"tax\":\"878.40\",\"payback\":\"58768.40\",\"retention_rate\":\"18.0000\",\"expiration_date\":\"2019-09-13\",\"term_maximum\":5,\"created_at\":\"2019-08-29T22:09:56Z\"}]"}	1588017632715
EVENTS	1588017918613	{"@timestamp":"2020-04-27T20:05:15.818Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 52d59c36-a107-4d1b-a4dd-ddb7fe10b537 "}	1588017915818
EVENTS	1588017918613	{"@timestamp":"2020-04-27T20:05:15.818Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 52d59c36-a107-4d1b-a4dd-ddb7fe10b537"}	1588017915819
EVENTS	1588017918613	{"@timestamp":"2020-04-27T20:05:15.820Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 52d59c36-a107-4d1b-a4dd-ddb7fe10b537: []"}	1588017915821
EVENTS	1588017973619	{"@timestamp":"2020-04-27T20:06:12.126Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token e57bfea2-d5e2-4d66-98c0-8ddd3e7e7efd "}	1588017972126
EVENTS	1588017973619	{"@timestamp":"2020-04-27T20:06:12.126Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token e57bfea2-d5e2-4d66-98c0-8ddd3e7e7efd"}	1588017972127
EVENTS	1588017973619	{"@timestamp":"2020-04-27T20:06:12.128Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token e57bfea2-d5e2-4d66-98c0-8ddd3e7e7efd: []"}	1588017972128
EVENTS	1588018108617	{"@timestamp":"2020-04-27T20:08:24.480Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 9b17e862-24e7-40cc-85ba-b5c4724d9b2a "}	1588018104481
EVENTS	1588018108617	{"@timestamp":"2020-04-27T20:08:24.481Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 9b17e862-24e7-40cc-85ba-b5c4724d9b2a"}	1588018104481
EVENTS	1588018108617	{"@timestamp":"2020-04-27T20:08:24.482Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 9b17e862-24e7-40cc-85ba-b5c4724d9b2a: []"}	1588018104483
EVENTS	1588018238619	{"@timestamp":"2020-04-27T20:10:38.165Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token bacfc59d-3fde-4fc6-ad91-c4e2ac494576 "}	1588018238165
EVENTS	1588018238619	{"@timestamp":"2020-04-27T20:10:38.165Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token bacfc59d-3fde-4fc6-ad91-c4e2ac494576"}	1588018238166
EVENTS	1588018238619	{"@timestamp":"2020-04-27T20:10:38.166Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token bacfc59d-3fde-4fc6-ad91-c4e2ac494576: []"}	1588018238167
EVENTS	1588018268619	{"@timestamp":"2020-04-27T20:11:06.746Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token dcc919f2-1579-42d8-a080-0d765f4a1f82 "}	1588018266747
EVENTS	1588018268619	{"@timestamp":"2020-04-27T20:11:06.747Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token dcc919f2-1579-42d8-a080-0d765f4a1f82"}	1588018266747
EVENTS	1588018268619	{"@timestamp":"2020-04-27T20:11:06.749Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token dcc919f2-1579-42d8-a080-0d765f4a1f82"}	1588018266749
EVENTS	1588018268619	{"@timestamp":"2020-04-27T20:11:06.750Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'dcc919f2-1579-42d8-a080-0d765f4a1f82' and pre-approval: 'cfc519fe-7c87-4f64-b19c-19ecd8c11660'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588018266763
EVENTS	1588018268619	{"@timestamp":"2020-04-27T20:11:06.839Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"invalid_user\",\"error_description\":\"404 Parameter Not Found: Merchant_ID\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588018266841
EVENTS	1588018268619	{"@timestamp":"2020-04-27T20:11:06.840Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"invalid_user\",\"error_description\":\"404 Parameter Not Found: Merchant_ID\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588018266841
EVENTS	1588018268619	{"@timestamp":"2020-04-27T20:11:06.841Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token dcc919f2-1579-42d8-a080-0d765f4a1f82"}	1588018266841
EVENTS	1588018268619	{"@timestamp":"2020-04-27T20:11:06.844Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'dcc919f2-1579-42d8-a080-0d765f4a1f82' and pre-approval: 'dd4a1a5f-e33c-441f-a42b-355542060e74'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588018266845
EVENTS	1588018268619	{"@timestamp":"2020-04-27T20:11:06.882Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"invalid_user\",\"error_description\":\"404 Parameter Not Found: Merchant_ID\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588018266883
EVENTS	1588018268619	{"@timestamp":"2020-04-27T20:11:06.883Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"invalid_user\",\"error_description\":\"404 Parameter Not Found: Merchant_ID\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588018266883
EVENTS	1588018268619	{"@timestamp":"2020-04-27T20:11:06.884Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token dcc919f2-1579-42d8-a080-0d765f4a1f82"}	1588018266884
EVENTS	1588018268619	{"@timestamp":"2020-04-27T20:11:06.885Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'dcc919f2-1579-42d8-a080-0d765f4a1f82' and pre-approval: 'de658cd8-ac73-4f85-b2e4-c3fbc39139ad'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588018266886
EVENTS	1588018268619	{"@timestamp":"2020-04-27T20:11:06.919Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"invalid_user\",\"error_description\":\"404 Parameter Not Found: Merchant_ID\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588018266919
EVENTS	1588018268619	{"@timestamp":"2020-04-27T20:11:06.919Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"invalid_user\",\"error_description\":\"404 Parameter Not Found: Merchant_ID\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588018266920
EVENTS	1588018268619	{"@timestamp":"2020-04-27T20:11:06.920Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token dcc919f2-1579-42d8-a080-0d765f4a1f82: [{\"id\":\"cfc519fe-7c87-4f64-b19c-19ecd8c11660\",\"loan\":null,\"provider_code\":\"MOT\",\"provider_id\":null,\"merchant_token\":\"dcc919f2-1579-42d8-a080-0d765f4a1f82\",\"proxy_merchant_token\":\"114ec883-06e0-404d-9fba-6f7627177558\",\"status\":\"AVAILABLE\",\"sub_status\":\"\",\"amount\":\"7000.00\",\"interest\":\"700.00\",\"tax\":\"112.00\",\"payback\":\"7812.00\",\"retention_rate\":\"186.0868\",\"expiration_date\":\"2020-04-28\",\"term_maximum\":1,\"created_at\":\"2020-04-14T00:20:33Z\"},{\"id\":\"dd4a1a5f-e33c-441f-a42b-355542060e74\",\"loan\":null,\"provider_code\":\"MOT\",\"provider_id\":null,\"merchant_token\":\"dcc919f2-1579-42d8-a080-0d765f4a1f82\",\"proxy_merchant_token\":\"114ec883-06e0-404d-9fba-6f7627177558\",\"status\":\"AVAILABLE\",\"sub_status\":\"\",\"amount\":\"5000.00\",\"interest\":\"500.00\",\"tax\":\"80.00\",\"payback\":\"5580.00\",\"retention_rate\":\"132.9192\",\"expiration_date\":\"2020-04-28\",\"term_maximum\":1,\"created_at\":\"2020-04-14T00:20:33Z\"},{\"id\":\"de658cd8-ac73-4f85-b2e4-c3fbc39139ad\",\"loan\":null,\"provider_code\":\"MOT\",\"provider_id\":null,\"merchant_token\":\"dcc919f2-1579-42d8-a080-0d765f4a1f82\",\"proxy_merchant_token\":\"114ec883-06e0-404d-9fba-6f7627177558\",\"status\":\"AVAILABLE\",\"sub_status\":\"\",\"amount\":\"10000.00\",\"interest\":\"1000.00\",\"tax\":\"160.00\",\"payback\":\"11160.00\",\"retention_rate\":\"265.8383\",\"expiration_date\":\"2020-04-28\",\"term_maximum\":1,\"created_at\":\"2020-04-14T00:20:33Z\"}]"}	1588018266922
EVENTS	1588018283618	{"@timestamp":"2020-04-27T20:11:23.411Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token f2650739-c01f-47fd-b89e-2601410a5d40 "}	1588018283411
EVENTS	1588018283618	{"@timestamp":"2020-04-27T20:11:23.411Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token f2650739-c01f-47fd-b89e-2601410a5d40"}	1588018283412
EVENTS	1588018283618	{"@timestamp":"2020-04-27T20:11:23.413Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token f2650739-c01f-47fd-b89e-2601410a5d40: []"}	1588018283413
EVENTS	1588018518617	{"@timestamp":"2020-04-27T20:15:18.017Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 069c67fb-486d-43cb-92e0-51fe5690b333 "}	1588018518017
EVENTS	1588018518617	{"@timestamp":"2020-04-27T20:15:18.017Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 069c67fb-486d-43cb-92e0-51fe5690b333"}	1588018518018
EVENTS	1588018518617	{"@timestamp":"2020-04-27T20:15:18.019Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 069c67fb-486d-43cb-92e0-51fe5690b333: []"}	1588018518019
EVENTS	1588018523620	{"@timestamp":"2020-04-27T20:15:20.204Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token a9a0c340-9403-43bc-9ce0-cd98933494bc "}	1588018520205
EVENTS	1588018523620	{"@timestamp":"2020-04-27T20:15:20.205Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token a9a0c340-9403-43bc-9ce0-cd98933494bc"}	1588018520205
EVENTS	1588018523620	{"@timestamp":"2020-04-27T20:15:20.208Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token a9a0c340-9403-43bc-9ce0-cd98933494bc"}	1588018520209
EVENTS	1588018523620	{"@timestamp":"2020-04-27T20:15:20.210Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'a9a0c340-9403-43bc-9ce0-cd98933494bc' and pre-approval: '45217295-d64d-4e80-b0d3-f145f13b8583'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588018520210
EVENTS	1588018523620	{"@timestamp":"2020-04-27T20:15:20.299Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"status\": \"available\"}"}	1588018520299
EVENTS	1588018523620	{"@timestamp":"2020-04-27T20:15:20.299Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token a9a0c340-9403-43bc-9ce0-cd98933494bc"}	1588018520299
EVENTS	1588018523620	{"@timestamp":"2020-04-27T20:15:20.301Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'a9a0c340-9403-43bc-9ce0-cd98933494bc' and pre-approval: '6560f2e8-fc24-4a4d-8d3a-2e074052cfaf'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588018520301
EVENTS	1588018523620	{"@timestamp":"2020-04-27T20:15:20.391Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"status\": \"available\"}"}	1588018520392
EVENTS	1588018523620	{"@timestamp":"2020-04-27T20:15:20.392Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token a9a0c340-9403-43bc-9ce0-cd98933494bc"}	1588018520392
EVENTS	1588018523620	{"@timestamp":"2020-04-27T20:15:20.393Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'a9a0c340-9403-43bc-9ce0-cd98933494bc' and pre-approval: '71427b8e-ecfa-4799-96cc-413c302de786'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588018520393
EVENTS	1588018523620	{"@timestamp":"2020-04-27T20:15:20.446Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"status\": \"available\"}"}	1588018520446
EVENTS	1588018523620	{"@timestamp":"2020-04-27T20:15:20.446Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token a9a0c340-9403-43bc-9ce0-cd98933494bc"}	1588018520447
EVENTS	1588018523620	{"@timestamp":"2020-04-27T20:15:20.448Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'a9a0c340-9403-43bc-9ce0-cd98933494bc' and pre-approval: '44b15159-d1c4-4b67-ac0f-4b26d9ee5577'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588018520448
EVENTS	1588018523620	{"@timestamp":"2020-04-27T20:15:20.504Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588018520504
EVENTS	1588018523620	{"@timestamp":"2020-04-27T20:15:20.505Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588018520505
EVENTS	1588018523620	{"@timestamp":"2020-04-27T20:15:20.505Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token a9a0c340-9403-43bc-9ce0-cd98933494bc"}	1588018520505
EVENTS	1588018523620	{"@timestamp":"2020-04-27T20:15:20.507Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'a9a0c340-9403-43bc-9ce0-cd98933494bc' and pre-approval: 'ceff0bbf-1d18-443c-808c-2945ae0b9c43'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588018520507
EVENTS	1588018523620	{"@timestamp":"2020-04-27T20:15:20.563Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588018520564
EVENTS	1588018523620	{"@timestamp":"2020-04-27T20:15:20.564Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588018520564
EVENTS	1588018523620	{"@timestamp":"2020-04-27T20:15:20.564Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token a9a0c340-9403-43bc-9ce0-cd98933494bc"}	1588018520564
EVENTS	1588018523620	{"@timestamp":"2020-04-27T20:15:20.566Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'a9a0c340-9403-43bc-9ce0-cd98933494bc' and pre-approval: 'fb950f0a-b611-4307-9b45-411b8dfd10ad'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588018520566
EVENTS	1588018523620	{"@timestamp":"2020-04-27T20:15:20.611Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588018520611
EVENTS	1588018523620	{"@timestamp":"2020-04-27T20:15:20.611Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588018520612
EVENTS	1588018523620	{"@timestamp":"2020-04-27T20:15:20.612Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token a9a0c340-9403-43bc-9ce0-cd98933494bc: [{\"id\":\"45217295-d64d-4e80-b0d3-f145f13b8583\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"a9a0c340-9403-43bc-9ce0-cd98933494bc\",\"proxy_merchant_token\":\"e1d6302e-5cc6-4ba7-afca-694c4e1a1128\",\"status\":\"EXPIRED\",\"sub_status\":\"available\",\"amount\":\"1700.00\",\"interest\":\"340.00\",\"tax\":\"54.40\",\"payback\":\"2094.40\",\"retention_rate\":\"10.0000\",\"expiration_date\":\"2020-02-22\",\"term_maximum\":4,\"created_at\":\"2020-02-07T05:07:17Z\"},{\"id\":\"6560f2e8-fc24-4a4d-8d3a-2e074052cfaf\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"a9a0c340-9403-43bc-9ce0-cd98933494bc\",\"proxy_merchant_token\":\"e1d6302e-5cc6-4ba7-afca-694c4e1a1128\",\"status\":\"EXPIRED\",\"sub_status\":\"available\",\"amount\":\"3100.00\",\"interest\":\"570.00\",\"tax\":\"91.20\",\"payback\":\"3761.20\",\"retention_rate\":\"18.0000\",\"expiration_date\":\"2020-02-22\",\"term_maximum\":4,\"created_at\":\"2020-02-07T05:07:17Z\"},{\"id\":\"71427b8e-ecfa-4799-96cc-413c302de786\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"a9a0c340-9403-43bc-9ce0-cd98933494bc\",\"proxy_merchant_token\":\"e1d6302e-5cc6-4ba7-afca-694c4e1a1128\",\"status\":\"EXPIRED\",\"sub_status\":\"available\",\"amount\":\"2400.00\",\"interest\":\"460.00\",\"tax\":\"73.60\",\"payback\":\"2933.60\",\"retention_rate\":\"14.0000\",\"expiration_date\":\"2020-02-22\",\"term_maximum\":4,\"created_at\":\"2020-02-07T05:07:17Z\"},{\"id\":\"44b15159-d1c4-4b67-ac0f-4b26d9ee5577\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"a9a0c340-9403-43bc-9ce0-cd98933494bc\",\"proxy_merchant_token\":\"e1d6302e-5cc6-4ba7-afca-694c4e1a1128\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"2400.00\",\"interest\":\"430.00\",\"tax\":\"68.80\",\"payback\":\"2898.80\",\"retention_rate\":\"14.0000\",\"expiration_date\":\"2020-01-21\",\"term_maximum\":6,\"created_at\":\"2019-12-13T19:47:11Z\"},{\"id\":\"ceff0bbf-1d18-443c-808c-2945ae0b9c43\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"a9a0c340-9403-43bc-9ce0-cd98933494bc\",\"proxy_merchant_token\":\"e1d6302e-5cc6-4ba7-afca-694c4e1a1128\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"1600.00\",\"interest\":\"260.00\",\"tax\":\"41.60\",\"payback\":\"1901.60\",\"retention_rate\":\"10.0000\",\"expiration_date\":\"2020-01-21\",\"term_maximum\":5,\"created_at\":\"2019-12-13T19:47:11Z\"},{\"id\":\"fb950f0a-b611-4307-9b45-411b8dfd10ad\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"a9a0c340-9403-43bc-9ce0-cd98933494bc\",\"proxy_merchant_token\":\"e1d6302e-5cc6-4ba7-afca-694c4e1a1128\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"3400.00\",\"interest\":\"520.00\",\"tax\":\"83.20\",\"payback\":\"4003.20\",\"retention_rate\":\"18.0000\",\"expiration_date\":\"2020-01-21\",\"term_maximum\":7,\"created_at\":\"2019-12-13T19:47:11Z\"}]"}	1588018520613
EVENTS	1588018638616	{"@timestamp":"2020-04-27T20:17:16.068Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 6e1beb95-4b88-41a4-978c-479dd072d395 "}	1588018636069
EVENTS	1588018638616	{"@timestamp":"2020-04-27T20:17:16.069Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 6e1beb95-4b88-41a4-978c-479dd072d395"}	1588018636069
EVENTS	1588018638616	{"@timestamp":"2020-04-27T20:17:16.070Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 6e1beb95-4b88-41a4-978c-479dd072d395: []"}	1588018636070
EVENTS	1588018663637	{"@timestamp":"2020-04-27T20:17:39.192Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 1a57d493-9112-432f-a125-36f64d3f3fa2 "}	1588018659193
EVENTS	1588018663637	{"@timestamp":"2020-04-27T20:17:39.192Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 1a57d493-9112-432f-a125-36f64d3f3fa2"}	1588018659193
EVENTS	1588018663637	{"@timestamp":"2020-04-27T20:17:39.194Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 1a57d493-9112-432f-a125-36f64d3f3fa2: []"}	1588018659194
EVENTS	1588018963612	{"@timestamp":"2020-04-27T20:22:43.387Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 6c8f350d-203d-4dc6-ad2c-1f20ea363fb7 "}	1588018963387
EVENTS	1588018963612	{"@timestamp":"2020-04-27T20:22:43.387Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 6c8f350d-203d-4dc6-ad2c-1f20ea363fb7"}	1588018963388
EVENTS	1588018963612	{"@timestamp":"2020-04-27T20:22:43.388Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 6c8f350d-203d-4dc6-ad2c-1f20ea363fb7: []"}	1588018963388
EVENTS	1588019118620	{"@timestamp":"2020-04-27T20:25:14.695Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token c55cac90-b8e2-4334-822d-a3b33d1561c2 "}	1588019114695
EVENTS	1588019118620	{"@timestamp":"2020-04-27T20:25:14.696Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token c55cac90-b8e2-4334-822d-a3b33d1561c2"}	1588019114696
EVENTS	1588019118620	{"@timestamp":"2020-04-27T20:25:14.703Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token c55cac90-b8e2-4334-822d-a3b33d1561c2"}	1588019114704
EVENTS	1588019118620	{"@timestamp":"2020-04-27T20:25:14.706Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'c55cac90-b8e2-4334-822d-a3b33d1561c2' and pre-approval: '137d7af6-c4a7-4c3a-9571-6aba1ba9a7bd'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588019114707
EVENTS	1588019118620	{"@timestamp":"2020-04-27T20:25:14.837Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"invalid_user\",\"error_description\":\"404 Parameter Not Found: Merchant_ID\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588019114837
EVENTS	1588019118620	{"@timestamp":"2020-04-27T20:25:14.838Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"invalid_user\",\"error_description\":\"404 Parameter Not Found: Merchant_ID\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588019114838
EVENTS	1588019118620	{"@timestamp":"2020-04-27T20:25:14.838Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token c55cac90-b8e2-4334-822d-a3b33d1561c2"}	1588019114839
EVENTS	1588019118620	{"@timestamp":"2020-04-27T20:25:14.840Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'c55cac90-b8e2-4334-822d-a3b33d1561c2' and pre-approval: 'cec6ddba-cabc-41b0-a484-8b3c23198484'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588019114841
EVENTS	1588019118620	{"@timestamp":"2020-04-27T20:25:14.896Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"invalid_user\",\"error_description\":\"404 Parameter Not Found: Merchant_ID\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588019114897
EVENTS	1588019118620	{"@timestamp":"2020-04-27T20:25:14.896Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"invalid_user\",\"error_description\":\"404 Parameter Not Found: Merchant_ID\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588019114897
EVENTS	1588019118620	{"@timestamp":"2020-04-27T20:25:14.897Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token c55cac90-b8e2-4334-822d-a3b33d1561c2"}	1588019114897
EVENTS	1588019118620	{"@timestamp":"2020-04-27T20:25:14.898Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'c55cac90-b8e2-4334-822d-a3b33d1561c2' and pre-approval: 'd3cbc672-0f7c-41bc-aede-04cc52a23dd9'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588019114899
EVENTS	1588019118620	{"@timestamp":"2020-04-27T20:25:14.951Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"invalid_user\",\"error_description\":\"404 Parameter Not Found: Merchant_ID\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588019114952
EVENTS	1588019118620	{"@timestamp":"2020-04-27T20:25:14.952Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"invalid_user\",\"error_description\":\"404 Parameter Not Found: Merchant_ID\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588019114952
EVENTS	1588019118620	{"@timestamp":"2020-04-27T20:25:14.953Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token c55cac90-b8e2-4334-822d-a3b33d1561c2: [{\"id\":\"137d7af6-c4a7-4c3a-9571-6aba1ba9a7bd\",\"loan\":null,\"provider_code\":\"MOT\",\"provider_id\":null,\"merchant_token\":\"c55cac90-b8e2-4334-822d-a3b33d1561c2\",\"proxy_merchant_token\":\"bed8c25e-c95c-4fe1-80a8-bdd0cb4ec109\",\"status\":\"AVAILABLE\",\"sub_status\":\"\",\"amount\":\"5000.00\",\"interest\":\"500.00\",\"tax\":\"80.00\",\"payback\":\"5580.00\",\"retention_rate\":\"3.6526\",\"expiration_date\":\"2020-05-01\",\"term_maximum\":1,\"created_at\":\"2020-04-16T15:03:41Z\"},{\"id\":\"cec6ddba-cabc-41b0-a484-8b3c23198484\",\"loan\":null,\"provider_code\":\"MOT\",\"provider_id\":null,\"merchant_token\":\"c55cac90-b8e2-4334-822d-a3b33d1561c2\",\"proxy_merchant_token\":\"bed8c25e-c95c-4fe1-80a8-bdd0cb4ec109\",\"status\":\"AVAILABLE\",\"sub_status\":\"\",\"amount\":\"7000.00\",\"interest\":\"700.00\",\"tax\":\"112.00\",\"payback\":\"7812.00\",\"retention_rate\":\"5.1136\",\"expiration_date\":\"2020-05-01\",\"term_maximum\":1,\"created_at\":\"2020-04-16T15:03:41Z\"},{\"id\":\"d3cbc672-0f7c-41bc-aede-04cc52a23dd9\",\"loan\":null,\"provider_code\":\"MOT\",\"provider_id\":null,\"merchant_token\":\"c55cac90-b8e2-4334-822d-a3b33d1561c2\",\"proxy_merchant_token\":\"bed8c25e-c95c-4fe1-80a8-bdd0cb4ec109\",\"status\":\"AVAILABLE\",\"sub_status\":\"\",\"amount\":\"10000.00\",\"interest\":\"1000.00\",\"tax\":\"160.00\",\"payback\":\"11160.00\",\"retention_rate\":\"7.3052\",\"expiration_date\":\"2020-05-01\",\"term_maximum\":1,\"created_at\":\"2020-04-16T15:03:41Z\"}]"}	1588019114953
EVENTS	1588019308624	{"@timestamp":"2020-04-27T20:28:24.933Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.CollectionsHandler","method":"onCollectionsMessage","file":"CollectionsHandler.java","line":36,"message":"Request for merchant token 2bd2b6f9-a229-4e43-90a1-80f1a5c546a5: {\"merchant_token\": \"2bd2b6f9-a229-4e43-90a1-80f1a5c546a5\", \"loan_id\": \"1cb193f2-fab2-4bc4-858c-67282671d328\", limit: 7}"}	1588019304934
EVENTS	1588019308624	{"@timestamp":"2020-04-27T20:28:24.934Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.dao.CollectionsDaoImpl","method":"findCollectionsByMerchantToken","file":"CollectionsDaoImpl.java","line":98,"message":"loanId: 1cb193f2-fab2-4bc4-858c-67282671d328, merchantToken: 2bd2b6f9-a229-4e43-90a1-80f1a5c546a5, numberRows: 7"}	1588019304934
EVENTS	1588019308624	{"@timestamp":"2020-04-27T20:28:24.937Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.CollectionsHandler","method":"onCollectionsMessage","file":"CollectionsHandler.java","line":44,"message":"Response for merchant token 2bd2b6f9-a229-4e43-90a1-80f1a5c546a5: [{\"loan_id\":\"1cb193f2-fab2-4bc4-858c-67282671d328\",\"collection_date_local\":\"2020-04-27\",\"provider_code\":\"MRP\",\"merchant_token\":\"2bd2b6f9-a229-4e43-90a1-80f1a5c546a5\",\"proxy_merchant_token\":\"5db88b32-c354-4585-8b2d-bc2ffb60685a\",\"amount\":\"564.65\",\"capital\":\"492.04357067\",\"interest\":\"72.60642933\",\"tax\":\"0E-8\",\"overdue_interest\":\"0.00\",\"submited_date_local\":null,\"notes\":null,\"created_at\":\"2020-04-27T13:45:54Z\",\"updated_at\":\"2020-04-27T13:45:54Z\"},{\"loan_id\":\"1cb193f2-fab2-4bc4-858c-67282671d328\",\"collection_date_local\":\"2020-04-24\",\"provider_code\":\"MRP\",\"merchant_token\":\"2bd2b6f9-a229-4e43-90a1-80f1a5c546a5\",\"proxy_merchant_token\":\"5db88b32-c354-4585-8b2d-bc2ffb60685a\",\"amount\":\"2.88\",\"capital\":\"2.50967056\",\"interest\":\"0.37032944\",\"tax\":\"0E-8\",\"overdue_interest\":\"0.00\",\"submited_date_local\":null,\"notes\":null,\"created_at\":\"2020-04-24T11:45:31Z\",\"updated_at\":\"2020-04-24T11:45:31Z\"},{\"loan_id\":\"1cb193f2-fab2-4bc4-858c-67282671d328\",\"collection_date_local\":\"2020-04-15\",\"provider_code\":\"MRP\",\"merchant_token\":\"2bd2b6f9-a229-4e43-90a1-80f1a5c546a5\",\"proxy_merchant_token\":\"5db88b32-c354-4585-8b2d-bc2ffb60685a\",\"amount\":\"2.70\",\"capital\":\"2.35281615\",\"interest\":\"0.34718385\",\"tax\":\"0E-8\",\"overdue_interest\":\"0.00\",\"submited_date_local\":null,\"notes\":null,\"created_at\":\"2020-04-15T11:45:32Z\",\"updated_at\":\"2020-04-15T11:45:32Z\"},{\"loan_id\":\"1cb193f2-fab2-4bc4-858c-67282671d328\",\"collection_date_local\":\"2020-04-14\",\"provider_code\":\"MRP\",\"merchant_token\":\"2bd2b6f9-a229-4e43-90a1-80f1a5c546a5\",\"proxy_merchant_token\":\"5db88b32-c354-4585-8b2d-bc2ffb60685a\",\"amount\":\"0.54\",\"capital\":\"0.47056323\",\"interest\":\"0.06943677\",\"tax\":\"0E-8\",\"overdue_interest\":\"0.00\",\"submited_date_local\":null,\"notes\":null,\"created_at\":\"2020-04-14T11:45:32Z\",\"updated_at\":\"2020-04-14T11:45:32Z\"},{\"loan_id\":\"1cb193f2-fab2-4bc4-858c-67282671d328\",\"collection_date_local\":\"2020-04-13\",\"provider_code\":\"MRP\",\"merchant_token\":\"2bd2b6f9-a229-4e43-90a1-80f1a5c546a5\",\"proxy_merchant_token\":\"5db88b32-c354-4585-8b2d-bc2ffb60685a\",\"amount\":\"3.96\",\"capital\":\"3.45079702\",\"interest\":\"0.50920298\",\"tax\":\"0E-8\",\"overdue_interest\":\"0.00\",\"submited_date_local\":null,\"notes\":null,\"created_at\":\"2020-04-13T13:45:41Z\",\"updated_at\":\"2020-04-13T13:45:41Z\"},{\"loan_id\":\"1cb193f2-fab2-4bc4-858c-67282671d328\",\"collection_date_local\":\"2020-04-10\",\"provider_code\":\"MRP\",\"merchant_token\":\"2bd2b6f9-a229-4e43-90a1-80f1a5c546a5\",\"proxy_merchant_token\":\"5db88b32-c354-4585-8b2d-bc2ffb60685a\",\"amount\":\"2.70\",\"capital\":\"2.35281615\",\"interest\":\"0.34718385\",\"tax\":\"0E-8\",\"overdue_interest\":\"0.00\",\"submited_date_local\":null,\"notes\":null,\"created_at\":\"2020-04-10T11:45:30Z\",\"updated_at\":\"2020-04-10T11:45:30Z\"},{\"loan_id\":\"1cb193f2-fab2-4bc4-858c-67282671d328\",\"collection_date_local\":\"2020-04-07\",\"provider_code\":\"MRP\",\"merchant_token\":\"2bd2b6f9-a229-4e43-90a1-80f1a5c546a5\",\"proxy_merchant_token\":\"5db88b32-c354-4585-8b2d-bc2ffb60685a\",\"amount\":\"258.72\",\"capital\":\"225.45207226\",\"interest\":\"33.26792774\",\"tax\":\"0E-8\",\"overdue_interest\":\"0.00\",\"submited_date_local\":null,\"notes\":null,\"created_at\":\"2020-04-07T11:45:35Z\",\"updated_at\":\"2020-04-08T16:43:31Z\"}]"}	1588019304939
EVENTS	1588019323620	{"@timestamp":"2020-04-27T20:28:38.845Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 733e8575-9849-462c-8085-081c1520b154 "}	1588019318845
EVENTS	1588019323620	{"@timestamp":"2020-04-27T20:28:38.845Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 733e8575-9849-462c-8085-081c1520b154"}	1588019318845
EVENTS	1588019323620	{"@timestamp":"2020-04-27T20:28:38.846Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 733e8575-9849-462c-8085-081c1520b154: []"}	1588019318846
EVENTS	1588019338618	{"@timestamp":"2020-04-27T20:28:57.671Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 58a76e9c-0c19-4da3-85d7-994d575e4447 "}	1588019337671
EVENTS	1588019338618	{"@timestamp":"2020-04-27T20:28:57.671Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 58a76e9c-0c19-4da3-85d7-994d575e4447"}	1588019337671
EVENTS	1588019338618	{"@timestamp":"2020-04-27T20:28:57.673Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 58a76e9c-0c19-4da3-85d7-994d575e4447"}	1588019337673
EVENTS	1588019338618	{"@timestamp":"2020-04-27T20:28:57.674Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '58a76e9c-0c19-4da3-85d7-994d575e4447' and pre-approval: '123313d1-f1a8-43e1-8302-02bf99fed2fa'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588019337674
EVENTS	1588019338618	{"@timestamp":"2020-04-27T20:28:57.767Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"status\": \"available\"}"}	1588019337767
EVENTS	1588019338618	{"@timestamp":"2020-04-27T20:28:57.767Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 58a76e9c-0c19-4da3-85d7-994d575e4447"}	1588019337768
EVENTS	1588019338618	{"@timestamp":"2020-04-27T20:28:57.769Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '58a76e9c-0c19-4da3-85d7-994d575e4447' and pre-approval: '8a47ebc7-68e8-4c04-ac8e-71108ad240d6'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588019337769
EVENTS	1588019338618	{"@timestamp":"2020-04-27T20:28:57.854Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"status\": \"available\"}"}	1588019337854
EVENTS	1588019338618	{"@timestamp":"2020-04-27T20:28:57.854Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token 58a76e9c-0c19-4da3-85d7-994d575e4447"}	1588019337854
EVENTS	1588019338618	{"@timestamp":"2020-04-27T20:28:57.855Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token '58a76e9c-0c19-4da3-85d7-994d575e4447' and pre-approval: 'b399067e-139e-4b14-be6b-f5533d9b5f67'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588019337856
EVENTS	1588019338618	{"@timestamp":"2020-04-27T20:28:57.900Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"status\": \"available\"}"}	1588019337901
EVENTS	1588019338618	{"@timestamp":"2020-04-27T20:28:57.901Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 58a76e9c-0c19-4da3-85d7-994d575e4447: [{\"id\":\"123313d1-f1a8-43e1-8302-02bf99fed2fa\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"58a76e9c-0c19-4da3-85d7-994d575e4447\",\"proxy_merchant_token\":\"59de62e6-bbae-4845-8f34-4fe6a7446cc5\",\"status\":\"EXPIRED\",\"sub_status\":\"available\",\"amount\":\"65000.00\",\"interest\":\"9723.14\",\"tax\":\"1555.70\",\"payback\":\"76278.84\",\"retention_rate\":\"5.0000\",\"expiration_date\":\"2020-02-22\",\"term_maximum\":4,\"created_at\":\"2020-02-07T01:42:24Z\"},{\"id\":\"8a47ebc7-68e8-4c04-ac8e-71108ad240d6\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"58a76e9c-0c19-4da3-85d7-994d575e4447\",\"proxy_merchant_token\":\"59de62e6-bbae-4845-8f34-4fe6a7446cc5\",\"status\":\"EXPIRED\",\"sub_status\":\"available\",\"amount\":\"55000.00\",\"interest\":\"8239.37\",\"tax\":\"1318.30\",\"payback\":\"64557.67\",\"retention_rate\":\"4.0000\",\"expiration_date\":\"2020-02-22\",\"term_maximum\":4,\"created_at\":\"2020-02-07T01:42:24Z\"},{\"id\":\"b399067e-139e-4b14-be6b-f5533d9b5f67\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"58a76e9c-0c19-4da3-85d7-994d575e4447\",\"proxy_merchant_token\":\"59de62e6-bbae-4845-8f34-4fe6a7446cc5\",\"status\":\"EXPIRED\",\"sub_status\":\"available\",\"amount\":\"45000.00\",\"interest\":\"6727.18\",\"tax\":\"1076.35\",\"payback\":\"52803.53\",\"retention_rate\":\"3.0000\",\"expiration_date\":\"2020-02-22\",\"term_maximum\":4,\"created_at\":\"2020-02-07T01:42:24Z\"}]"}	1588019337902
EVENTS	1588019648615	{"@timestamp":"2020-04-27T20:34:04.797Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.CollectionsHandler","method":"onCollectionsMessage","file":"CollectionsHandler.java","line":36,"message":"Request for merchant token 2bd2b6f9-a229-4e43-90a1-80f1a5c546a5: {\"merchant_token\": \"2bd2b6f9-a229-4e43-90a1-80f1a5c546a5\", \"loan_id\": \"1cb193f2-fab2-4bc4-858c-67282671d328\", limit: 7}"}	1588019644799
EVENTS	1588019648615	{"@timestamp":"2020-04-27T20:34:04.798Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.dao.CollectionsDaoImpl","method":"findCollectionsByMerchantToken","file":"CollectionsDaoImpl.java","line":98,"message":"loanId: 1cb193f2-fab2-4bc4-858c-67282671d328, merchantToken: 2bd2b6f9-a229-4e43-90a1-80f1a5c546a5, numberRows: 7"}	1588019644799
EVENTS	1588019648615	{"@timestamp":"2020-04-27T20:34:04.803Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.CollectionsHandler","method":"onCollectionsMessage","file":"CollectionsHandler.java","line":44,"message":"Response for merchant token 2bd2b6f9-a229-4e43-90a1-80f1a5c546a5: [{\"loan_id\":\"1cb193f2-fab2-4bc4-858c-67282671d328\",\"collection_date_local\":\"2020-04-27\",\"provider_code\":\"MRP\",\"merchant_token\":\"2bd2b6f9-a229-4e43-90a1-80f1a5c546a5\",\"proxy_merchant_token\":\"5db88b32-c354-4585-8b2d-bc2ffb60685a\",\"amount\":\"564.65\",\"capital\":\"492.04357067\",\"interest\":\"72.60642933\",\"tax\":\"0E-8\",\"overdue_interest\":\"0.00\",\"submited_date_local\":null,\"notes\":null,\"created_at\":\"2020-04-27T13:45:54Z\",\"updated_at\":\"2020-04-27T13:45:54Z\"},{\"loan_id\":\"1cb193f2-fab2-4bc4-858c-67282671d328\",\"collection_date_local\":\"2020-04-24\",\"provider_code\":\"MRP\",\"merchant_token\":\"2bd2b6f9-a229-4e43-90a1-80f1a5c546a5\",\"proxy_merchant_token\":\"5db88b32-c354-4585-8b2d-bc2ffb60685a\",\"amount\":\"2.88\",\"capital\":\"2.50967056\",\"interest\":\"0.37032944\",\"tax\":\"0E-8\",\"overdue_interest\":\"0.00\",\"submited_date_local\":null,\"notes\":null,\"created_at\":\"2020-04-24T11:45:31Z\",\"updated_at\":\"2020-04-24T11:45:31Z\"},{\"loan_id\":\"1cb193f2-fab2-4bc4-858c-67282671d328\",\"collection_date_local\":\"2020-04-15\",\"provider_code\":\"MRP\",\"merchant_token\":\"2bd2b6f9-a229-4e43-90a1-80f1a5c546a5\",\"proxy_merchant_token\":\"5db88b32-c354-4585-8b2d-bc2ffb60685a\",\"amount\":\"2.70\",\"capital\":\"2.35281615\",\"interest\":\"0.34718385\",\"tax\":\"0E-8\",\"overdue_interest\":\"0.00\",\"submited_date_local\":null,\"notes\":null,\"created_at\":\"2020-04-15T11:45:32Z\",\"updated_at\":\"2020-04-15T11:45:32Z\"},{\"loan_id\":\"1cb193f2-fab2-4bc4-858c-67282671d328\",\"collection_date_local\":\"2020-04-14\",\"provider_code\":\"MRP\",\"merchant_token\":\"2bd2b6f9-a229-4e43-90a1-80f1a5c546a5\",\"proxy_merchant_token\":\"5db88b32-c354-4585-8b2d-bc2ffb60685a\",\"amount\":\"0.54\",\"capital\":\"0.47056323\",\"interest\":\"0.06943677\",\"tax\":\"0E-8\",\"overdue_interest\":\"0.00\",\"submited_date_local\":null,\"notes\":null,\"created_at\":\"2020-04-14T11:45:32Z\",\"updated_at\":\"2020-04-14T11:45:32Z\"},{\"loan_id\":\"1cb193f2-fab2-4bc4-858c-67282671d328\",\"collection_date_local\":\"2020-04-13\",\"provider_code\":\"MRP\",\"merchant_token\":\"2bd2b6f9-a229-4e43-90a1-80f1a5c546a5\",\"proxy_merchant_token\":\"5db88b32-c354-4585-8b2d-bc2ffb60685a\",\"amount\":\"3.96\",\"capital\":\"3.45079702\",\"interest\":\"0.50920298\",\"tax\":\"0E-8\",\"overdue_interest\":\"0.00\",\"submited_date_local\":null,\"notes\":null,\"created_at\":\"2020-04-13T13:45:41Z\",\"updated_at\":\"2020-04-13T13:45:41Z\"},{\"loan_id\":\"1cb193f2-fab2-4bc4-858c-67282671d328\",\"collection_date_local\":\"2020-04-10\",\"provider_code\":\"MRP\",\"merchant_token\":\"2bd2b6f9-a229-4e43-90a1-80f1a5c546a5\",\"proxy_merchant_token\":\"5db88b32-c354-4585-8b2d-bc2ffb60685a\",\"amount\":\"2.70\",\"capital\":\"2.35281615\",\"interest\":\"0.34718385\",\"tax\":\"0E-8\",\"overdue_interest\":\"0.00\",\"submited_date_local\":null,\"notes\":null,\"created_at\":\"2020-04-10T11:45:30Z\",\"updated_at\":\"2020-04-10T11:45:30Z\"},{\"loan_id\":\"1cb193f2-fab2-4bc4-858c-67282671d328\",\"collection_date_local\":\"2020-04-07\",\"provider_code\":\"MRP\",\"merchant_token\":\"2bd2b6f9-a229-4e43-90a1-80f1a5c546a5\",\"proxy_merchant_token\":\"5db88b32-c354-4585-8b2d-bc2ffb60685a\",\"amount\":\"258.72\",\"capital\":\"225.45207226\",\"interest\":\"33.26792774\",\"tax\":\"0E-8\",\"overdue_interest\":\"0.00\",\"submited_date_local\":null,\"notes\":null,\"created_at\":\"2020-04-07T11:45:35Z\",\"updated_at\":\"2020-04-08T16:43:31Z\"}]"}	1588019644806
EVENTS	1588019793633	{"@timestamp":"2020-04-27T20:36:29.276Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 1a57d493-9112-432f-a125-36f64d3f3fa2 "}	1588019789277
EVENTS	1588019793633	{"@timestamp":"2020-04-27T20:36:29.277Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 1a57d493-9112-432f-a125-36f64d3f3fa2"}	1588019789277
EVENTS	1588019793633	{"@timestamp":"2020-04-27T20:36:29.278Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 1a57d493-9112-432f-a125-36f64d3f3fa2: []"}	1588019789278
EVENTS	1588019918629	{"@timestamp":"2020-04-27T20:38:38.251Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token c1a5ac76-161a-4f8c-b871-bd7b43aeaaad "}	1588019918251
EVENTS	1588019918629	{"@timestamp":"2020-04-27T20:38:38.251Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token c1a5ac76-161a-4f8c-b871-bd7b43aeaaad"}	1588019918251
EVENTS	1588019918629	{"@timestamp":"2020-04-27T20:38:38.253Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token c1a5ac76-161a-4f8c-b871-bd7b43aeaaad: []"}	1588019918253
EVENTS	1588020418617	{"@timestamp":"2020-04-27T20:46:55.140Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token f65f7e48-e090-4398-8abe-217ea4849ba6 "}	1588020415141
EVENTS	1588020418617	{"@timestamp":"2020-04-27T20:46:55.141Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token f65f7e48-e090-4398-8abe-217ea4849ba6"}	1588020415141
EVENTS	1588020418617	{"@timestamp":"2020-04-27T20:46:55.143Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token f65f7e48-e090-4398-8abe-217ea4849ba6: []"}	1588020415143
EVENTS	1588020428621	{"@timestamp":"2020-04-27T20:47:03.809Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token d7b942e5-0b62-40c9-9771-b662e03a7b73 "}	1588020423809
EVENTS	1588020428621	{"@timestamp":"2020-04-27T20:47:03.810Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token d7b942e5-0b62-40c9-9771-b662e03a7b73"}	1588020423810
EVENTS	1588020428621	{"@timestamp":"2020-04-27T20:47:03.811Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token d7b942e5-0b62-40c9-9771-b662e03a7b73: []"}	1588020423812
EVENTS	1588020678616	{"@timestamp":"2020-04-27T20:51:17.587Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 870df72f-a340-4eb3-b1a8-494e6659f17b "}	1588020677588
EVENTS	1588020678616	{"@timestamp":"2020-04-27T20:51:17.588Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 870df72f-a340-4eb3-b1a8-494e6659f17b"}	1588020677588
EVENTS	1588020678616	{"@timestamp":"2020-04-27T20:51:17.591Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 870df72f-a340-4eb3-b1a8-494e6659f17b: []"}	1588020677591
EVENTS	1588020693623	{"@timestamp":"2020-04-27T20:51:31.655Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token d318fa76-2f72-40ed-83c4-330d8b8397f9 "}	1588020691656
EVENTS	1588020693623	{"@timestamp":"2020-04-27T20:51:31.656Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token d318fa76-2f72-40ed-83c4-330d8b8397f9"}	1588020691656
EVENTS	1588020693623	{"@timestamp":"2020-04-27T20:51:31.657Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token d318fa76-2f72-40ed-83c4-330d8b8397f9"}	1588020691657
EVENTS	1588020693623	{"@timestamp":"2020-04-27T20:51:31.659Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'd318fa76-2f72-40ed-83c4-330d8b8397f9' and pre-approval: '2c1b852a-7921-4838-b270-46c9a2f5bea1'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588020691659
EVENTS	1588020693623	{"@timestamp":"2020-04-27T20:51:31.716Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"status\": \"available\"}"}	1588020691716
EVENTS	1588020693623	{"@timestamp":"2020-04-27T20:51:31.716Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token d318fa76-2f72-40ed-83c4-330d8b8397f9"}	1588020691717
EVENTS	1588020693623	{"@timestamp":"2020-04-27T20:51:31.718Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'd318fa76-2f72-40ed-83c4-330d8b8397f9' and pre-approval: 'c1d8cf78-570a-49ea-91e1-ce9725aa554c'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588020691718
EVENTS	1588020693623	{"@timestamp":"2020-04-27T20:51:31.761Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"status\": \"available\"}"}	1588020691761
EVENTS	1588020693623	{"@timestamp":"2020-04-27T20:51:31.761Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token d318fa76-2f72-40ed-83c4-330d8b8397f9"}	1588020691762
EVENTS	1588020693623	{"@timestamp":"2020-04-27T20:51:31.764Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'd318fa76-2f72-40ed-83c4-330d8b8397f9' and pre-approval: 'edaaf3bc-2684-44a7-86f7-644383a9b065'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588020691764
EVENTS	1588020693623	{"@timestamp":"2020-04-27T20:51:31.810Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"status\": \"available\"}"}	1588020691811
EVENTS	1588020693623	{"@timestamp":"2020-04-27T20:51:31.811Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token d318fa76-2f72-40ed-83c4-330d8b8397f9"}	1588020691811
EVENTS	1588020693623	{"@timestamp":"2020-04-27T20:51:31.812Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'd318fa76-2f72-40ed-83c4-330d8b8397f9' and pre-approval: '200c11a0-45fb-4055-a04a-0511a1564c32'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588020691813
EVENTS	1588020693623	{"@timestamp":"2020-04-27T20:51:31.870Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588020691870
EVENTS	1588020693623	{"@timestamp":"2020-04-27T20:51:31.870Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588020691871
EVENTS	1588020693623	{"@timestamp":"2020-04-27T20:51:31.871Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token d318fa76-2f72-40ed-83c4-330d8b8397f9"}	1588020691871
EVENTS	1588020693623	{"@timestamp":"2020-04-27T20:51:31.872Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'd318fa76-2f72-40ed-83c4-330d8b8397f9' and pre-approval: '7c72c193-8da4-448f-a69b-b64f9ecf07a0'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588020691872
EVENTS	1588020693623	{"@timestamp":"2020-04-27T20:51:31.914Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588020691914
EVENTS	1588020693623	{"@timestamp":"2020-04-27T20:51:31.914Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588020691915
EVENTS	1588020693623	{"@timestamp":"2020-04-27T20:51:31.915Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":206,"message":"invoking sql query to find loans by merchant token d318fa76-2f72-40ed-83c4-330d8b8397f9"}	1588020691915
EVENTS	1588020693623	{"@timestamp":"2020-04-27T20:51:31.917Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.dao.LoansDaoImpl","method":"findLoanByMerchantTokenAndPreapprovalId","file":"LoansDaoImpl.java","line":216,"message":"An expected exception occurred trying to get loan for the merchant token 'd318fa76-2f72-40ed-83c4-330d8b8397f9' and pre-approval: 'cca0d380-ab70-4bdb-a4c9-80d03e3f6767'.","exceptionclass":"org.springframework.dao.EmptyResultDataAccessException","exceptionmsg":"Incorrect result size: expected 1, actual 0","exceptionstack":"\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97)\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.queryForObject(NamedParameterJdbcTemplate.java:236)\n\tat com.payclip.loans.dao.LoansDaoImpl.findLoanByMerchantTokenAndPreapprovalId(LoansDaoImpl.java:207)\n\tat com.payclip.loans.dao.LoansDaoImpl$$FastClassBySpringCGLIB$$119d6c99.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.dao.LoansDaoImpl$$EnhancerBySpringCGLIB$$704330db.findLoanByMerchantTokenAndPreapprovalId(<generated>)\n\tat com.payclip.loans.service.PreApprovalsService.lambda$getPreapprovalsByMerchantToken$0(PreApprovalsService.java:96)\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n\tat com.payclip.loans.service.PreApprovalsService.getPreapprovalsByMerchantToken(PreApprovalsService.java:147)\n\tat com.payclip.loans.service.PreApprovalsService$$FastClassBySpringCGLIB$$f2e02761.invoke(<generated>)\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:119)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.payclip.loans.service.PreApprovalsService$$EnhancerBySpringCGLIB$$6aba512b.getPreapprovalsByMerchantToken(<generated>)\n\tat com.payclip.loans.handler.PreApprovalHandler.onMessage(PreApprovalHandler.java:41)\n\tat sun.reflect.GeneratedMethodAccessor127.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:170)\n\tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:120)\n\tat org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:49)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:190)\n\tat org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:127)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1514)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1440)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1428)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1423)\n\tat org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1372)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:870)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:854)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:78)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1137)\n\tat org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1043)\n\tat java.lang.Thread.run(Thread.java:748)\n"}	1588020691917
EVENTS	1588020693623	{"@timestamp":"2020-04-27T20:51:31.959Z","@version":"1","level":"INFO","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":159,"message":"messageResp: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588020691960
EVENTS	1588020693623	{"@timestamp":"2020-04-27T20:51:31.960Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getSubstatus","file":"PreApprovalsService.java","line":164,"message":"Response from sub-status preapproval queue: {\"error\":\"preapprovals_not_found\",\"error_description\":\"404 Parameter Not Found: Pre-approvals\",\"user_data\":{\"merchant_user_id\":null},\"redirect\":{\"status_process\":null,\"url_redirect\":null}}"}	1588020691960
EVENTS	1588020693623	{"@timestamp":"2020-04-27T20:51:31.961Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token d318fa76-2f72-40ed-83c4-330d8b8397f9: [{\"id\":\"2c1b852a-7921-4838-b270-46c9a2f5bea1\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"d318fa76-2f72-40ed-83c4-330d8b8397f9\",\"proxy_merchant_token\":\"7bd7223f-4065-473e-a08f-3d7f745524c8\",\"status\":\"AVAILABLE\",\"sub_status\":\"available\",\"amount\":\"12000.00\",\"interest\":\"2330.00\",\"tax\":\"372.80\",\"payback\":\"14702.80\",\"retention_rate\":\"10.0000\",\"expiration_date\":\"2020-03-16\",\"term_maximum\":5,\"created_at\":\"2020-02-27T11:15:54Z\"},{\"id\":\"c1d8cf78-570a-49ea-91e1-ce9725aa554c\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"d318fa76-2f72-40ed-83c4-330d8b8397f9\",\"proxy_merchant_token\":\"7bd7223f-4065-473e-a08f-3d7f745524c8\",\"status\":\"AVAILABLE\",\"sub_status\":\"available\",\"amount\":\"16800.00\",\"interest\":\"3270.00\",\"tax\":\"523.20\",\"payback\":\"20593.20\",\"retention_rate\":\"14.0000\",\"expiration_date\":\"2020-03-16\",\"term_maximum\":5,\"created_at\":\"2020-02-27T11:15:54Z\"},{\"id\":\"edaaf3bc-2684-44a7-86f7-644383a9b065\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"d318fa76-2f72-40ed-83c4-330d8b8397f9\",\"proxy_merchant_token\":\"7bd7223f-4065-473e-a08f-3d7f745524c8\",\"status\":\"AVAILABLE\",\"sub_status\":\"available\",\"amount\":\"21600.00\",\"interest\":\"4200.00\",\"tax\":\"672.00\",\"payback\":\"26472.00\",\"retention_rate\":\"18.0000\",\"expiration_date\":\"2020-03-16\",\"term_maximum\":5,\"created_at\":\"2020-02-27T11:15:54Z\"},{\"id\":\"200c11a0-45fb-4055-a04a-0511a1564c32\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"d318fa76-2f72-40ed-83c4-330d8b8397f9\",\"proxy_merchant_token\":\"7bd7223f-4065-473e-a08f-3d7f745524c8\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"17300.00\",\"interest\":\"2460.00\",\"tax\":\"393.60\",\"payback\":\"20153.60\",\"retention_rate\":\"18.0000\",\"expiration_date\":\"2020-02-22\",\"term_maximum\":4,\"created_at\":\"2020-02-07T06:50:40Z\"},{\"id\":\"7c72c193-8da4-448f-a69b-b64f9ecf07a0\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"d318fa76-2f72-40ed-83c4-330d8b8397f9\",\"proxy_merchant_token\":\"7bd7223f-4065-473e-a08f-3d7f745524c8\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"9600.00\",\"interest\":\"1380.00\",\"tax\":\"220.80\",\"payback\":\"11200.80\",\"retention_rate\":\"10.0000\",\"expiration_date\":\"2020-02-22\",\"term_maximum\":4,\"created_at\":\"2020-02-07T06:50:40Z\"},{\"id\":\"cca0d380-ab70-4bdb-a4c9-80d03e3f6767\",\"loan\":null,\"provider_code\":\"MRP\",\"provider_id\":null,\"merchant_token\":\"d318fa76-2f72-40ed-83c4-330d8b8397f9\",\"proxy_merchant_token\":\"7bd7223f-4065-473e-a08f-3d7f745524c8\",\"status\":\"EXPIRED\",\"sub_status\":\"\",\"amount\":\"13500.00\",\"interest\":\"1870.00\",\"tax\":\"299.20\",\"payback\":\"15669.20\",\"retention_rate\":\"14.0000\",\"expiration_date\":\"2020-02-22\",\"term_maximum\":4,\"created_at\":\"2020-02-07T06:50:40Z\"}]"}	1588020691962
EVENTS	1588020698604	{"@timestamp":"2020-04-27T20:51:36.678Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 2c820711-4d74-4dfa-9a2f-754dc965ac25 "}	1588020696679
EVENTS	1588020698604	{"@timestamp":"2020-04-27T20:51:36.679Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 2c820711-4d74-4dfa-9a2f-754dc965ac25"}	1588020696679
EVENTS	1588020698604	{"@timestamp":"2020-04-27T20:51:36.683Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 2c820711-4d74-4dfa-9a2f-754dc965ac25: []"}	1588020696684
EVENTS	1588020713619	{"@timestamp":"2020-04-27T20:51:53.056Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token 0224ad54-fa3f-44c1-b674-ffd05ae88d0f "}	1588020713058
EVENTS	1588020713619	{"@timestamp":"2020-04-27T20:51:53.057Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token 0224ad54-fa3f-44c1-b674-ffd05ae88d0f"}	1588020713058
EVENTS	1588020713619	{"@timestamp":"2020-04-27T20:51:53.059Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-3","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token 0224ad54-fa3f-44c1-b674-ffd05ae88d0f: []"}	1588020713060
EVENTS	1588020928618	{"@timestamp":"2020-04-27T20:55:25.090Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token a028ae21-b7a7-4200-9371-1f30afc9d366 "}	1588020925090
EVENTS	1588020928618	{"@timestamp":"2020-04-27T20:55:25.090Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token a028ae21-b7a7-4200-9371-1f30afc9d366"}	1588020925090
EVENTS	1588020928618	{"@timestamp":"2020-04-27T20:55:25.091Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-4","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token a028ae21-b7a7-4200-9371-1f30afc9d366: []"}	1588020925091
EVENTS	1588020928618	{"@timestamp":"2020-04-27T20:55:27.038Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token eac72b14-6c86-4228-94c8-4a6c32ef8f56 "}	1588020927038
EVENTS	1588020928618	{"@timestamp":"2020-04-27T20:55:27.038Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token eac72b14-6c86-4228-94c8-4a6c32ef8f56"}	1588020927039
EVENTS	1588020928618	{"@timestamp":"2020-04-27T20:55:27.040Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-1","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token eac72b14-6c86-4228-94c8-4a6c32ef8f56: []"}	1588020927040
EVENTS	1588021023607	{"@timestamp":"2020-04-27T20:56:59.976Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":40,"message":"Request for merchant token efc8dc6b-e587-4fd0-8d92-762c5593a27a "}	1588021019976
EVENTS	1588021023607	{"@timestamp":"2020-04-27T20:56:59.976Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.service.PreApprovalsService","method":"getPreapprovalsByMerchantToken","file":"PreApprovalsService.java","line":91,"message":"Retrieving pre approvals for merchant with merchant token efc8dc6b-e587-4fd0-8d92-762c5593a27a"}	1588021019977
EVENTS	1588021023607	{"@timestamp":"2020-04-27T20:56:59.979Z","@version":"1","level":"DEBUG","serviceName":"service-loans","environment":"prod1","infrastucture":"AWS","hostname":"ip-10-0-1-34.prodpayclip.com","ip":"10.0.1.34","az":"us-west-2a","instanceId":"i-054ae4fa8f7414631","thread":"SimpleAsyncTaskExecutor-2","class":"com.payclip.loans.handler.PreApprovalHandler","method":"onMessage","file":"PreApprovalHandler.java","line":47,"message":"Response for merchant token efc8dc6b-e587-4fd0-8d92-762c5593a27a: []"}	1588021019980
